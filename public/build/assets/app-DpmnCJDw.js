function No(e,t){return function(){return e.apply(t,arguments)}}const{toString:Xs}=Object.prototype,{getPrototypeOf:wn}=Object,{iterator:Dt,toStringTag:Po}=Symbol,Mt=(e=>t=>{const n=Xs.call(t);return e[n]||(e[n]=n.slice(8,-1).toLowerCase())})(Object.create(null)),H=e=>(e=e.toLowerCase(),t=>Mt(t)===e),Rt=e=>t=>typeof t===e,{isArray:Se}=Array,Fe=Rt("undefined");function Ke(e){return e!==null&&!Fe(e)&&e.constructor!==null&&!Fe(e.constructor)&&I(e.constructor.isBuffer)&&e.constructor.isBuffer(e)}const jo=H("ArrayBuffer");function Ws(e){let t;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?t=ArrayBuffer.isView(e):t=e&&e.buffer&&jo(e.buffer),t}const Ks=Rt("string"),I=Rt("function"),qo=Rt("number"),Ye=e=>e!==null&&typeof e=="object",Ys=e=>e===!0||e===!1,mt=e=>{if(Mt(e)!=="object")return!1;const t=wn(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Po in e)&&!(Dt in e)},Gs=e=>{if(!Ye(e)||Ke(e))return!1;try{return Object.keys(e).length===0&&Object.getPrototypeOf(e)===Object.prototype}catch{return!1}},Zs=H("Date"),Qs=H("File"),ea=H("Blob"),ta=H("FileList"),na=e=>Ye(e)&&I(e.pipe),oa=e=>{let t;return e&&(typeof FormData=="function"&&e instanceof FormData||I(e.append)&&((t=Mt(e))==="formdata"||t==="object"&&I(e.toString)&&e.toString()==="[object FormData]"))},sa=H("URLSearchParams"),[aa,ra,ia,da]=["ReadableStream","Request","Response","Headers"].map(H),la=e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function Ge(e,t,{allOwnKeys:n=!1}={}){if(e===null||typeof e>"u")return;let o,s;if(typeof e!="object"&&(e=[e]),Se(e))for(o=0,s=e.length;o<s;o++)t.call(null,e[o],o,e);else{if(Ke(e))return;const a=n?Object.getOwnPropertyNames(e):Object.keys(e),r=a.length;let i;for(o=0;o<r;o++)i=a[o],t.call(null,e[i],i,e)}}function Oo(e,t){if(Ke(e))return null;t=t.toLowerCase();const n=Object.keys(e);let o=n.length,s;for(;o-- >0;)if(s=n[o],t===s.toLowerCase())return s;return null}const ae=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,_o=e=>!Fe(e)&&e!==ae;function dn(){const{caseless:e,skipUndefined:t}=_o(this)&&this||{},n={},o=(s,a)=>{const r=e&&Oo(n,a)||a;mt(n[r])&&mt(s)?n[r]=dn(n[r],s):mt(s)?n[r]=dn({},s):Se(s)?n[r]=s.slice():(!t||!Fe(s))&&(n[r]=s)};for(let s=0,a=arguments.length;s<a;s++)arguments[s]&&Ge(arguments[s],o);return n}const ca=(e,t,n,{allOwnKeys:o}={})=>(Ge(t,(s,a)=>{n&&I(s)?e[a]=No(s,n):e[a]=s},{allOwnKeys:o}),e),ua=e=>(e.charCodeAt(0)===65279&&(e=e.slice(1)),e),ma=(e,t,n,o)=>{e.prototype=Object.create(t.prototype,o),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),n&&Object.assign(e.prototype,n)},fa=(e,t,n,o)=>{let s,a,r;const i={};if(t=t||{},e==null)return t;do{for(s=Object.getOwnPropertyNames(e),a=s.length;a-- >0;)r=s[a],(!o||o(r,e,t))&&!i[r]&&(t[r]=e[r],i[r]=!0);e=n!==!1&&wn(e)}while(e&&(!n||n(e,t))&&e!==Object.prototype);return t},pa=(e,t,n)=>{e=String(e),(n===void 0||n>e.length)&&(n=e.length),n-=t.length;const o=e.indexOf(t,n);return o!==-1&&o===n},ga=e=>{if(!e)return null;if(Se(e))return e;let t=e.length;if(!qo(t))return null;const n=new Array(t);for(;t-- >0;)n[t]=e[t];return n},ya=(e=>t=>e&&t instanceof e)(typeof Uint8Array<"u"&&wn(Uint8Array)),ha=(e,t)=>{const o=(e&&e[Dt]).call(e);let s;for(;(s=o.next())&&!s.done;){const a=s.value;t.call(e,a[0],a[1])}},ba=(e,t)=>{let n;const o=[];for(;(n=e.exec(t))!==null;)o.push(n);return o},va=H("HTMLFormElement"),xa=e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(n,o,s){return o.toUpperCase()+s}),Wn=(({hasOwnProperty:e})=>(t,n)=>e.call(t,n))(Object.prototype),wa=H("RegExp"),Ho=(e,t)=>{const n=Object.getOwnPropertyDescriptors(e),o={};Ge(n,(s,a)=>{let r;(r=t(s,a,e))!==!1&&(o[a]=r||s)}),Object.defineProperties(e,o)},Ea=e=>{Ho(e,(t,n)=>{if(I(e)&&["arguments","caller","callee"].indexOf(n)!==-1)return!1;const o=e[n];if(I(o)){if(t.enumerable=!1,"writable"in t){t.writable=!1;return}t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")})}})},ka=(e,t)=>{const n={},o=s=>{s.forEach(a=>{n[a]=!0})};return Se(e)?o(e):o(String(e).split(t)),n},La=()=>{},Ba=(e,t)=>e!=null&&Number.isFinite(e=+e)?e:t;function Fa(e){return!!(e&&I(e.append)&&e[Po]==="FormData"&&e[Dt])}const Ta=e=>{const t=new Array(10),n=(o,s)=>{if(Ye(o)){if(t.indexOf(o)>=0)return;if(Ke(o))return o;if(!("toJSON"in o)){t[s]=o;const a=Se(o)?[]:{};return Ge(o,(r,i)=>{const c=n(r,s+1);!Fe(c)&&(a[i]=c)}),t[s]=void 0,a}}return o};return n(e,0)},$a=H("AsyncFunction"),Ca=e=>e&&(Ye(e)||I(e))&&I(e.then)&&I(e.catch),Uo=((e,t)=>e?setImmediate:t?((n,o)=>(ae.addEventListener("message",({source:s,data:a})=>{s===ae&&a===n&&o.length&&o.shift()()},!1),s=>{o.push(s),ae.postMessage(n,"*")}))(`axios@${Math.random()}`,[]):n=>setTimeout(n))(typeof setImmediate=="function",I(ae.postMessage)),Ia=typeof queueMicrotask<"u"?queueMicrotask.bind(ae):typeof process<"u"&&process.nextTick||Uo,Sa=e=>e!=null&&I(e[Dt]),d={isArray:Se,isArrayBuffer:jo,isBuffer:Ke,isFormData:oa,isArrayBufferView:Ws,isString:Ks,isNumber:qo,isBoolean:Ys,isObject:Ye,isPlainObject:mt,isEmptyObject:Gs,isReadableStream:aa,isRequest:ra,isResponse:ia,isHeaders:da,isUndefined:Fe,isDate:Zs,isFile:Qs,isBlob:ea,isRegExp:wa,isFunction:I,isStream:na,isURLSearchParams:sa,isTypedArray:ya,isFileList:ta,forEach:Ge,merge:dn,extend:ca,trim:la,stripBOM:ua,inherits:ma,toFlatObject:fa,kindOf:Mt,kindOfTest:H,endsWith:pa,toArray:ga,forEachEntry:ha,matchAll:ba,isHTMLForm:va,hasOwnProperty:Wn,hasOwnProp:Wn,reduceDescriptors:Ho,freezeMethods:Ea,toObjectSet:ka,toCamelCase:xa,noop:La,toFiniteNumber:Ba,findKey:Oo,global:ae,isContextDefined:_o,isSpecCompliantForm:Fa,toJSONObject:Ta,isAsyncFn:$a,isThenable:Ca,setImmediate:Uo,asap:Ia,isIterable:Sa};function x(e,t,n,o,s){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=e,this.name="AxiosError",t&&(this.code=t),n&&(this.config=n),o&&(this.request=o),s&&(this.response=s,this.status=s.status?s.status:null)}d.inherits(x,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:d.toJSONObject(this.config),code:this.code,status:this.status}}});const Vo=x.prototype,zo={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(e=>{zo[e]={value:e}});Object.defineProperties(x,zo);Object.defineProperty(Vo,"isAxiosError",{value:!0});x.from=(e,t,n,o,s,a)=>{const r=Object.create(Vo);d.toFlatObject(e,r,function(u){return u!==Error.prototype},l=>l!=="isAxiosError");const i=e&&e.message?e.message:"Error",c=t==null&&e?e.code:t;return x.call(r,i,c,n,o,s),e&&r.cause==null&&Object.defineProperty(r,"cause",{value:e,configurable:!0}),r.name=e&&e.name||"Error",a&&Object.assign(r,a),r};const Aa=null;function ln(e){return d.isPlainObject(e)||d.isArray(e)}function Jo(e){return d.endsWith(e,"[]")?e.slice(0,-2):e}function Kn(e,t,n){return e?e.concat(t).map(function(s,a){return s=Jo(s),!n&&a?"["+s+"]":s}).join(n?".":""):t}function Da(e){return d.isArray(e)&&!e.some(ln)}const Ma=d.toFlatObject(d,{},null,function(t){return/^is[A-Z]/.test(t)});function Nt(e,t,n){if(!d.isObject(e))throw new TypeError("target must be an object");t=t||new FormData,n=d.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,function(y,p){return!d.isUndefined(p[y])});const o=n.metaTokens,s=n.visitor||u,a=n.dots,r=n.indexes,c=(n.Blob||typeof Blob<"u"&&Blob)&&d.isSpecCompliantForm(t);if(!d.isFunction(s))throw new TypeError("visitor must be a function");function l(m){if(m===null)return"";if(d.isDate(m))return m.toISOString();if(d.isBoolean(m))return m.toString();if(!c&&d.isBlob(m))throw new x("Blob is not supported. Use a Buffer instead.");return d.isArrayBuffer(m)||d.isTypedArray(m)?c&&typeof Blob=="function"?new Blob([m]):Buffer.from(m):m}function u(m,y,p){let g=m;if(m&&!p&&typeof m=="object"){if(d.endsWith(y,"{}"))y=o?y:y.slice(0,-2),m=JSON.stringify(m);else if(d.isArray(m)&&Da(m)||(d.isFileList(m)||d.endsWith(y,"[]"))&&(g=d.toArray(m)))return y=Jo(y),g.forEach(function(h,E){!(d.isUndefined(h)||h===null)&&t.append(r===!0?Kn([y],E,a):r===null?y:y+"[]",l(h))}),!1}return ln(m)?!0:(t.append(Kn(p,y,a),l(m)),!1)}const f=[],b=Object.assign(Ma,{defaultVisitor:u,convertValue:l,isVisitable:ln});function w(m,y){if(!d.isUndefined(m)){if(f.indexOf(m)!==-1)throw Error("Circular reference detected in "+y.join("."));f.push(m),d.forEach(m,function(g,v){(!(d.isUndefined(g)||g===null)&&s.call(t,g,d.isString(v)?v.trim():v,y,b))===!0&&w(g,y?y.concat(v):[v])}),f.pop()}}if(!d.isObject(e))throw new TypeError("data must be an object");return w(e),t}function Yn(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,function(o){return t[o]})}function En(e,t){this._pairs=[],e&&Nt(e,this,t)}const Xo=En.prototype;Xo.append=function(t,n){this._pairs.push([t,n])};Xo.toString=function(t){const n=t?function(o){return t.call(this,o,Yn)}:Yn;return this._pairs.map(function(s){return n(s[0])+"="+n(s[1])},"").join("&")};function Ra(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+")}function Wo(e,t,n){if(!t)return e;const o=n&&n.encode||Ra;d.isFunction(n)&&(n={serialize:n});const s=n&&n.serialize;let a;if(s?a=s(t,n):a=d.isURLSearchParams(t)?t.toString():new En(t,n).toString(o),a){const r=e.indexOf("#");r!==-1&&(e=e.slice(0,r)),e+=(e.indexOf("?")===-1?"?":"&")+a}return e}class Gn{constructor(){this.handlers=[]}use(t,n,o){return this.handlers.push({fulfilled:t,rejected:n,synchronous:o?o.synchronous:!1,runWhen:o?o.runWhen:null}),this.handlers.length-1}eject(t){this.handlers[t]&&(this.handlers[t]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(t){d.forEach(this.handlers,function(o){o!==null&&t(o)})}}const Ko={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},Na=typeof URLSearchParams<"u"?URLSearchParams:En,Pa=typeof FormData<"u"?FormData:null,ja=typeof Blob<"u"?Blob:null,qa={isBrowser:!0,classes:{URLSearchParams:Na,FormData:Pa,Blob:ja},protocols:["http","https","file","blob","url","data"]},kn=typeof window<"u"&&typeof document<"u",cn=typeof navigator=="object"&&navigator||void 0,Oa=kn&&(!cn||["ReactNative","NativeScript","NS"].indexOf(cn.product)<0),_a=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",Ha=kn&&window.location.href||"http://localhost",Ua=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:kn,hasStandardBrowserEnv:Oa,hasStandardBrowserWebWorkerEnv:_a,navigator:cn,origin:Ha},Symbol.toStringTag,{value:"Module"})),F={...Ua,...qa};function Va(e,t){return Nt(e,new F.classes.URLSearchParams,{visitor:function(n,o,s,a){return F.isNode&&d.isBuffer(n)?(this.append(o,n.toString("base64")),!1):a.defaultVisitor.apply(this,arguments)},...t})}function za(e){return d.matchAll(/\w+|\[(\w*)]/g,e).map(t=>t[0]==="[]"?"":t[1]||t[0])}function Ja(e){const t={},n=Object.keys(e);let o;const s=n.length;let a;for(o=0;o<s;o++)a=n[o],t[a]=e[a];return t}function Yo(e){function t(n,o,s,a){let r=n[a++];if(r==="__proto__")return!0;const i=Number.isFinite(+r),c=a>=n.length;return r=!r&&d.isArray(s)?s.length:r,c?(d.hasOwnProp(s,r)?s[r]=[s[r],o]:s[r]=o,!i):((!s[r]||!d.isObject(s[r]))&&(s[r]=[]),t(n,o,s[r],a)&&d.isArray(s[r])&&(s[r]=Ja(s[r])),!i)}if(d.isFormData(e)&&d.isFunction(e.entries)){const n={};return d.forEachEntry(e,(o,s)=>{t(za(o),s,n,0)}),n}return null}function Xa(e,t,n){if(d.isString(e))try{return(t||JSON.parse)(e),d.trim(e)}catch(o){if(o.name!=="SyntaxError")throw o}return(n||JSON.stringify)(e)}const Ze={transitional:Ko,adapter:["xhr","http","fetch"],transformRequest:[function(t,n){const o=n.getContentType()||"",s=o.indexOf("application/json")>-1,a=d.isObject(t);if(a&&d.isHTMLForm(t)&&(t=new FormData(t)),d.isFormData(t))return s?JSON.stringify(Yo(t)):t;if(d.isArrayBuffer(t)||d.isBuffer(t)||d.isStream(t)||d.isFile(t)||d.isBlob(t)||d.isReadableStream(t))return t;if(d.isArrayBufferView(t))return t.buffer;if(d.isURLSearchParams(t))return n.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),t.toString();let i;if(a){if(o.indexOf("application/x-www-form-urlencoded")>-1)return Va(t,this.formSerializer).toString();if((i=d.isFileList(t))||o.indexOf("multipart/form-data")>-1){const c=this.env&&this.env.FormData;return Nt(i?{"files[]":t}:t,c&&new c,this.formSerializer)}}return a||s?(n.setContentType("application/json",!1),Xa(t)):t}],transformResponse:[function(t){const n=this.transitional||Ze.transitional,o=n&&n.forcedJSONParsing,s=this.responseType==="json";if(d.isResponse(t)||d.isReadableStream(t))return t;if(t&&d.isString(t)&&(o&&!this.responseType||s)){const r=!(n&&n.silentJSONParsing)&&s;try{return JSON.parse(t,this.parseReviver)}catch(i){if(r)throw i.name==="SyntaxError"?x.from(i,x.ERR_BAD_RESPONSE,this,null,this.response):i}}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:F.classes.FormData,Blob:F.classes.Blob},validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};d.forEach(["delete","get","head","post","put","patch"],e=>{Ze.headers[e]={}});const Wa=d.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),Ka=e=>{const t={};let n,o,s;return e&&e.split(`
`).forEach(function(r){s=r.indexOf(":"),n=r.substring(0,s).trim().toLowerCase(),o=r.substring(s+1).trim(),!(!n||t[n]&&Wa[n])&&(n==="set-cookie"?t[n]?t[n].push(o):t[n]=[o]:t[n]=t[n]?t[n]+", "+o:o)}),t},Zn=Symbol("internals");function Me(e){return e&&String(e).trim().toLowerCase()}function ft(e){return e===!1||e==null?e:d.isArray(e)?e.map(ft):String(e)}function Ya(e){const t=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let o;for(;o=n.exec(e);)t[o[1]]=o[2];return t}const Ga=e=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim());function zt(e,t,n,o,s){if(d.isFunction(o))return o.call(this,t,n);if(s&&(t=n),!!d.isString(t)){if(d.isString(o))return t.indexOf(o)!==-1;if(d.isRegExp(o))return o.test(t)}}function Za(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(t,n,o)=>n.toUpperCase()+o)}function Qa(e,t){const n=d.toCamelCase(" "+t);["get","set","has"].forEach(o=>{Object.defineProperty(e,o+n,{value:function(s,a,r){return this[o].call(this,t,s,a,r)},configurable:!0})})}let S=class{constructor(t){t&&this.set(t)}set(t,n,o){const s=this;function a(i,c,l){const u=Me(c);if(!u)throw new Error("header name must be a non-empty string");const f=d.findKey(s,u);(!f||s[f]===void 0||l===!0||l===void 0&&s[f]!==!1)&&(s[f||c]=ft(i))}const r=(i,c)=>d.forEach(i,(l,u)=>a(l,u,c));if(d.isPlainObject(t)||t instanceof this.constructor)r(t,n);else if(d.isString(t)&&(t=t.trim())&&!Ga(t))r(Ka(t),n);else if(d.isObject(t)&&d.isIterable(t)){let i={},c,l;for(const u of t){if(!d.isArray(u))throw TypeError("Object iterator must return a key-value pair");i[l=u[0]]=(c=i[l])?d.isArray(c)?[...c,u[1]]:[c,u[1]]:u[1]}r(i,n)}else t!=null&&a(n,t,o);return this}get(t,n){if(t=Me(t),t){const o=d.findKey(this,t);if(o){const s=this[o];if(!n)return s;if(n===!0)return Ya(s);if(d.isFunction(n))return n.call(this,s,o);if(d.isRegExp(n))return n.exec(s);throw new TypeError("parser must be boolean|regexp|function")}}}has(t,n){if(t=Me(t),t){const o=d.findKey(this,t);return!!(o&&this[o]!==void 0&&(!n||zt(this,this[o],o,n)))}return!1}delete(t,n){const o=this;let s=!1;function a(r){if(r=Me(r),r){const i=d.findKey(o,r);i&&(!n||zt(o,o[i],i,n))&&(delete o[i],s=!0)}}return d.isArray(t)?t.forEach(a):a(t),s}clear(t){const n=Object.keys(this);let o=n.length,s=!1;for(;o--;){const a=n[o];(!t||zt(this,this[a],a,t,!0))&&(delete this[a],s=!0)}return s}normalize(t){const n=this,o={};return d.forEach(this,(s,a)=>{const r=d.findKey(o,a);if(r){n[r]=ft(s),delete n[a];return}const i=t?Za(a):String(a).trim();i!==a&&delete n[a],n[i]=ft(s),o[i]=!0}),this}concat(...t){return this.constructor.concat(this,...t)}toJSON(t){const n=Object.create(null);return d.forEach(this,(o,s)=>{o!=null&&o!==!1&&(n[s]=t&&d.isArray(o)?o.join(", "):o)}),n}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([t,n])=>t+": "+n).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(t){return t instanceof this?t:new this(t)}static concat(t,...n){const o=new this(t);return n.forEach(s=>o.set(s)),o}static accessor(t){const o=(this[Zn]=this[Zn]={accessors:{}}).accessors,s=this.prototype;function a(r){const i=Me(r);o[i]||(Qa(s,r),o[i]=!0)}return d.isArray(t)?t.forEach(a):a(t),this}};S.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);d.reduceDescriptors(S.prototype,({value:e},t)=>{let n=t[0].toUpperCase()+t.slice(1);return{get:()=>e,set(o){this[n]=o}}});d.freezeMethods(S);function Jt(e,t){const n=this||Ze,o=t||n,s=S.from(o.headers);let a=o.data;return d.forEach(e,function(i){a=i.call(n,a,s.normalize(),t?t.status:void 0)}),s.normalize(),a}function Go(e){return!!(e&&e.__CANCEL__)}function Ae(e,t,n){x.call(this,e??"canceled",x.ERR_CANCELED,t,n),this.name="CanceledError"}d.inherits(Ae,x,{__CANCEL__:!0});function Zo(e,t,n){const o=n.config.validateStatus;!n.status||!o||o(n.status)?e(n):t(new x("Request failed with status code "+n.status,[x.ERR_BAD_REQUEST,x.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n))}function er(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}function tr(e,t){e=e||10;const n=new Array(e),o=new Array(e);let s=0,a=0,r;return t=t!==void 0?t:1e3,function(c){const l=Date.now(),u=o[a];r||(r=l),n[s]=c,o[s]=l;let f=a,b=0;for(;f!==s;)b+=n[f++],f=f%e;if(s=(s+1)%e,s===a&&(a=(a+1)%e),l-r<t)return;const w=u&&l-u;return w?Math.round(b*1e3/w):void 0}}function nr(e,t){let n=0,o=1e3/t,s,a;const r=(l,u=Date.now())=>{n=u,s=null,a&&(clearTimeout(a),a=null),e(...l)};return[(...l)=>{const u=Date.now(),f=u-n;f>=o?r(l,u):(s=l,a||(a=setTimeout(()=>{a=null,r(s)},o-f)))},()=>s&&r(s)]}const Et=(e,t,n=3)=>{let o=0;const s=tr(50,250);return nr(a=>{const r=a.loaded,i=a.lengthComputable?a.total:void 0,c=r-o,l=s(c),u=r<=i;o=r;const f={loaded:r,total:i,progress:i?r/i:void 0,bytes:c,rate:l||void 0,estimated:l&&i&&u?(i-r)/l:void 0,event:a,lengthComputable:i!=null,[t?"download":"upload"]:!0};e(f)},n)},Qn=(e,t)=>{const n=e!=null;return[o=>t[0]({lengthComputable:n,total:e,loaded:o}),t[1]]},eo=e=>(...t)=>d.asap(()=>e(...t)),or=F.hasStandardBrowserEnv?((e,t)=>n=>(n=new URL(n,F.origin),e.protocol===n.protocol&&e.host===n.host&&(t||e.port===n.port)))(new URL(F.origin),F.navigator&&/(msie|trident)/i.test(F.navigator.userAgent)):()=>!0,sr=F.hasStandardBrowserEnv?{write(e,t,n,o,s,a,r){if(typeof document>"u")return;const i=[`${e}=${encodeURIComponent(t)}`];d.isNumber(n)&&i.push(`expires=${new Date(n).toUTCString()}`),d.isString(o)&&i.push(`path=${o}`),d.isString(s)&&i.push(`domain=${s}`),a===!0&&i.push("secure"),d.isString(r)&&i.push(`SameSite=${r}`),document.cookie=i.join("; ")},read(e){if(typeof document>"u")return null;const t=document.cookie.match(new RegExp("(?:^|; )"+e+"=([^;]*)"));return t?decodeURIComponent(t[1]):null},remove(e){this.write(e,"",Date.now()-864e5,"/")}}:{write(){},read(){return null},remove(){}};function ar(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}function rr(e,t){return t?e.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):e}function Qo(e,t,n){let o=!ar(t);return e&&(o||n==!1)?rr(e,t):t}const to=e=>e instanceof S?{...e}:e;function ue(e,t){t=t||{};const n={};function o(l,u,f,b){return d.isPlainObject(l)&&d.isPlainObject(u)?d.merge.call({caseless:b},l,u):d.isPlainObject(u)?d.merge({},u):d.isArray(u)?u.slice():u}function s(l,u,f,b){if(d.isUndefined(u)){if(!d.isUndefined(l))return o(void 0,l,f,b)}else return o(l,u,f,b)}function a(l,u){if(!d.isUndefined(u))return o(void 0,u)}function r(l,u){if(d.isUndefined(u)){if(!d.isUndefined(l))return o(void 0,l)}else return o(void 0,u)}function i(l,u,f){if(f in t)return o(l,u);if(f in e)return o(void 0,l)}const c={url:a,method:a,data:a,baseURL:r,transformRequest:r,transformResponse:r,paramsSerializer:r,timeout:r,timeoutMessage:r,withCredentials:r,withXSRFToken:r,adapter:r,responseType:r,xsrfCookieName:r,xsrfHeaderName:r,onUploadProgress:r,onDownloadProgress:r,decompress:r,maxContentLength:r,maxBodyLength:r,beforeRedirect:r,transport:r,httpAgent:r,httpsAgent:r,cancelToken:r,socketPath:r,responseEncoding:r,validateStatus:i,headers:(l,u,f)=>s(to(l),to(u),f,!0)};return d.forEach(Object.keys({...e,...t}),function(u){const f=c[u]||s,b=f(e[u],t[u],u);d.isUndefined(b)&&f!==i||(n[u]=b)}),n}const es=e=>{const t=ue({},e);let{data:n,withXSRFToken:o,xsrfHeaderName:s,xsrfCookieName:a,headers:r,auth:i}=t;if(t.headers=r=S.from(r),t.url=Wo(Qo(t.baseURL,t.url,t.allowAbsoluteUrls),e.params,e.paramsSerializer),i&&r.set("Authorization","Basic "+btoa((i.username||"")+":"+(i.password?unescape(encodeURIComponent(i.password)):""))),d.isFormData(n)){if(F.hasStandardBrowserEnv||F.hasStandardBrowserWebWorkerEnv)r.setContentType(void 0);else if(d.isFunction(n.getHeaders)){const c=n.getHeaders(),l=["content-type","content-length"];Object.entries(c).forEach(([u,f])=>{l.includes(u.toLowerCase())&&r.set(u,f)})}}if(F.hasStandardBrowserEnv&&(o&&d.isFunction(o)&&(o=o(t)),o||o!==!1&&or(t.url))){const c=s&&a&&sr.read(a);c&&r.set(s,c)}return t},ir=typeof XMLHttpRequest<"u",dr=ir&&function(e){return new Promise(function(n,o){const s=es(e);let a=s.data;const r=S.from(s.headers).normalize();let{responseType:i,onUploadProgress:c,onDownloadProgress:l}=s,u,f,b,w,m;function y(){w&&w(),m&&m(),s.cancelToken&&s.cancelToken.unsubscribe(u),s.signal&&s.signal.removeEventListener("abort",u)}let p=new XMLHttpRequest;p.open(s.method.toUpperCase(),s.url,!0),p.timeout=s.timeout;function g(){if(!p)return;const h=S.from("getAllResponseHeaders"in p&&p.getAllResponseHeaders()),L={data:!i||i==="text"||i==="json"?p.responseText:p.response,status:p.status,statusText:p.statusText,headers:h,config:e,request:p};Zo(function(C){n(C),y()},function(C){o(C),y()},L),p=null}"onloadend"in p?p.onloadend=g:p.onreadystatechange=function(){!p||p.readyState!==4||p.status===0&&!(p.responseURL&&p.responseURL.indexOf("file:")===0)||setTimeout(g)},p.onabort=function(){p&&(o(new x("Request aborted",x.ECONNABORTED,e,p)),p=null)},p.onerror=function(E){const L=E&&E.message?E.message:"Network Error",D=new x(L,x.ERR_NETWORK,e,p);D.event=E||null,o(D),p=null},p.ontimeout=function(){let E=s.timeout?"timeout of "+s.timeout+"ms exceeded":"timeout exceeded";const L=s.transitional||Ko;s.timeoutErrorMessage&&(E=s.timeoutErrorMessage),o(new x(E,L.clarifyTimeoutError?x.ETIMEDOUT:x.ECONNABORTED,e,p)),p=null},a===void 0&&r.setContentType(null),"setRequestHeader"in p&&d.forEach(r.toJSON(),function(E,L){p.setRequestHeader(L,E)}),d.isUndefined(s.withCredentials)||(p.withCredentials=!!s.withCredentials),i&&i!=="json"&&(p.responseType=s.responseType),l&&([b,m]=Et(l,!0),p.addEventListener("progress",b)),c&&p.upload&&([f,w]=Et(c),p.upload.addEventListener("progress",f),p.upload.addEventListener("loadend",w)),(s.cancelToken||s.signal)&&(u=h=>{p&&(o(!h||h.type?new Ae(null,e,p):h),p.abort(),p=null)},s.cancelToken&&s.cancelToken.subscribe(u),s.signal&&(s.signal.aborted?u():s.signal.addEventListener("abort",u)));const v=er(s.url);if(v&&F.protocols.indexOf(v)===-1){o(new x("Unsupported protocol "+v+":",x.ERR_BAD_REQUEST,e));return}p.send(a||null)})},lr=(e,t)=>{const{length:n}=e=e?e.filter(Boolean):[];if(t||n){let o=new AbortController,s;const a=function(l){if(!s){s=!0,i();const u=l instanceof Error?l:this.reason;o.abort(u instanceof x?u:new Ae(u instanceof Error?u.message:u))}};let r=t&&setTimeout(()=>{r=null,a(new x(`timeout ${t} of ms exceeded`,x.ETIMEDOUT))},t);const i=()=>{e&&(r&&clearTimeout(r),r=null,e.forEach(l=>{l.unsubscribe?l.unsubscribe(a):l.removeEventListener("abort",a)}),e=null)};e.forEach(l=>l.addEventListener("abort",a));const{signal:c}=o;return c.unsubscribe=()=>d.asap(i),c}},cr=function*(e,t){let n=e.byteLength;if(n<t){yield e;return}let o=0,s;for(;o<n;)s=o+t,yield e.slice(o,s),o=s},ur=async function*(e,t){for await(const n of mr(e))yield*cr(n,t)},mr=async function*(e){if(e[Symbol.asyncIterator]){yield*e;return}const t=e.getReader();try{for(;;){const{done:n,value:o}=await t.read();if(n)break;yield o}}finally{await t.cancel()}},no=(e,t,n,o)=>{const s=ur(e,t);let a=0,r,i=c=>{r||(r=!0,o&&o(c))};return new ReadableStream({async pull(c){try{const{done:l,value:u}=await s.next();if(l){i(),c.close();return}let f=u.byteLength;if(n){let b=a+=f;n(b)}c.enqueue(new Uint8Array(u))}catch(l){throw i(l),l}},cancel(c){return i(c),s.return()}},{highWaterMark:2})},oo=64*1024,{isFunction:st}=d,fr=(({Request:e,Response:t})=>({Request:e,Response:t}))(d.global),{ReadableStream:so,TextEncoder:ao}=d.global,ro=(e,...t)=>{try{return!!e(...t)}catch{return!1}},pr=e=>{e=d.merge.call({skipUndefined:!0},fr,e);const{fetch:t,Request:n,Response:o}=e,s=t?st(t):typeof fetch=="function",a=st(n),r=st(o);if(!s)return!1;const i=s&&st(so),c=s&&(typeof ao=="function"?(m=>y=>m.encode(y))(new ao):async m=>new Uint8Array(await new n(m).arrayBuffer())),l=a&&i&&ro(()=>{let m=!1;const y=new n(F.origin,{body:new so,method:"POST",get duplex(){return m=!0,"half"}}).headers.has("Content-Type");return m&&!y}),u=r&&i&&ro(()=>d.isReadableStream(new o("").body)),f={stream:u&&(m=>m.body)};s&&["text","arrayBuffer","blob","formData","stream"].forEach(m=>{!f[m]&&(f[m]=(y,p)=>{let g=y&&y[m];if(g)return g.call(y);throw new x(`Response type '${m}' is not supported`,x.ERR_NOT_SUPPORT,p)})});const b=async m=>{if(m==null)return 0;if(d.isBlob(m))return m.size;if(d.isSpecCompliantForm(m))return(await new n(F.origin,{method:"POST",body:m}).arrayBuffer()).byteLength;if(d.isArrayBufferView(m)||d.isArrayBuffer(m))return m.byteLength;if(d.isURLSearchParams(m)&&(m=m+""),d.isString(m))return(await c(m)).byteLength},w=async(m,y)=>{const p=d.toFiniteNumber(m.getContentLength());return p??b(y)};return async m=>{let{url:y,method:p,data:g,signal:v,cancelToken:h,timeout:E,onDownloadProgress:L,onUploadProgress:D,responseType:C,headers:Ut,withCredentials:tt="same-origin",fetchOptions:Hn}=es(m),Un=t||fetch;C=C?(C+"").toLowerCase():"text";let nt=lr([v,h&&h.toAbortSignal()],E),De=null;const oe=nt&&nt.unsubscribe&&(()=>{nt.unsubscribe()});let Vn;try{if(D&&l&&p!=="get"&&p!=="head"&&(Vn=await w(Ut,g))!==0){let Q=new n(y,{method:"POST",body:g,duplex:"half"}),ge;if(d.isFormData(g)&&(ge=Q.headers.get("content-type"))&&Ut.setContentType(ge),Q.body){const[Vt,ot]=Qn(Vn,Et(eo(D)));g=no(Q.body,oo,Vt,ot)}}d.isString(tt)||(tt=tt?"include":"omit");const U=a&&"credentials"in n.prototype,zn={...Hn,signal:nt,method:p.toUpperCase(),headers:Ut.normalize().toJSON(),body:g,duplex:"half",credentials:U?tt:void 0};De=a&&new n(y,zn);let Z=await(a?Un(De,Hn):Un(y,zn));const Jn=u&&(C==="stream"||C==="response");if(u&&(L||Jn&&oe)){const Q={};["status","statusText","headers"].forEach(Xn=>{Q[Xn]=Z[Xn]});const ge=d.toFiniteNumber(Z.headers.get("content-length")),[Vt,ot]=L&&Qn(ge,Et(eo(L),!0))||[];Z=new o(no(Z.body,oo,Vt,()=>{ot&&ot(),oe&&oe()}),Q)}C=C||"text";let Js=await f[d.findKey(f,C)||"text"](Z,m);return!Jn&&oe&&oe(),await new Promise((Q,ge)=>{Zo(Q,ge,{data:Js,headers:S.from(Z.headers),status:Z.status,statusText:Z.statusText,config:m,request:De})})}catch(U){throw oe&&oe(),U&&U.name==="TypeError"&&/Load failed|fetch/i.test(U.message)?Object.assign(new x("Network Error",x.ERR_NETWORK,m,De),{cause:U.cause||U}):x.from(U,U&&U.code,m,De)}}},gr=new Map,ts=e=>{let t=e&&e.env||{};const{fetch:n,Request:o,Response:s}=t,a=[o,s,n];let r=a.length,i=r,c,l,u=gr;for(;i--;)c=a[i],l=u.get(c),l===void 0&&u.set(c,l=i?new Map:pr(t)),u=l;return l};ts();const Ln={http:Aa,xhr:dr,fetch:{get:ts}};d.forEach(Ln,(e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch{}Object.defineProperty(e,"adapterName",{value:t})}});const io=e=>`- ${e}`,yr=e=>d.isFunction(e)||e===null||e===!1;function hr(e,t){e=d.isArray(e)?e:[e];const{length:n}=e;let o,s;const a={};for(let r=0;r<n;r++){o=e[r];let i;if(s=o,!yr(o)&&(s=Ln[(i=String(o)).toLowerCase()],s===void 0))throw new x(`Unknown adapter '${i}'`);if(s&&(d.isFunction(s)||(s=s.get(t))))break;a[i||"#"+r]=s}if(!s){const r=Object.entries(a).map(([c,l])=>`adapter ${c} `+(l===!1?"is not supported by the environment":"is not available in the build"));let i=n?r.length>1?`since :
`+r.map(io).join(`
`):" "+io(r[0]):"as no adapter specified";throw new x("There is no suitable adapter to dispatch the request "+i,"ERR_NOT_SUPPORT")}return s}const ns={getAdapter:hr,adapters:Ln};function Xt(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new Ae(null,e)}function lo(e){return Xt(e),e.headers=S.from(e.headers),e.data=Jt.call(e,e.transformRequest),["post","put","patch"].indexOf(e.method)!==-1&&e.headers.setContentType("application/x-www-form-urlencoded",!1),ns.getAdapter(e.adapter||Ze.adapter,e)(e).then(function(o){return Xt(e),o.data=Jt.call(e,e.transformResponse,o),o.headers=S.from(o.headers),o},function(o){return Go(o)||(Xt(e),o&&o.response&&(o.response.data=Jt.call(e,e.transformResponse,o.response),o.response.headers=S.from(o.response.headers))),Promise.reject(o)})}const os="1.13.2",Pt={};["object","boolean","number","function","string","symbol"].forEach((e,t)=>{Pt[e]=function(o){return typeof o===e||"a"+(t<1?"n ":" ")+e}});const co={};Pt.transitional=function(t,n,o){function s(a,r){return"[Axios v"+os+"] Transitional option '"+a+"'"+r+(o?". "+o:"")}return(a,r,i)=>{if(t===!1)throw new x(s(r," has been removed"+(n?" in "+n:"")),x.ERR_DEPRECATED);return n&&!co[r]&&(co[r]=!0,console.warn(s(r," has been deprecated since v"+n+" and will be removed in the near future"))),t?t(a,r,i):!0}};Pt.spelling=function(t){return(n,o)=>(console.warn(`${o} is likely a misspelling of ${t}`),!0)};function br(e,t,n){if(typeof e!="object")throw new x("options must be an object",x.ERR_BAD_OPTION_VALUE);const o=Object.keys(e);let s=o.length;for(;s-- >0;){const a=o[s],r=t[a];if(r){const i=e[a],c=i===void 0||r(i,a,e);if(c!==!0)throw new x("option "+a+" must be "+c,x.ERR_BAD_OPTION_VALUE);continue}if(n!==!0)throw new x("Unknown option "+a,x.ERR_BAD_OPTION)}}const pt={assertOptions:br,validators:Pt},V=pt.validators;let de=class{constructor(t){this.defaults=t||{},this.interceptors={request:new Gn,response:new Gn}}async request(t,n){try{return await this._request(t,n)}catch(o){if(o instanceof Error){let s={};Error.captureStackTrace?Error.captureStackTrace(s):s=new Error;const a=s.stack?s.stack.replace(/^.+\n/,""):"";try{o.stack?a&&!String(o.stack).endsWith(a.replace(/^.+\n.+\n/,""))&&(o.stack+=`
`+a):o.stack=a}catch{}}throw o}}_request(t,n){typeof t=="string"?(n=n||{},n.url=t):n=t||{},n=ue(this.defaults,n);const{transitional:o,paramsSerializer:s,headers:a}=n;o!==void 0&&pt.assertOptions(o,{silentJSONParsing:V.transitional(V.boolean),forcedJSONParsing:V.transitional(V.boolean),clarifyTimeoutError:V.transitional(V.boolean)},!1),s!=null&&(d.isFunction(s)?n.paramsSerializer={serialize:s}:pt.assertOptions(s,{encode:V.function,serialize:V.function},!0)),n.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?n.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:n.allowAbsoluteUrls=!0),pt.assertOptions(n,{baseUrl:V.spelling("baseURL"),withXsrfToken:V.spelling("withXSRFToken")},!0),n.method=(n.method||this.defaults.method||"get").toLowerCase();let r=a&&d.merge(a.common,a[n.method]);a&&d.forEach(["delete","get","head","post","put","patch","common"],m=>{delete a[m]}),n.headers=S.concat(r,a);const i=[];let c=!0;this.interceptors.request.forEach(function(y){typeof y.runWhen=="function"&&y.runWhen(n)===!1||(c=c&&y.synchronous,i.unshift(y.fulfilled,y.rejected))});const l=[];this.interceptors.response.forEach(function(y){l.push(y.fulfilled,y.rejected)});let u,f=0,b;if(!c){const m=[lo.bind(this),void 0];for(m.unshift(...i),m.push(...l),b=m.length,u=Promise.resolve(n);f<b;)u=u.then(m[f++],m[f++]);return u}b=i.length;let w=n;for(;f<b;){const m=i[f++],y=i[f++];try{w=m(w)}catch(p){y.call(this,p);break}}try{u=lo.call(this,w)}catch(m){return Promise.reject(m)}for(f=0,b=l.length;f<b;)u=u.then(l[f++],l[f++]);return u}getUri(t){t=ue(this.defaults,t);const n=Qo(t.baseURL,t.url,t.allowAbsoluteUrls);return Wo(n,t.params,t.paramsSerializer)}};d.forEach(["delete","get","head","options"],function(t){de.prototype[t]=function(n,o){return this.request(ue(o||{},{method:t,url:n,data:(o||{}).data}))}});d.forEach(["post","put","patch"],function(t){function n(o){return function(a,r,i){return this.request(ue(i||{},{method:t,headers:o?{"Content-Type":"multipart/form-data"}:{},url:a,data:r}))}}de.prototype[t]=n(),de.prototype[t+"Form"]=n(!0)});let vr=class ss{constructor(t){if(typeof t!="function")throw new TypeError("executor must be a function.");let n;this.promise=new Promise(function(a){n=a});const o=this;this.promise.then(s=>{if(!o._listeners)return;let a=o._listeners.length;for(;a-- >0;)o._listeners[a](s);o._listeners=null}),this.promise.then=s=>{let a;const r=new Promise(i=>{o.subscribe(i),a=i}).then(s);return r.cancel=function(){o.unsubscribe(a)},r},t(function(a,r,i){o.reason||(o.reason=new Ae(a,r,i),n(o.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(t){if(this.reason){t(this.reason);return}this._listeners?this._listeners.push(t):this._listeners=[t]}unsubscribe(t){if(!this._listeners)return;const n=this._listeners.indexOf(t);n!==-1&&this._listeners.splice(n,1)}toAbortSignal(){const t=new AbortController,n=o=>{t.abort(o)};return this.subscribe(n),t.signal.unsubscribe=()=>this.unsubscribe(n),t.signal}static source(){let t;return{token:new ss(function(s){t=s}),cancel:t}}};function xr(e){return function(n){return e.apply(null,n)}}function wr(e){return d.isObject(e)&&e.isAxiosError===!0}const un={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511,WebServerIsDown:521,ConnectionTimedOut:522,OriginIsUnreachable:523,TimeoutOccurred:524,SslHandshakeFailed:525,InvalidSslCertificate:526};Object.entries(un).forEach(([e,t])=>{un[t]=e});function as(e){const t=new de(e),n=No(de.prototype.request,t);return d.extend(n,de.prototype,t,{allOwnKeys:!0}),d.extend(n,t,null,{allOwnKeys:!0}),n.create=function(s){return as(ue(e,s))},n}const B=as(Ze);B.Axios=de;B.CanceledError=Ae;B.CancelToken=vr;B.isCancel=Go;B.VERSION=os;B.toFormData=Nt;B.AxiosError=x;B.Cancel=B.CanceledError;B.all=function(t){return Promise.all(t)};B.spread=xr;B.isAxiosError=wr;B.mergeConfig=ue;B.AxiosHeaders=S;B.formToJSON=e=>Yo(d.isHTMLForm(e)?new FormData(e):e);B.getAdapter=ns.getAdapter;B.HttpStatusCode=un;B.default=B;const{Axios:il,AxiosError:dl,CanceledError:ll,isCancel:cl,CancelToken:ul,VERSION:ml,all:fl,Cancel:pl,isAxiosError:gl,spread:yl,toFormData:hl,AxiosHeaders:bl,HttpStatusCode:vl,formToJSON:xl,getAdapter:wl,mergeConfig:El}=B;window.axios=B;window.axios.defaults.headers.common["X-Requested-With"]="XMLHttpRequest";const _="/admin/api";let M=null,mn=window.laravelData?.roles||[],me=window.laravelData?.departements||[],Qe=window.laravelData?.users||[];document.addEventListener("DOMContentLoaded",function(){console.log("üöÄ Initialisation de la page Administration..."),zr(),Hr(),Or(),_r(),Er(),console.log("‚úÖ Page Administration initialis√©e avec succ√®s"),console.log("üìã R√¥les disponibles:",mn),console.log("üìã D√©partements disponibles:",me),console.log("üìã Utilisateurs disponibles:",Qe)});async function Er(){try{ne(),await Promise.all([kr(),Lr()]),T()}catch(e){console.error("Erreur chargement donn√©es:",e),T(),ze("Erreur","Erreur lors du chargement des donn√©es","error")}}async function kr(){try{const e=await fetch(`${_}/users`,{headers:{Accept:"application/json","X-Requested-With":"XMLHttpRequest","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]')?.content}});if(!e.ok)throw new Error("Erreur r√©seau");const t=await e.json();t.success&&(Qe=t.users,Br(),Fr())}catch(e){throw console.error("Erreur chargement utilisateurs:",e),e}}async function Lr(){try{const e=await fetch(`${_}/departements`,{headers:{Accept:"application/json","X-Requested-With":"XMLHttpRequest","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]')?.content}});if(!e.ok)throw new Error("Erreur r√©seau");const t=await e.json();t.success&&(me=t.departements,Tr(),is())}catch(e){throw console.error("Erreur chargement d√©partements:",e),e}}function Br(){const e=document.querySelector("#employes-tab tbody");if(!e)return;const t=Qe.filter(n=>{const o=n.role?.nom_role?.toLowerCase()||"";return o.includes("employe")||o.includes("employ√©")});e.innerHTML=t.length>0?t.map(n=>`
        <tr data-user-id="${n.id_user}">
            <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white">
                ${n.matricule||"N/A"}
            </td>
            <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white">
                ${n.prenom} ${n.nom}
            </td>
            <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400">
                ${n.email}
            </td>
            <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white">
                ${n.departement?.nom_departement||"Non assign√©"}
            </td>
            <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white">
                ${n.profession||"N/A"}
            </td>
            <td class="px-6 py-4 whitespace-nowrap">
                <span class="px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${n.actif?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}">
                    ${n.actif?"Actif":"Inactif"}
                </span>
            </td>
            <td class="px-6 py-4 whitespace-nowrap text-sm font-medium">
                <button onclick="viewUser(${n.id_user})" title="Voir d√©tails" class="text-indigo-600 hover:text-indigo-900 dark:text-indigo-400 dark:hover:text-indigo-300 mr-3">
                    <i class="fas fa-eye"></i>
                </button>
                <button onclick="editUser(${n.id_user})" title="Modifier" class="text-indigo-600 hover:text-indigo-900 dark:text-indigo-400 dark:hover:text-indigo-300 mr-3">
                    <i class="fas fa-edit"></i>
                </button>
                <button onclick="toggleBlockUser(${n.id_user}, ${n.actif})" title="${n.actif?"Bloquer":"D√©bloquer"}" class="mr-3">
                    <i class="fas fa-${n.actif?"lock":"unlock"}" style="color: ${n.actif?"#10B981":"#EF4444"}"></i>
                </button>
                <button onclick="deleteUser(${n.id_user})" title="Supprimer" class="text-gray-600 hover:text-gray-900 dark:text-gray-400 dark:hover:text-gray-300">
                    <i class="fas fa-trash"></i>
                </button>
            </td>
        </tr>
    `).join(""):'<tr><td colspan="7" class="px-6 py-4 text-center text-gray-500 dark:text-gray-400">Aucun employ√© trouv√©</td></tr>'}function Fr(){const e=document.querySelector("#chefs-tab tbody");if(!e)return;const t=Qe.filter(n=>{const o=n.role?.nom_role?.toLowerCase()||"";return o.includes("chef")||o.includes("manager")});e.innerHTML=t.length>0?t.map(n=>`
        <tr data-user-id="${n.id_user}">
            <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white">
                ${n.matricule||"N/A"}
            </td>
            <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white">
                ${n.prenom} ${n.nom}
            </td>
            <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400">
                ${n.email}
            </td>
            <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white">
                ${n.departement?.nom_departement||"Non assign√©"}
            </td>
            <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white">
                ${n.date_embauche?new Date(n.date_embauche).toLocaleDateString("fr-FR"):"N/A"}
            </td>
            <td class="px-6 py-4 whitespace-nowrap">
                <span class="px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${n.actif?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}">
                    ${n.actif?"Actif":"Inactif"}
                </span>
            </td>
            <td class="px-6 py-4 whitespace-nowrap text-sm font-medium">
                <button onclick="viewUser(${n.id_user})" title="Voir d√©tails" class="text-indigo-600 hover:text-indigo-900 dark:text-indigo-400 dark:hover:text-indigo-300 mr-3">
                    <i class="fas fa-eye"></i>
                </button>
                <button onclick="editUser(${n.id_user})" title="Modifier" class="text-indigo-600 hover:text-indigo-900 dark:text-indigo-400 dark:hover:text-indigo-300 mr-3">
                    <i class="fas fa-edit"></i>
                </button>
                <button onclick="toggleBlockUser(${n.id_user}, ${n.actif})" title="${n.actif?"Bloquer":"D√©bloquer"}" class="mr-3">
                    <i class="fas fa-${n.actif?"lock":"unlock"}" style="color: ${n.actif?"#10B981":"#EF4444"}"></i>
                </button>
                <button onclick="deleteUser(${n.id_user})" title="Supprimer" class="text-gray-600 hover:text-gray-900 dark:text-gray-400 dark:hover:text-gray-300">
                    <i class="fas fa-trash"></i>
                </button>
            </td>
        </tr>
    `).join(""):'<tr><td colspan="7" class="px-6 py-4 text-center text-gray-500 dark:text-gray-400">Aucun chef de d√©partement trouv√©</td></tr>'}function Tr(){const e=document.querySelector("#departements-tab tbody");e&&(e.innerHTML=me.length>0?me.map(t=>`
        <tr data-dept-id="${t.id_departement}">
            <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white">
                DEP${String(t.id_departement).padStart(3,"0")}
            </td>
            <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white">
                ${t.nom_departement}
            </td>
            <td class="px-6 py-4 text-sm text-gray-500 dark:text-gray-400">
                ${t.description||"Aucune description"}
            </td>
            <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white">
                ${t.chef_departement?`${t.chef_departement.prenom} ${t.chef_departement.nom}`:"Non assign√©"}
            </td>
            <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white">
                ${t.employes_count||0}
            </td>
            <td class="px-6 py-4 whitespace-nowrap text-sm font-medium">
                <button onclick="viewDepartement(${t.id_departement})" title="Voir d√©tails" class="text-indigo-600 hover:text-indigo-900 dark:text-indigo-400 dark:hover:text-indigo-300 mr-3">
                    <i class="fas fa-eye"></i>
                </button>
                <button onclick="editDepartement(${t.id_departement})" title="Modifier" class="text-indigo-600 hover:text-indigo-900 dark:text-indigo-400 dark:hover:text-indigo-300 mr-3">
                    <i class="fas fa-edit"></i>
                </button>
                <button onclick="deleteDepartement(${t.id_departement})" title="Supprimer" class="text-gray-600 hover:text-gray-900 dark:text-gray-400 dark:hover:text-gray-300">
                    <i class="fas fa-trash"></i>
                </button>
            </td>
        </tr>
    `).join(""):'<tr><td colspan="6" class="px-6 py-4 text-center text-gray-500 dark:text-gray-400">Aucun d√©partement trouv√©</td></tr>')}async function $r(e){try{ne();const n=await(await fetch(`${_}/users/${e}`,{headers:{Accept:"application/json","X-Requested-With":"XMLHttpRequest","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]')?.content}})).json();T(),n.success?Cr(n.user):ze("Erreur",n.message||"Impossible de charger les d√©tails","error")}catch(t){T(),console.error("Erreur:",t),ze("Erreur","Une erreur est survenue","error")}}function Cr(e){const t=`
        <div class="space-y-4 text-left">
            <div class="text-gray-900 dark:text-white"><strong>Matricule:</strong> ${e.matricule||"N/A"}</div>
            <div class="text-gray-900 dark:text-white"><strong>Nom complet:</strong> ${e.prenom} ${e.nom}</div>
            <div class="text-gray-900 dark:text-white"><strong>Email:</strong> ${e.email}</div>
            <div class="text-gray-900 dark:text-white"><strong>T√©l√©phone:</strong> ${e.telephone||"N/A"}</div>
            <div class="text-gray-900 dark:text-white"><strong>D√©partement:</strong> ${e.departement?.nom_departement||"Non assign√©"}</div>
            <div class="text-gray-900 dark:text-white"><strong>Poste:</strong> ${e.profession||"N/A"}</div>
            <div class="text-gray-900 dark:text-white"><strong>R√¥le:</strong> ${e.role?.nom_role||"N/A"}</div>
            <div class="text-gray-900 dark:text-white"><strong>Date d'embauche:</strong> ${e.date_embauche?new Date(e.date_embauche).toLocaleDateString("fr-FR"):"N/A"}</div>
            <div class="text-gray-900 dark:text-white"><strong>Solde cong√©s:</strong> ${e.solde_conges_annuel||0} jours</div>
            <div class="text-gray-900 dark:text-white"><strong>Statut:</strong> <span class="px-2 py-1 rounded text-xs ${e.actif?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}">${e.actif?"Actif":"Inactif"}</span></div>
        </div>
    `;ls("D√©tails de l'utilisateur",t)}async function Ir(e){try{ne();const n=await(await fetch(`${_}/users/${e}`,{headers:{Accept:"application/json","X-Requested-With":"XMLHttpRequest","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]')?.content}})).json();if(T(),n.success){M=e;const o=n.user,s=o.role?.nom_role?.toLowerCase().includes("chef");Dr(s?"chef":"employe",o)}else ze("Erreur",n.message||"Impossible de charger les donn√©es","error")}catch(t){T(),console.error("Erreur:",t),ze("Erreur","Une erreur est survenue","error")}}async function Sr(e,t){const n=t?"bloquer":"d√©bloquer",o=t?"Bloquer":"D√©bloquer";if((await Swal.fire({title:`${o} cet utilisateur ?`,text:`Voulez-vous vraiment ${n} cet utilisateur ?`,icon:"warning",showCancelButton:!0,confirmButtonColor:t?"#EF4444":"#10B981",cancelButtonColor:"#6B7280",confirmButtonText:`Oui, ${n}`,cancelButtonText:"Annuler",background:document.documentElement.classList.contains("dark")?"#1F2937":"#FFFFFF",color:document.documentElement.classList.contains("dark")?"#FFFFFF":"#000000"})).isConfirmed)try{ne();const i=await(await fetch(`${_}/users/${e}/${t?"block":"unblock"}`,{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json","X-Requested-With":"XMLHttpRequest","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]')?.content}})).json();T(),i.success?Swal.fire({title:"Succ√®s !",text:i.message,icon:"success",showConfirmButton:!1,timer:2e3,background:document.documentElement.classList.contains("dark")?"#1F2937":"#FFFFFF",color:document.documentElement.classList.contains("dark")?"#FFFFFF":"#000000"}).then(()=>{window.location.reload()}):await Swal.fire({title:"Erreur !",text:i.message||"Une erreur est survenue",icon:"error",confirmButtonText:"D'accord",confirmButtonColor:"#EF4444",background:document.documentElement.classList.contains("dark")?"#1F2937":"#FFFFFF",color:document.documentElement.classList.contains("dark")?"#FFFFFF":"#000000"})}catch(a){T(),console.error("Erreur:",a),await Swal.fire({title:"Erreur !",text:"Une erreur est survenue",icon:"error",confirmButtonText:"D'accord",confirmButtonColor:"#EF4444",background:document.documentElement.classList.contains("dark")?"#1F2937":"#FFFFFF",color:document.documentElement.classList.contains("dark")?"#FFFFFF":"#000000"})}}async function Ar(e){if((await Swal.fire({title:"Supprimer cet utilisateur ?",text:"‚ö†Ô∏è Cette action est irr√©versible !",icon:"warning",showCancelButton:!0,confirmButtonColor:"#EF4444",cancelButtonColor:"#6B7280",confirmButtonText:"Oui, supprimer",cancelButtonText:"Annuler",background:document.documentElement.classList.contains("dark")?"#1F2937":"#FFFFFF",color:document.documentElement.classList.contains("dark")?"#FFFFFF":"#000000"})).isConfirmed)try{ne();const o=await(await fetch(`${_}/users/${e}`,{method:"DELETE",headers:{Accept:"application/json","X-Requested-With":"XMLHttpRequest","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]')?.content}})).json();T(),o.success?Swal.fire({title:"Supprim√© !",text:o.message,icon:"success",showConfirmButton:!1,timer:2e3,background:document.documentElement.classList.contains("dark")?"#1F2937":"#FFFFFF",color:document.documentElement.classList.contains("dark")?"#FFFFFF":"#000000"}).then(()=>{window.location.reload()}):await Swal.fire({title:"Erreur !",text:o.message||"Impossible de supprimer l'utilisateur",icon:"error",confirmButtonText:"D'accord",confirmButtonColor:"#EF4444",background:document.documentElement.classList.contains("dark")?"#1F2937":"#FFFFFF",color:document.documentElement.classList.contains("dark")?"#FFFFFF":"#000000"})}catch(n){T(),console.error("Erreur:",n),await Swal.fire({title:"Erreur !",text:"Une erreur est survenue",icon:"error",confirmButtonText:"D'accord",confirmButtonColor:"#EF4444",background:document.documentElement.classList.contains("dark")?"#1F2937":"#FFFFFF",color:document.documentElement.classList.contains("dark")?"#FFFFFF":"#000000"})}}function Wt(e){const t=document.getElementById(`${e}-modal`),n=document.getElementById(`${e}-modal-title`),o=document.getElementById(`${e}-form`);if(!t||!n||!o){console.error(`‚ùå Modal ${e} non trouv√©`);return}n.textContent=`Ajouter un${e==="employe"?" ":e==="chef"?" chef de ":" "}${cs(e)}`,o.reset(),M=null;const s=document.getElementById(`${e}-matricule`);s&&(s.value="AUTO",s.closest("div").style.display="none"),rs(e),kt(e),t.classList.remove("hidden"),setTimeout(()=>{const a=t.querySelector(".modal");a&&a.classList.add("open")},10)}function Dr(e,t){const n=document.getElementById(`${e}-modal`),o=document.getElementById(`${e}-modal-title`);if(!n||!o){console.error(`‚ùå Modal ${e} non trouv√©`);return}o.textContent=`Modifier ${cs(e)}`;const s=document.getElementById(`${e}-matricule`);s&&(s.value=t.matricule||"",s.closest("div").style.display="block"),document.getElementById(`${e}-nom`).value=t.nom||"",document.getElementById(`${e}-prenom`).value=t.prenom||"",document.getElementById(`${e}-contact`).value=t.telephone||"",document.getElementById(`${e}-email`).value=t.email||"",document.getElementById(`${e}-poste`).value=t.profession||"",e==="chef"&&(document.getElementById(`${e}-date-nomination`).value=t.date_embauche||""),rs(e,t.role_id),kt(e,t.departement_id),n.classList.remove("hidden"),setTimeout(()=>{const a=n.querySelector(".modal");a&&a.classList.add("open")},10)}function rs(e,t=null){const n=document.getElementById(`${e}-role`);if(!n){console.error(`‚ùå Select ${e}-role introuvable`);return}const o=e==="employe"?mn.filter(s=>{const a=s.nom_role.toLowerCase();return a.includes("employe")||a.includes("employ√©")}):mn.filter(s=>{const a=s.nom_role.toLowerCase();return a.includes("chef")||a.includes("manager")});if(o.length===0){console.warn("‚ö†Ô∏è Aucun r√¥le trouv√© pour le type:",e),n.innerHTML='<option value="">Aucun r√¥le disponible</option>';return}n.innerHTML=o.map(s=>`<option value="${s.id_role}" ${t==s.id_role?"selected":""}>${s.nom_role}</option>`).join(""),!t&&o.length>0&&(n.value=o[0].id_role)}function kt(e,t=null){const n=document.getElementById(`${e}-departement`);n&&(n.innerHTML='<option value="">S√©lectionner un d√©partement</option>'+me.map(o=>`<option value="${o.id_departement}" ${t==o.id_departement?"selected":""}>${o.nom_departement}</option>`).join(""))}function is(){kt("employe"),kt("chef");const e=document.getElementById("departement-chef");if(e){const t=Qe.filter(n=>{const o=n.role?.nom_role?.toLowerCase()||"";return o.includes("chef")||o.includes("manager")});e.innerHTML='<option value="">S√©lectionner un chef</option>'+t.map(n=>`<option value="${n.id_user}">${n.prenom} ${n.nom}</option>`).join("")}}async function Mr(e){e.preventDefault(),await ds("employe")}async function Rr(e){e.preventDefault(),await ds("chef")}async function ds(e){const t={nom:document.getElementById(`${e}-nom`).value,prenom:document.getElementById(`${e}-prenom`).value,email:document.getElementById(`${e}-email`).value,telephone:document.getElementById(`${e}-contact`).value,profession:document.getElementById(`${e}-poste`).value,role_id:document.getElementById(`${e}-role`).value,departement_id:document.getElementById(`${e}-departement`).value||null,date_embauche:e==="chef"?document.getElementById(`${e}-date-nomination`).value:new Date().toISOString().split("T")[0],solde_conges_annuel:30};if(M){const n=document.getElementById(`${e}-matricule`);n&&n.value&&(t.matricule=n.value)}console.log("üì§ Donn√©es envoy√©es:",t);try{ne();const n=M?`${_}/users/${M}`:`${_}/users`,a=await(await fetch(n,{method:M?"PUT":"POST",headers:{Accept:"application/json","Content-Type":"application/json","X-Requested-With":"XMLHttpRequest","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]')?.content},body:JSON.stringify(t)})).json();if(console.log("üì• R√©ponse re√ßue:",a),T(),a.success)Bn(`${e}-modal`),Swal.fire({title:"Succ√®s !",text:a.message,icon:"success",showConfirmButton:!1,timer:2e3,background:document.documentElement.classList.contains("dark")?"#1F2937":"#FFFFFF",color:document.documentElement.classList.contains("dark")?"#FFFFFF":"#000000"}).then(()=>{window.location.reload()});else if(a.errors){const r=Object.values(a.errors).flat().join("<br>");await Swal.fire({title:"Erreur de validation",html:r,icon:"error",confirmButtonText:"D'accord",confirmButtonColor:"#EF4444",background:document.documentElement.classList.contains("dark")?"#1F2937":"#FFFFFF",color:document.documentElement.classList.contains("dark")?"#FFFFFF":"#000000"})}else await Swal.fire({title:"Erreur !",text:a.message||"Une erreur est survenue",icon:"error",confirmButtonText:"D'accord",confirmButtonColor:"#EF4444",background:document.documentElement.classList.contains("dark")?"#1F2937":"#FFFFFF",color:document.documentElement.classList.contains("dark")?"#FFFFFF":"#000000"})}catch(n){T(),console.error("‚ùå Erreur:",n),await Swal.fire({title:"Erreur !",text:"Une erreur est survenue",icon:"error",confirmButtonText:"D'accord",confirmButtonColor:"#EF4444",background:document.documentElement.classList.contains("dark")?"#1F2937":"#FFFFFF",color:document.documentElement.classList.contains("dark")?"#FFFFFF":"#000000"})}}async function Nr(e){e.preventDefault();const t={nom_departement:document.getElementById("departement-nom").value,description:document.getElementById("departement-description").value,chef_departement_id:document.getElementById("departement-chef").value||null};console.log("üì§ Donn√©es d√©partement envoy√©es:",t),console.log("üîß Mode:",M?"Modification":"Cr√©ation");try{ne();const n=M?`${_}/departements/${M}`:`${_}/departements`;let o={headers:{Accept:"application/json","Content-Type":"application/json","X-Requested-With":"XMLHttpRequest","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]')?.content}};M?(o.method="POST",t._method="PUT",o.body=JSON.stringify(t)):(o.method="POST",o.body=JSON.stringify(t)),console.log("üåê Requ√™te envoy√©e:",n,o);const a=await(await fetch(n,o)).json();console.log("üì• R√©ponse re√ßue:",a),T(),a.success?(Bn("departement-modal"),Swal.fire({title:"Succ√®s !",text:a.message,icon:"success",showConfirmButton:!1,timer:2e3,background:document.documentElement.classList.contains("dark")?"#1F2937":"#FFFFFF",color:document.documentElement.classList.contains("dark")?"#FFFFFF":"#000000"}).then(()=>{window.location.reload()})):await Swal.fire({title:"Erreur !",text:a.message||"Une erreur est survenue",icon:"error",confirmButtonText:"D'accord",confirmButtonColor:"#EF4444",background:document.documentElement.classList.contains("dark")?"#1F2937":"#FFFFFF",color:document.documentElement.classList.contains("dark")?"#FFFFFF":"#000000"})}catch(n){T(),console.error("‚ùå Erreur:",n),await Swal.fire({title:"Erreur !",text:"Une erreur est survenue : "+n.message,icon:"error",confirmButtonText:"D'accord",confirmButtonColor:"#EF4444",background:document.documentElement.classList.contains("dark")?"#1F2937":"#FFFFFF",color:document.documentElement.classList.contains("dark")?"#FFFFFF":"#000000"})}}async function Pr(e){const t=me.find(o=>o.id_departement==e);if(!t)return;const n=`
        <div class="space-y-4 text-left">
            <div class="text-gray-900 dark:text-white"><strong>Nom:</strong> ${t.nom_departement}</div>
            <div class="text-gray-900 dark:text-white"><strong>Description:</strong> ${t.description||"Aucune description"}</div>
            <div class="text-gray-900 dark:text-white"><strong>Chef de d√©partement:</strong> ${t.chef_departement?`${t.chef_departement.prenom} ${t.chef_departement.nom}`:"Non assign√©"}</div>
            <div class="text-gray-900 dark:text-white"><strong>Nombre d'employ√©s:</strong> ${t.employes_count||0}</div>
        </div>
    `;ls("D√©tails du d√©partement",n)}async function jr(e){const t=me.find(s=>s.id_departement==e);if(!t)return;M=e;const n=document.getElementById("departement-modal"),o=document.getElementById("departement-modal-title");!n||!o||(o.textContent="Modifier le d√©partement",document.getElementById("departement-nom").value=t.nom_departement||"",document.getElementById("departement-description").value=t.description||"",is(),document.getElementById("departement-chef").value=t.chef_departement_id||"",n.classList.remove("hidden"),setTimeout(()=>{const s=n.querySelector(".modal");s&&s.classList.add("open")},10))}async function qr(e){if((await Swal.fire({title:"Supprimer ce d√©partement ?",text:"‚ö†Ô∏è Cette action est irr√©versible !",icon:"warning",showCancelButton:!0,confirmButtonColor:"#EF4444",cancelButtonColor:"#6B7280",confirmButtonText:"Oui, supprimer",cancelButtonText:"Annuler",background:document.documentElement.classList.contains("dark")?"#1F2937":"#FFFFFF",color:document.documentElement.classList.contains("dark")?"#FFFFFF":"#000000"})).isConfirmed)try{ne();const o=await(await fetch(`${_}/departements/${e}`,{method:"DELETE",headers:{Accept:"application/json","X-Requested-With":"XMLHttpRequest","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]')?.content}})).json();T(),o.success?Swal.fire({title:"Supprim√© !",text:o.message,icon:"success",showConfirmButton:!1,timer:2e3,background:document.documentElement.classList.contains("dark")?"#1F2937":"#FFFFFF",color:document.documentElement.classList.contains("dark")?"#FFFFFF":"#000000"}).then(()=>{window.location.reload()}):await Swal.fire({title:"Erreur !",text:o.message||"Impossible de supprimer le d√©partement",icon:"error",confirmButtonText:"D'accord",confirmButtonColor:"#EF4444",background:document.documentElement.classList.contains("dark")?"#1F2937":"#FFFFFF",color:document.documentElement.classList.contains("dark")?"#FFFFFF":"#000000"})}catch(n){T(),console.error("Erreur:",n),await Swal.fire({title:"Erreur !",text:"Une erreur est survenue",icon:"error",confirmButtonText:"D'accord",confirmButtonColor:"#EF4444",background:document.documentElement.classList.contains("dark")?"#1F2937":"#FFFFFF",color:document.documentElement.classList.contains("dark")?"#FFFFFF":"#000000"})}}function Or(){function e(n){document.querySelectorAll(".tab-pane").forEach(i=>{i.classList.add("hidden"),i.classList.remove("active")}),document.querySelectorAll(".tab-button").forEach(i=>{i.classList.remove("active","bg-gradient-to-r","from-blue-500","to-purple-500","text-white"),i.classList.add("bg-gray-200","dark:bg-gray-700","text-gray-700","dark:text-gray-300")});const a=document.getElementById(n+"-tab");a&&(a.classList.remove("hidden"),a.classList.add("active"));const r=document.querySelector(`[data-tab="${n}"]`);r&&(r.classList.add("active","bg-gradient-to-r","from-blue-500","to-purple-500","text-white"),r.classList.remove("bg-gray-200","dark:bg-gray-700","text-gray-700","dark:text-gray-300")),console.log(`üìÑ Onglet affich√©: ${n}`)}document.querySelectorAll(".tab-button").forEach(n=>{n.addEventListener("click",function(){const o=this.getAttribute("data-tab");e(o)})}),setTimeout(()=>e("employes"),0)}function _r(){const e=document.getElementById("toggle-sidebar"),t=document.getElementById("close-sidebar"),n=document.getElementById("sidebar-overlay");e&&e.addEventListener("click",Kt),t&&t.addEventListener("click",Kt),n&&n.addEventListener("click",Kt);const o=document.getElementById("theme-toggle");o&&o.addEventListener("click",Ur);const s=document.getElementById("add-employe-btn"),a=document.getElementById("add-chef-btn"),r=document.getElementById("add-departement-btn");s&&s.addEventListener("click",()=>Wt("employe")),a&&a.addEventListener("click",()=>Wt("chef")),r&&r.addEventListener("click",()=>Wt("departement"));const i=document.getElementById("employe-form"),c=document.getElementById("chef-form"),l=document.getElementById("departement-form");i&&i.addEventListener("submit",Mr),c&&c.addEventListener("submit",Rr),l&&l.addEventListener("submit",Nr)}function Kt(){const e=document.getElementById("sidebar"),t=document.getElementById("sidebar-overlay");e&&e.classList.toggle("open"),t&&t.classList.toggle("open")}function Hr(){(localStorage.getItem("theme")||"light")==="dark"&&document.documentElement.classList.add("dark")}function Ur(){document.documentElement.classList.toggle("dark");const e=document.documentElement.classList.contains("dark");localStorage.setItem("theme",e?"dark":"light")}function Bn(e){const t=document.getElementById(e);if(!t)return;const n=t.querySelector(".modal");n&&n.classList.remove("open"),setTimeout(()=>{t.classList.add("hidden"),M=null},300)}function ls(e,t){const n=`
        <div id="info-modal" class="fixed inset-0 z-50">
            <div class="backdrop absolute inset-0 bg-black bg-opacity-50" onclick="closeInfoModal()"></div>
            <div class="modal relative z-10 flex items-center justify-center min-h-screen p-4">
                <div class="bg-white dark:bg-gray-800 rounded-2xl shadow-xl max-w-md w-full">
                    <div class="p-6 border-b border-gray-200 dark:border-gray-700">
                        <h3 class="text-xl font-semibold text-gray-900 dark:text-white">${e}</h3>
                    </div>
                    <div class="p-6 text-gray-900 dark:text-white">
                        ${t}
                    </div>
                    <div class="p-6 border-t border-gray-200 dark:border-gray-700">
                        <button onclick="closeInfoModal()"
                            class="w-full px-4 py-2 bg-gradient-to-r from-blue-500 to-purple-500 hover:from-blue-600 hover:to-purple-600 text-white rounded-lg transition-colors">
                            Fermer
                        </button>
                    </div>
                </div>
            </div>
        </div>
    `,o=document.getElementById("info-modal");o&&o.remove(),document.body.insertAdjacentHTML("beforeend",n),setTimeout(()=>{const s=document.getElementById("info-modal");s&&s.querySelector(".modal")?.classList.add("open")},10)}function Vr(){const e=document.getElementById("info-modal");e&&(e.querySelector(".modal")?.classList.remove("open"),setTimeout(()=>e.remove(),300))}function zr(){const e=document.getElementById("current-date");if(e){const t=new Date,n={weekday:"long",year:"numeric",month:"long",day:"numeric"};e.textContent=t.toLocaleDateString("fr-FR",n)}}function cs(e){switch(e){case"employe":return"Employ√©";case"chef":return"Chef de D√©partement";case"departement":return"D√©partement";default:return""}}function ne(){let e=document.getElementById("global-loader");e||(e=document.createElement("div"),e.id="global-loader",e.innerHTML=`
            <div class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-[9999]">
                <div class="bg-white dark:bg-gray-800 rounded-lg p-6 shadow-xl">
                    <div class="flex items-center space-x-3">
                        <div class="animate-spin rounded-full h-8 w-8 border-b-2 border-blue-500"></div>
                        <span class="text-gray-900 dark:text-white font-medium">Chargement...</span>
                    </div>
                </div>
            </div>
        `,document.body.appendChild(e)),e.style.display="block"}function T(){const e=document.getElementById("global-loader");e&&(e.style.display="none")}function ze(e,t,n="success"){let o=document.getElementById("dynamic-toast-container");o||(o=document.createElement("div"),o.id="dynamic-toast-container",o.style.cssText="position: fixed; top: 20px; right: 20px; z-index: 9999;",document.body.appendChild(o));const s={success:{bg:"#10B981",icon:"fa-check-circle"},error:{bg:"#EF4444",icon:"fa-times-circle"},warning:{bg:"#F59E0B",icon:"fa-exclamation-triangle"},info:{bg:"#3B82F6",icon:"fa-info-circle"}},a=s[n]||s.success,r="toast-"+Date.now(),i=document.createElement("div");i.id=r,i.style.cssText=`
        background: white;
        border-left: 4px solid ${a.bg};
        border-radius: 8px;
        box-shadow: 0 4px 12px rgba(0,0,0,0.15);
        padding: 16px;
        margin-bottom: 10px;
        min-width: 320px;
        display: flex;
        align-items: center;
        gap: 12px;
        transform: translateX(400px);
        transition: transform 0.3s ease;
    `,i.innerHTML=`
        <div style="width: 32px; height: 32px; background: ${a.bg}20; border-radius: 50%; display: flex; align-items: center; justify-content: center;">
            <i class="fas ${a.icon}" style="color: ${a.bg};"></i>
        </div>
        <div style="flex: 1;">
            <div style="font-weight: 600; color: #111; margin-bottom: 4px;">${e}</div>
            <div style="font-size: 14px; color: #666;">${t}</div>
        </div>
        <button onclick="this.parentElement.remove()" style="background: none; border: none; color: #999; cursor: pointer; font-size: 18px; padding: 0; width: 24px; height: 24px;">
            <i class="fas fa-times"></i>
        </button>
    `,o.appendChild(i),setTimeout(()=>i.style.transform="translateX(0)",10),setTimeout(()=>{i.style.transform="translateX(400px)",setTimeout(()=>i.remove(),300)},4e3)}window.viewUser=$r;window.editUser=Ir;window.deleteUser=Ar;window.toggleBlockUser=Sr;window.viewDepartement=Pr;window.editDepartement=jr;window.deleteDepartement=qr;window.closeModal=Bn;window.closeInfoModal=Vr;tailwind.config={darkMode:"class",theme:{extend:{fontFamily:{poppins:["Poppins","sans-serif"]},animation:{"fade-in":"fadeIn 0.8s cubic-bezier(0.4, 0, 0.2, 1)","slide-up":"slideUp 0.8s cubic-bezier(0.4, 0, 0.2, 1)","slide-right":"slideRight 0.6s cubic-bezier(0.4, 0, 0.2, 1)","bounce-subtle":"bounceSubtle 1.2s ease-out","pulse-ring":"pulseRing 2s cubic-bezier(0.455, 0.03, 0.515, 0.955) infinite",float:"float 6s ease-in-out infinite",glow:"glow 2s ease-in-out infinite alternate",shimmer:"shimmer 2s linear infinite"},backgroundImage:{"gradient-radial":"radial-gradient(var(--tw-gradient-stops))","gradient-conic":"conic-gradient(from 180deg at 50% 50%, var(--tw-gradient-stops))"}}}}(function(){const e=document.querySelector('meta[name="csrf-token"]');if(e){const t=e.getAttribute("content");typeof axios<"u"&&(axios.defaults.headers.common["X-CSRF-TOKEN"]=t),typeof $<"u"&&$.ajaxSetup({headers:{"X-CSRF-TOKEN":t}}),window.csrfToken=t;const n=window.fetch;window.fetch=function(o,s={}){s.headers||(s.headers={});const a=(s.method||"GET").toUpperCase();return["POST","PUT","DELETE","PATCH"].includes(a)&&(s.headers["X-CSRF-TOKEN"]=t),n(o,s)}}else console.warn('‚ö†Ô∏è Meta tag CSRF manquant ! Ajoutez <meta name="csrf-token" content="{{ csrf_token() }}">')})();const W=new Notyf({duration:4e3,position:{x:"right",y:"top"},types:[{type:"success",background:"#10B981",icon:{className:"fas fa-check-circle",tagName:"i",color:"white"}},{type:"error",background:"#EF4444",icon:{className:"fas fa-exclamation-circle",tagName:"i",color:"white"}},{type:"warning",background:"#F59E0B",icon:{className:"fas fa-exclamation-triangle",tagName:"i",color:"white"}}]});window.addEventListener("load",function(){const e=document.getElementById("loader"),t=document.getElementById("mainContent");setTimeout(()=>{e.classList.add("hide"),setTimeout(()=>{e.style.display="none",t.classList.add("show"),Jr()},500)},2500)});function Jr(){document.querySelectorAll(".form-group, .security-requirements, .submit-btn").forEach((t,n)=>{t.style.opacity="0",t.style.transform="translateY(30px)",setTimeout(()=>{t.style.transition="all 0.6s cubic-bezier(0.4, 0, 0.2, 1)",t.style.opacity="1",t.style.transform="translateY(0)"},n*150)})}const Yt=document.getElementById("themeToggle"),uo=document.body;let Gt="dark";Yt.addEventListener("click",()=>{Gt==="light"?(uo.removeAttribute("data-theme"),Yt.innerHTML='<i class="fas fa-moon"></i>',Gt="dark"):(uo.setAttribute("data-theme","light"),Yt.innerHTML='<i class="fas fa-sun"></i>',Gt="light")});const Xr=document.querySelectorAll(".password-toggle");Xr.forEach(e=>{e.addEventListener("click",()=>{const t=e.parentElement.querySelector("input"),n=e.querySelector("i");t.type==="password"?(t.type="text",n.className="fas fa-eye-slash"):(t.type="password",n.className="fas fa-eye")})});const se=document.getElementById("password"),Ee=document.getElementById("confirmPassword"),ye=document.getElementById("strengthFill"),mo=document.getElementById("strengthText"),he=document.getElementById("passwordMatch"),Wr={length:document.getElementById("lengthReq"),uppercase:document.getElementById("uppercaseReq"),lowercase:document.getElementById("lowercaseReq"),number:document.getElementById("numberReq")};function us(e){let t=0;const n={length:e.length>=8,uppercase:/[A-Z]/.test(e),lowercase:/[a-z]/.test(e),number:/[0-9]/.test(e),special:/[^A-Za-z0-9]/.test(e)};let o=0;e.length>=12&&(o=1),e.length>=16&&(o=2),Object.keys(n).forEach(l=>{const u=Wr[l];if(u){const f=u.querySelector(".requirement-icon");n[l]?(u.classList.add("met"),f.className="fas fa-check-circle requirement-icon",t++):(u.classList.remove("met"),f.className="fas fa-circle requirement-icon")}});const s=t+o;let a="none",r=0,i="fas fa-info-circle",c="Saisissez un mot de passe";return e.length===0?(a="none",r=0,i="fas fa-info-circle",c="Saisissez un mot de passe"):s<=1?(a="very-weak",r=15,i="fas fa-exclamation-triangle",c="Tr√®s faible - Ajoutez plus d'√©l√©ments"):s===2?(a="weak",r=30,i="fas fa-exclamation-circle",c="Faible - Am√©liorez votre mot de passe"):s===3?(a="fair",r=50,i="fas fa-minus-circle",c="Moyen - Ajoutez plus de caract√®res"):s===4?(a="good",r=70,i="fas fa-check-circle",c="Bon - Presque parfait !"):s===5?(a="strong",r=85,i="fas fa-shield-check",c="Fort - Excellent choix !"):s>=6&&(a="excellent",r=100,i="fas fa-crown",c="Excellent - S√©curit√© maximale !"),ye.style.width=`${r}%`,ye.className=`strength-fill ${a}`,mo.className=`strength-text ${a}`,mo.innerHTML=`<i class="${i}"></i> ${c}`,ye.style.transform="scaleX(0)",setTimeout(()=>{ye.style.transform="scaleX(1)",ye.style.transformOrigin="left",ye.style.transition="transform 0.4s cubic-bezier(0.4, 0, 0.2, 1)"},50),t>=4}function Fn(){const e=se.value,t=Ee.value;return t===""?(he.innerHTML="",he.className="password-match",!1):e===t?(he.innerHTML='<i class="fas fa-check-circle"></i> Les mots de passe correspondent parfaitement',he.className="password-match success",!0):(he.innerHTML='<i class="fas fa-times-circle"></i> Les mots de passe ne correspondent pas',he.className="password-match error",!1)}se.addEventListener("input",e=>{us(e.target.value),Ee.value&&Fn(),e.target.style.transform="scale(1.02)",setTimeout(()=>{e.target.style.transform="scale(1)"},150)});Ee.addEventListener("input",e=>{Fn(),e.target.style.transform="scale(1.02)",setTimeout(()=>{e.target.style.transform="scale(1)"},150)});const le=document.getElementById("confirmModal"),ke=document.getElementById("successModal"),Kr=document.getElementById("cancelBtn"),ms=document.getElementById("confirmBtn"),fs=document.getElementById("okBtn");function ps(e){e.classList.add("show"),document.body.style.overflow="hidden"}function Te(e){e.classList.remove("show"),document.body.style.overflow=""}Kr.addEventListener("click",()=>{Te(le),W.open({type:"warning",message:"Activation annul√©e"})});ms.addEventListener("click",()=>{Te(le),Yr()});fs.addEventListener("click",()=>{Te(ke),Gr()});[le,ke].forEach(e=>{e.addEventListener("click",t=>{t.target===e&&Te(e)})});function Yr(){const e=document.getElementById("submitBtn"),t=e.querySelector(".btn-text"),n=e.querySelector(".submit-icon"),o=e.querySelector(".btn-loader");e.disabled=!0,t.style.display="none",n.style.display="none",o.style.display="inline-block";const s=["Cr√©ation de votre compte...","Configuration de la s√©curit√©...","Activation en cours..."];let a=0;const r=setInterval(()=>{a<s.length&&(W.open({type:"success",message:s[a],duration:1e3}),a++)},800);setTimeout(()=>{clearInterval(r),e.disabled=!1,t.style.display="inline",n.style.display="inline",o.style.display="none",ps(ke),W.success("Compte activ√© avec succ√®s !"),ei()},3500)}function Gr(){document.querySelector(".login-container").style.transform="scale(0.95)",document.querySelector(".login-container").style.opacity="0",setTimeout(()=>{window.location.href="{{ url("/") }}"},500)}const Zr=document.getElementById("activationForm");Zr.addEventListener("submit",e=>{e.preventDefault();const t=se.value.trim(),n=Ee.value.trim();if(!t){W.error("Veuillez saisir un mot de passe"),se.focus();return}if(t.length<8){W.error("Le mot de passe doit contenir au moins 8 caract√®res"),se.focus();return}if(!n){W.error("Veuillez confirmer votre mot de passe"),Ee.focus();return}if(!us(t)){W.error("Le mot de passe ne respecte pas les crit√®res de s√©curit√© minimum"),se.focus();return}if(!Fn()){W.error("Les mots de passe ne correspondent pas"),Ee.focus();return}if(["password","123456","12345678","qwerty","abc123","password123","admin","letmein","welcome","monkey"].includes(t.toLowerCase())){W.error("Ce mot de passe est trop commun. Choisissez quelque chose de plus unique."),se.focus();return}ps(le)});const Qr=document.querySelectorAll(".form-input");Qr.forEach(e=>{e.addEventListener("focus",t=>{t.target.style.transform="translateY(-2px)",t.target.style.boxShadow="0 8px 25px rgba(59, 130, 246, 0.15)"}),e.addEventListener("blur",t=>{t.target.style.transform="",t.target.style.boxShadow=""})});document.addEventListener("keydown",e=>{e.key==="Escape"&&(le.classList.contains("show")&&Te(le),ke.classList.contains("show")&&Te(ke)),e.key==="Enter"&&(le.classList.contains("show")&&ms.click(),ke.classList.contains("show")&&fs.click())});function ei(){const e=["#10B981","#34D399","#6EE7B7","#A7F3D0"];for(let t=0;t<15;t++){const n=document.createElement("div");n.style.position="fixed",n.style.width="6px",n.style.height="6px",n.style.backgroundColor=e[Math.floor(Math.random()*e.length)],n.style.borderRadius="50%",n.style.pointerEvents="none",n.style.zIndex="10001",n.style.left=Math.random()*window.innerWidth+"px",n.style.top=Math.random()*window.innerHeight+"px",n.style.opacity="1",n.style.transform="scale(0)",n.style.transition="all 2s cubic-bezier(0.4, 0, 0.2, 1)",document.body.appendChild(n),setTimeout(()=>{n.style.transform="scale(1) translateY(-100px)",n.style.opacity="0"},50),setTimeout(()=>{n.remove()},2050)}}const ti={"2025-01-01":"Jour de l'An","2025-02-14":"Saint-Valentin","2025-03-08":"Journ√©e Internationale de la Femme","2025-03-12":"F√™te de la R√©novation","2025-04-18":"Vendredi Saint","2025-04-21":"Lundi de P√¢ques","2025-05-01":"F√™te du Travail","2025-05-11":"F√™te des M√®res","2025-05-29":"Ascension","2025-06-09":"Lundi de Pentec√¥te","2025-06-15":"F√™te des P√®res","2025-08-15":"Assomption","2025-08-17":"F√™te de l'Ind√©pendance","2025-10-31":"Halloween","2025-11-01":"Toussaint","2025-12-25":"No√´l","2025-12-31":"R√©veillon du Nouvel An","2026-01-01":"Jour de l'An","2026-02-14":"Saint-Valentin","2026-03-08":"Journ√©e Internationale de la Femme","2026-03-12":"F√™te de la R√©novation","2026-04-03":"Vendredi Saint","2026-04-06":"Lundi de P√¢ques","2026-05-01":"F√™te du Travail","2026-05-14":"Ascension","2026-05-24":"F√™te des M√®res","2026-05-25":"Lundi de Pentec√¥te","2026-06-21":"F√™te des P√®res","2026-08-15":"Assomption","2026-08-17":"F√™te de l'Ind√©pendance","2026-10-31":"Halloween","2026-11-01":"Toussaint","2026-12-25":"No√´l","2026-12-31":"R√©veillon du Nouvel An","2027-01-01":"Jour de l'An","2027-02-14":"Saint-Valentin","2027-03-08":"Journ√©e Internationale de la Femme","2027-03-12":"F√™te de la R√©novation","2027-03-26":"Vendredi Saint","2027-03-29":"Lundi de P√¢ques","2027-05-01":"F√™te du Travail","2027-05-06":"Ascension","2027-05-09":"F√™te des M√®res","2027-05-17":"Lundi de Pentec√¥te","2027-06-20":"F√™te des P√®res","2027-08-15":"Assomption","2027-08-17":"F√™te de l'Ind√©pendance","2027-10-31":"Halloween","2027-11-01":"Toussaint","2027-12-25":"No√´l","2027-12-31":"R√©veillon du Nouvel An","2028-01-01":"Jour de l'An","2028-02-14":"Saint-Valentin","2028-03-08":"Journ√©e Internationale de la Femme","2028-03-12":"F√™te de la R√©novation","2028-04-14":"Vendredi Saint","2028-04-17":"Lundi de P√¢ques","2028-05-01":"F√™te du Travail","2028-05-25":"Ascension","2028-05-28":"F√™te des M√®res","2028-06-05":"Lundi de Pentec√¥te","2028-06-18":"F√™te des P√®res","2028-08-15":"Assomption","2028-08-17":"F√™te de l'Ind√©pendance","2028-10-31":"Halloween","2028-11-01":"Toussaint","2028-12-25":"No√´l","2028-12-31":"R√©veillon du Nouvel An","2029-01-01":"Jour de l'An","2029-02-14":"Saint-Valentin","2029-03-08":"Journ√©e Internationale de la Femme","2029-03-12":"F√™te de la R√©novation","2029-03-30":"Vendredi Saint","2029-04-02":"Lundi de P√¢ques","2029-05-01":"F√™te du Travail","2029-05-10":"Ascension","2029-05-13":"F√™te des M√®res","2029-05-21":"Lundi de Pentec√¥te","2029-06-17":"F√™te des P√®res","2029-08-15":"Assomption","2029-08-17":"F√™te de l'Ind√©pendance","2029-10-31":"Halloween","2029-11-01":"Toussaint","2029-12-25":"No√´l","2029-12-31":"R√©veillon du Nouvel An","2030-01-01":"Jour de l'An","2030-02-14":"Saint-Valentin","2030-03-08":"Journ√©e Internationale de la Femme","2030-03-12":"F√™te de la R√©novation","2030-04-19":"Vendredi Saint","2030-04-22":"Lundi de P√¢ques","2030-05-01":"F√™te du Travail","2030-05-26":"F√™te des M√®res","2030-05-30":"Ascension","2030-06-10":"Lundi de Pentec√¥te","2030-06-16":"F√™te des P√®res","2030-08-15":"Assomption","2030-08-17":"F√™te de l'Ind√©pendance","2030-10-31":"Halloween","2030-11-01":"Toussaint","2030-12-25":"No√´l","2030-12-31":"R√©veillon du Nouvel An","2031-01-01":"Jour de l'An","2031-02-14":"Saint-Valentin","2031-03-08":"Journ√©e Internationale de la Femme","2031-03-12":"F√™te de la R√©novation","2031-04-11":"Vendredi Saint","2031-04-14":"Lundi de P√¢ques","2031-05-01":"F√™te du Travail","2031-05-11":"F√™te des M√®res","2031-05-22":"Ascension","2031-06-02":"Lundi de Pentec√¥te","2031-06-15":"F√™te des P√®res","2031-08-15":"Assomption","2031-08-17":"F√™te de l'Ind√©pendance","2031-10-31":"Halloween","2031-11-01":"Toussaint","2031-12-25":"No√´l","2031-12-31":"R√©veillon du Nouvel An","2032-01-01":"Jour de l'An","2032-02-14":"Saint-Valentin","2032-03-08":"Journ√©e Internationale de la Femme","2032-03-12":"F√™te de la R√©novation","2032-03-26":"Vendredi Saint","2032-03-29":"Lundi de P√¢ques","2032-05-01":"F√™te du Travail","2032-05-06":"Ascension","2032-05-09":"F√™te des M√®res","2032-05-17":"Lundi de Pentec√¥te","2032-06-20":"F√™te des P√®res","2032-08-15":"Assomption","2032-08-17":"F√™te de l'Ind√©pendance","2032-10-31":"Halloween","2032-11-01":"Toussaint","2032-12-25":"No√´l","2032-12-31":"R√©veillon du Nouvel An","2033-01-01":"Jour de l'An","2033-02-14":"Saint-Valentin","2033-03-08":"Journ√©e Internationale de la Femme","2033-03-12":"F√™te de la R√©novation","2033-04-15":"Vendredi Saint","2033-04-18":"Lundi de P√¢ques","2033-05-01":"F√™te du Travail","2033-05-08":"F√™te des M√®res","2033-05-26":"Ascension","2033-06-06":"Lundi de Pentec√¥te","2033-06-19":"F√™te des P√®res","2033-08-15":"Assomption","2033-08-17":"F√™te de l'Ind√©pendance","2033-10-31":"Halloween","2033-11-01":"Toussaint","2033-12-25":"No√´l","2033-12-31":"R√©veillon du Nouvel An","2034-01-01":"Jour de l'An","2034-02-14":"Saint-Valentin","2034-03-08":"Journ√©e Internationale de la Femme","2034-03-12":"F√™te de la R√©novation","2034-04-07":"Vendredi Saint","2034-04-10":"Lundi de P√¢ques","2034-05-01":"F√™te du Travail","2034-05-14":"F√™te des M√®res","2034-05-18":"Ascension","2034-05-29":"Lundi de Pentec√¥te","2034-06-18":"F√™te des P√®res","2034-08-15":"Assomption","2034-08-17":"F√™te de l'Ind√©pendance","2034-10-31":"Halloween","2034-11-01":"Toussaint","2034-12-25":"No√´l","2034-12-31":"R√©veillon du Nouvel An","2035-01-01":"Jour de l'An","2035-02-14":"Saint-Valentin","2035-03-08":"Journ√©e Internationale de la Femme","2035-03-12":"F√™te de la R√©novation","2035-03-23":"Vendredi Saint","2035-03-26":"Lundi de P√¢ques","2035-05-01":"F√™te du Travail","2035-05-03":"Ascension","2035-05-13":"F√™te des M√®res","2035-05-14":"Lundi de Pentec√¥te","2035-06-17":"F√™te des P√®res","2035-08-15":"Assomption","2035-08-17":"F√™te de l'Ind√©pendance","2035-10-31":"Halloween","2035-11-01":"Toussaint","2035-12-25":"No√´l","2035-12-31":"R√©veillon du Nouvel An","2036-01-01":"Jour de l'An","2036-02-14":"Saint-Valentin","2036-03-08":"Journ√©e Internationale de la Femme","2036-03-12":"F√™te de la R√©novation","2036-04-11":"Vendredi Saint","2036-04-14":"Lundi de P√¢ques","2036-05-01":"F√™te du Travail","2036-05-11":"F√™te des M√®res","2036-05-22":"Ascension","2036-06-02":"Lundi de Pentec√¥te","2036-06-15":"F√™te des P√®res","2036-08-15":"Assomption","2036-08-17":"F√™te de l'Ind√©pendance","2036-10-31":"Halloween","2036-11-01":"Toussaint","2036-12-25":"No√´l","2036-12-31":"R√©veillon du Nouvel An","2037-01-01":"Jour de l'An","2037-02-14":"Saint-Valentin","2037-03-08":"Journ√©e Internationale de la Femme","2037-03-12":"F√™te de la R√©novation","2037-04-03":"Vendredi Saint","2037-04-06":"Lundi de P√¢ques","2037-05-01":"F√™te du Travail","2037-05-10":"F√™te des M√®res","2037-05-14":"Ascension","2037-05-25":"Lundi de Pentec√¥te","2037-06-21":"F√™te des P√®res","2037-08-15":"Assomption","2037-08-17":"F√™te de l'Ind√©pendance","2037-10-31":"Halloween","2037-11-01":"Toussaint","2037-12-25":"No√´l","2037-12-31":"R√©veillon du Nouvel An","2038-01-01":"Jour de l'An","2038-02-14":"Saint-Valentin","2038-03-08":"Journ√©e Internationale de la Femme","2038-03-12":"F√™te de la R√©novation","2038-04-23":"Vendredi Saint","2038-04-26":"Lundi de P√¢ques","2038-05-01":"F√™te du Travail","2038-05-30":"F√™te des M√®res","2038-06-03":"Ascension","2038-06-14":"Lundi de Pentec√¥te","2038-06-20":"F√™te des P√®res","2038-08-15":"Assomption","2038-08-17":"F√™te de l'Ind√©pendance","2038-10-31":"Halloween","2038-11-01":"Toussaint","2038-12-25":"No√´l","2038-12-31":"R√©veillon du Nouvel An","2039-01-01":"Jour de l'An","2039-02-14":"Saint-Valentin","2039-03-08":"Journ√©e Internationale de la Femme","2039-03-12":"F√™te de la R√©novation","2039-04-08":"Vendredi Saint","2039-04-11":"Lundi de P√¢ques","2039-05-01":"F√™te du Travail","2039-05-15":"F√™te des M√®res","2039-05-19":"Ascension","2039-05-30":"Lundi de Pentec√¥te","2039-06-19":"F√™te des P√®res","2039-08-15":"Assomption","2039-08-17":"F√™te de l'Ind√©pendance","2039-10-31":"Halloween","2039-11-01":"Toussaint","2039-12-25":"No√´l","2039-12-31":"R√©veillon du Nouvel An","2040-01-01":"Jour de l'An","2040-02-14":"Saint-Valentin","2040-03-08":"Journ√©e Internationale de la Femme","2040-03-12":"F√™te de la R√©novation","2040-03-30":"Vendredi Saint","2040-04-02":"Lundi de P√¢ques","2040-05-01":"F√™te du Travail","2040-05-10":"Ascension","2040-05-13":"F√™te des M√®res","2040-05-21":"Lundi de Pentec√¥te","2040-06-17":"F√™te des P√®res","2040-08-15":"Assomption","2040-08-17":"F√™te de l'Ind√©pendance","2040-10-31":"Halloween","2040-11-01":"Toussaint","2040-12-25":"No√´l","2040-12-31":"R√©veillon du Nouvel An","2041-01-01":"Jour de l'An","2041-02-14":"Saint-Valentin","2041-03-08":"Journ√©e Internationale de la Femme","2041-03-12":"F√™te de la R√©novation","2041-04-19":"Vendredi Saint","2041-04-22":"Lundi de P√¢ques","2041-05-01":"F√™te du Travail","2041-05-12":"F√™te des M√®res","2041-05-30":"Ascension","2041-06-10":"Lundi de Pentec√¥te","2041-06-16":"F√™te des P√®res","2041-08-15":"Assomption","2041-08-17":"F√™te de l'Ind√©pendance","2041-10-31":"Halloween","2041-11-01":"Toussaint","2041-12-25":"No√´l","2041-12-31":"R√©veillon du Nouvel An","2042-01-01":"Jour de l'An","2042-02-14":"Saint-Valentin","2042-03-08":"Journ√©e Internationale de la Femme","2042-03-12":"F√™te de la R√©novation","2042-04-04":"Vendredi Saint","2042-04-07":"Lundi de P√¢ques","2042-05-01":"F√™te du Travail","2042-05-11":"F√™te des M√®res","2042-05-15":"Ascension","2042-05-26":"Lundi de Pentec√¥te","2042-06-15":"F√™te des P√®res","2042-08-15":"Assomption","2042-08-17":"F√™te de l'Ind√©pendance","2042-10-31":"Halloween","2042-11-01":"Toussaint","2042-12-25":"No√´l","2042-12-31":"R√©veillon du Nouvel An","2043-01-01":"Jour de l'An","2043-02-14":"Saint-Valentin","2043-03-08":"Journ√©e Internationale de la Femme","2043-03-12":"F√™te de la R√©novation","2043-03-27":"Vendredi Saint","2043-03-30":"Lundi de P√¢ques","2043-05-01":"F√™te du Travail","2043-05-07":"Ascension","2043-05-10":"F√™te des M√®res","2043-05-18":"Lundi de Pentec√¥te","2043-06-21":"F√™te des P√®res","2043-08-15":"Assomption","2043-08-17":"F√™te de l'Ind√©pendance","2043-10-31":"Halloween","2043-11-01":"Toussaint","2043-12-25":"No√´l","2043-12-31":"R√©veillon du Nouvel An","2044-01-01":"Jour de l'An","2044-02-14":"Saint-Valentin","2044-03-08":"Journ√©e Internationale de la Femme","2044-03-12":"F√™te de la R√©novation","2044-04-15":"Vendredi Saint","2044-04-18":"Lundi de P√¢ques","2044-05-01":"F√™te du Travail","2044-05-08":"F√™te des M√®res","2044-05-26":"Ascension","2044-06-06":"Lundi de Pentec√¥te","2044-06-19":"F√™te des P√®res","2044-08-15":"Assomption","2044-08-17":"F√™te de l'Ind√©pendance","2044-10-31":"Halloween","2044-11-01":"Toussaint","2044-12-25":"No√´l","2044-12-31":"R√©veillon du Nouvel An","2045-01-01":"Jour de l'An","2045-02-14":"Saint-Valentin","2045-03-08":"Journ√©e Internationale de la Femme","2045-03-12":"F√™te de la R√©novation","2045-04-07":"Vendredi Saint","2045-04-10":"Lundi de P√¢ques","2045-05-01":"F√™te du Travail","2045-05-14":"F√™te des M√®res","2045-05-18":"Ascension","2045-05-29":"Lundi de Pentec√¥te","2045-06-18":"F√™te des P√®res","2045-08-15":"Assomption","2045-08-17":"F√™te de l'Ind√©pendance","2045-10-31":"Halloween","2045-11-01":"Toussaint","2045-12-25":"No√´l","2045-12-31":"R√©veillon du Nouvel An","2046-01-01":"Jour de l'An","2046-02-14":"Saint-Valentin","2046-03-08":"Journ√©e Internationale de la Femme","2046-03-12":"F√™te de la R√©novation","2046-03-23":"Vendredi Saint","2046-03-26":"Lundi de P√¢ques","2046-05-01":"F√™te du Travail","2046-05-03":"Ascension","2046-05-13":"F√™te des M√®res","2046-05-14":"Lundi de Pentec√¥te","2046-06-17":"F√™te des P√®res","2046-08-15":"Assomption","2046-08-17":"F√™te de l'Ind√©pendance","2046-10-31":"Halloween","2046-11-01":"Toussaint","2046-12-25":"No√´l","2046-12-31":"R√©veillon du Nouvel An","2047-01-01":"Jour de l'An","2047-02-14":"Saint-Valentin","2047-03-08":"Journ√©e Internationale de la Femme","2047-03-12":"F√™te de la R√©novation","2047-04-12":"Vendredi Saint","2047-04-15":"Lundi de P√¢ques","2047-05-01":"F√™te du Travail","2047-05-12":"F√™te des M√®res","2047-05-23":"Ascension","2047-06-03":"Lundi de Pentec√¥te","2047-06-16":"F√™te des P√®res","2047-08-15":"Assomption","2047-08-17":"F√™te de l'Ind√©pendance","2047-10-31":"Halloween","2047-11-01":"Toussaint","2047-12-25":"No√´l","2047-12-31":"R√©veillon du Nouvel An","2048-01-01":"Jour de l'An","2048-02-14":"Saint-Valentin","2048-03-08":"Journ√©e Internationale de la Femme","2048-03-12":"F√™te de la R√©novation","2048-04-03":"Vendredi Saint","2048-04-06":"Lundi de P√¢ques","2048-05-01":"F√™te du Travail","2048-05-10":"F√™te des M√®res","2048-05-14":"Ascension","2048-05-25":"Lundi de Pentec√¥te","2048-06-21":"F√™te des P√®res","2048-08-15":"Assomption","2048-08-17":"F√™te de l'Ind√©pendance","2048-10-31":"Halloween","2048-11-01":"Toussaint","2048-12-25":"No√´l","2048-12-31":"R√©veillon du Nouvel An"},X={name:"Jean Martin",hireDate:new Date(2024,9,1),userId:"jean-martin"};function fo(){const e=new Date,t={weekday:"long",year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit",second:"2-digit"};document.getElementById("current-date").textContent=e.toLocaleDateString("fr-FR",t)}function ni(){const e=localStorage.getItem("theme")||"light";document.documentElement.className=e==="dark"?"dark h-full":"h-full"}function po(){const t=document.documentElement.classList.contains("dark")?"light":"dark";document.documentElement.className=t==="dark"?"dark h-full":"h-full",localStorage.setItem("theme",t),notyf.success(`Interface bascul√©e en mode ${t==="dark"?"sombre":"clair"}`)}function fn(e){return["Janvier","F√©vrier","Mars","Avril","Mai","Juin","Juillet","Ao√ªt","Septembre","Octobre","Novembre","D√©cembre"][e]}function go(e,t){return new Date(t,e+1,0).getDate()}function oi(e,t){const n=new Date(t,e,1).getDay();return n===0?6:n-1}function Lt(e){const t=e.getFullYear(),n=String(e.getMonth()+1).padStart(2,"0"),o=String(e.getDate()).padStart(2,"0");return`${t}-${n}-${o}`}function si(e,t,n){const o=Lt(e);return o>=t&&o<=n}function Tn(e){const t=e.getDay();return t===0||t===6}function $n(e){const t=e.getFullYear(),n=String(e.getMonth()+1).padStart(2,"0"),o=String(e.getDate()).padStart(2,"0"),s=`${t}-${n}-${o}`;return ti[s]}function yo(e){return Lt(e),k.leaves.find(t=>t.userId===X.userId&&si(e,t.startDate,t.endDate)&&t.status==="approved")}function ai(e,t){let n=0,o=new Date(e);const s=new Date(t);for(;o<=s;)!Tn(o)&&!$n(o)&&n++,o.setDate(o.getDate()+1);return n}function ri(){const e=new Date,t=X.hireDate;let n=(e.getFullYear()-t.getFullYear())*12;return n-=t.getMonth(),n+=e.getMonth(),e.getDate()<t.getDate()&&n--,Math.max(0,n)}function gs(){const e=ri(),t=e*2,n=["paid","rtt","unpaid"],o=k.leaves.filter(a=>a.userId===X.userId&&a.status==="approved"&&n.includes(a.type)).reduce((a,r)=>{const i=ai(r.startDate,r.endDate);return a+i},0),s=t-o;return{monthsWorked:e,accumulatedLeave:t,consumedLeave:o,availableBalance:s}}function ii(){const e=gs();document.getElementById("months-worked").textContent=`${e.monthsWorked} mois`,document.getElementById("months-multiplier").textContent=e.monthsWorked,document.getElementById("accumulated-leave").textContent=`${e.accumulatedLeave} jours`,document.getElementById("consumed-leave").textContent=`${e.consumedLeave} jours`,document.getElementById("available-balance").textContent=`${e.availableBalance} jours`}function di(){const e=new Date(2025,9,20),t=20;let n=0,o=new Date(e);const s=[];for(;n<t;)!Tn(o)&&!$n(o)&&(s.push({id:s.length+1,userId:X.userId,type:"sick",startDate:Lt(o),endDate:Lt(o),status:"approved",reason:"Cong√© maladie"}),n++),o.setDate(o.getDate()+1);return s}function li(){const e=di();return e.push({id:e.length+1,userId:X.userId,type:"paid",startDate:"2025-11-10",endDate:"2025-11-12",status:"approved",reason:"Cong√©s annuels"}),e.push({id:e.length+1,userId:X.userId,type:"rtt",startDate:"2025-11-25",endDate:"2025-11-26",status:"approved",reason:"RTT"}),e.push({id:e.length+1,userId:X.userId,type:"maternity",startDate:"2025-12-01",endDate:"2025-12-15",status:"approved",reason:"Cong√© maternit√©"}),e}const k={currentMonth:new Date().getMonth(),currentYear:new Date().getFullYear(),leaves:[],sickLeaveBalance:20,sickLeaveUsed:0};function ci(){const e=document.getElementById("sick-leave-used"),t=document.getElementById("sick-leave-balance"),n=document.getElementById("sick-leave-remaining"),o=document.getElementById("sick-leave-percentage"),s=document.getElementById("sick-leave-progress"),a=new Date;a.setHours(0,0,0,0);const i=k.leaves.filter(f=>{if(f.type!=="sick"||f.userId!==X.userId||f.status!=="approved")return!1;const b=new Date(f.startDate);return b.setHours(0,0,0,0),b<=a}).length,c=k.sickLeaveBalance,l=c-i,u=Math.round(i/c*100);k.sickLeaveUsed=i,e.textContent=`${i} / ${c} jours`,t.textContent=`${c} jours`,n.textContent=`Restant: ${l} jours`,o.textContent=`${u}%`,s.style.width=`${u}%`}function ys(){const e=document.getElementById("calendar-grid"),t=document.getElementById("current-month"),n=document.getElementById("current-year");t.textContent=fn(k.currentMonth),n.textContent=k.currentYear.toString(),e.innerHTML="";const o=go(k.currentMonth,k.currentYear),s=oi(k.currentMonth,k.currentYear),a=new Date;for(let c=0;c<s;c++){const l=document.createElement("div");l.className="calendar-day text-gray-300 dark:text-gray-600";const u=k.currentMonth===0?11:k.currentMonth-1,f=k.currentMonth===0?k.currentYear-1:k.currentYear,b=go(u,f);l.textContent=b-s+c+1,e.appendChild(l)}for(let c=1;c<=o;c++){const l=document.createElement("div"),u=new Date(k.currentYear,k.currentMonth,c);l.className="calendar-day text-gray-700 dark:text-gray-300 rounded-xl font-medium relative";const f=document.createElement("div");f.textContent=c,l.appendChild(f),u.toDateString()===a.toDateString()&&l.classList.add("today");const b=$n(u);if(b){l.classList.add("holiday");const w=document.createElement("div");w.className="holiday-badge",w.title=b,l.appendChild(w);const m=document.createElement("div");m.className="text-xs text-blue-900 dark:text-blue-300 font-semibold mt-1 truncate holiday-label",m.textContent=b.length>15?b.substring(0,15)+"...":b,m.title=b,l.appendChild(m),l.addEventListener("click",y=>{y.stopPropagation();let p=l.querySelector(".holiday-tooltip");p||(p=document.createElement("div"),p.className="holiday-tooltip",p.textContent=b,l.appendChild(p),p.style.display="block",setTimeout(()=>{p.style.display="none"},2e3))}),l.title=b}else{const w=yo(u);if(w&&!Tn(u)){l.classList.add("has-leave",`leave-${w.type}`),w.type==="sick"&&l.classList.add("sick-leave");const m={sick:"Cong√© maladie",paid:"Cong√©s pay√©s",maternity:"Cong√© maternit√©",rtt:"RTT",unpaid:"Sans solde",paternity:"Cong√© paternit√©"};l.title=`${m[w.type]}: ${w.reason}`}}l.addEventListener("click",()=>{if(b)notyf.info(`üéâ Jour f√©ri√©: ${b}`);else{const w=yo(u);if(w){const m={sick:"Cong√© maladie",paid:"Cong√©s pay√©s",maternity:"Cong√© maternit√©",rtt:"RTT",unpaid:"Sans solde",paternity:"Cong√© paternit√©"};notyf.info(`${m[w.type]} - ${w.reason}`)}else notyf.info(`${c} ${fn(k.currentMonth)}`)}}),e.appendChild(l)}const i=Math.ceil((o+s)/7)*7-(o+s);for(let c=1;c<=i;c++){const l=document.createElement("div");l.className="calendar-day text-gray-300 dark:text-gray-600",l.textContent=c,e.appendChild(l)}}function at(e){e==="prev"?k.currentMonth===0?(k.currentMonth=11,k.currentYear--):k.currentMonth--:k.currentMonth===11?(k.currentMonth=0,k.currentYear++):k.currentMonth++,ys(),notyf.info(`${fn(k.currentMonth)} ${k.currentYear}`)}function ui(){const e=document.getElementById("sidebar"),t=document.getElementById("sidebar-overlay");e.classList.toggle("show"),t.classList.toggle("show")}function Zt(){const e=document.getElementById("sidebar"),t=document.getElementById("sidebar-overlay");e.classList.remove("show"),t.classList.remove("show")}function mi(){document.getElementById("notifications-dropdown").classList.toggle("show")}document.addEventListener("DOMContentLoaded",function(){k.leaves=li(),ni(),fo(),setInterval(fo,1e3),ys(),ci(),ii(),setTimeout(()=>{notyf.success("Calendrier des cong√©s initialis√©")},1e3),document.getElementById("theme-toggle").addEventListener("click",po),document.getElementById("toggle-sidebar").addEventListener("click",ui),document.getElementById("close-sidebar").addEventListener("click",Zt),document.getElementById("sidebar-overlay").addEventListener("click",Zt),document.getElementById("prev-month").addEventListener("click",()=>at("prev")),document.getElementById("next-month").addEventListener("click",()=>at("next")),document.getElementById("notifications-btn").addEventListener("click",function(e){e.stopPropagation(),mi()}),document.addEventListener("click",function(e){const t=document.getElementById("notifications-dropdown"),n=document.getElementById("notifications-btn");!t.contains(e.target)&&!n.contains(e.target)&&t.classList.remove("show")}),document.addEventListener("keydown",function(e){(e.ctrlKey||e.metaKey)&&e.key==="d"&&(e.preventDefault(),po()),e.key==="ArrowLeft"&&e.ctrlKey&&(e.preventDefault(),at("prev")),e.key==="ArrowRight"&&e.ctrlKey&&(e.preventDefault(),at("next")),e.key==="Escape"&&(Zt(),document.getElementById("notifications-dropdown").classList.remove("show"))}),console.log("üóìÔ∏è Graxel Tech Calendar initialized successfully with Gabon holidays!"),console.log("üíº Employee:",X.name),console.log("üìÖ Hire Date:",X.hireDate.toLocaleDateString("fr-FR")),console.log("üìä Leave Balance:",gs())});window.addEventListener("resize",function(){const e=document.getElementById("sidebar"),t=document.getElementById("sidebar-overlay");window.innerWidth>=768&&(e.classList.remove("show"),t.classList.remove("show"))});const z=[{id:1,employeeName:"Jean Martin",department:"IT",leaveType:"Cong√©s pay√©s",startDate:"2025-10-15",endDate:"2025-10-20",duration:5,status:"pending",submittedTime:"il y a 2h",reason:"Cong√©s pour vacances en famille. Voyage pr√©vu depuis plusieurs mois.",avatar:"from-blue-500 to-purple-500",pdfName:"justificatif_conges.pdf",remainingBalance:20},{id:2,employeeName:"Sophie Dubois",department:"IT",leaveType:"Cong√© maladie",startDate:"2025-10-16",endDate:"2025-10-18",duration:3,status:"pending",submittedTime:"il y a 1h",reason:"Arr√™t maladie suite √† une grippe. Certificat m√©dical fourni.",avatar:"from-green-500 to-teal-500",pdfName:"certificat_medical.pdf",remainingBalance:15},{id:3,employeeName:"Marie Dupont",department:"RH",leaveType:"Cong√© maternit√©",startDate:"2025-10-01",endDate:"2026-01-15",duration:106,status:"approved",submittedTime:"il y a 3h",reason:"Cong√© maternit√© pour la naissance de mon second enfant.",avatar:"from-pink-500 to-rose-500",pdfName:"certificat_grossesse.pdf",remainingBalance:0},{id:4,employeeName:"Pierre Leroux",department:"RH",leaveType:"Paternit√©",startDate:"2025-10-22",endDate:"2025-10-22",duration:1,status:"rejected",submittedTime:"il y a 4h",reason:"Cong√© paternit√© suite √† la naissance.",avatar:"from-indigo-500 to-purple-500",pdfName:"justificatif_paternite.pdf",remainingBalance:29},{id:5,employeeName:"Antoine Moreau",department:"Finance",leaveType:"Cong√© sans solde",startDate:"2025-10-05",endDate:"2025-11-05",duration:31,status:"pending",submittedTime:"il y a 6h",reason:"Projet personnel n√©cessitant une absence prolong√©e.",avatar:"from-orange-500 to-red-500",pdfName:"demande_conge_sans_solde.pdf",remainingBalance:0},{id:6,employeeName:"Lucie Bernard",department:"Finance",leaveType:"Formation",startDate:"2025-10-25",endDate:"2025-10-27",duration:3,status:"approved",submittedTime:"il y a 1 jour",reason:"Formation professionnelle en gestion financi√®re.",avatar:"from-cyan-500 to-blue-500",pdfName:"programme_formation.pdf",remainingBalance:25},{id:7,employeeName:"Thomas Petit",department:"Marketing",leaveType:"Cong√©s pay√©s",startDate:"2025-11-01",endDate:"2025-11-10",duration:10,status:"pending",submittedTime:"il y a 30min",reason:"Vacances de fin d'ann√©e planifi√©es en famille.",avatar:"from-red-500 to-pink-500",pdfName:"justificatif_conges.pdf",remainingBalance:15},{id:8,employeeName:"√âmilie Rousseau",department:"Marketing",leaveType:"Cong√©s pay√©s",startDate:"2025-10-20",endDate:"2025-10-25",duration:6,status:"approved",submittedTime:"il y a 2 jours",reason:"Cong√©s pour √©v√©nement familial.",avatar:"from-purple-500 to-indigo-500",pdfName:"justificatif_conges.pdf",remainingBalance:18},{id:9,employeeName:"Marc Fontaine",department:"Commercial",leaveType:"Cong√© maladie",startDate:"2025-10-18",endDate:"2025-10-20",duration:3,status:"approved",submittedTime:"il y a 5h",reason:"Arr√™t maladie suite √† une intervention chirurgicale mineure.",avatar:"from-yellow-500 to-orange-500",pdfName:"certificat_medical.pdf",remainingBalance:22},{id:10,employeeName:"Nathalie Garnier",department:"Commercial",leaveType:"Cong√©s pay√©s",startDate:"2025-10-28",endDate:"2025-11-02",duration:5,status:"rejected",submittedTime:"il y a 3h",reason:"Demande de cong√©s pour voyage personnel.",avatar:"from-teal-500 to-green-500",pdfName:"justificatif_conges.pdf",remainingBalance:20}];let Bt="all",O="all",G=new Set,gt="grid",yt="grid";function fi(){const e=document.getElementById("departmentFilter");if(!e)return;[...new Set(z.map(n=>n.department))].sort().forEach(n=>{const o=document.createElement("option");o.value=n,o.textContent=n,e.appendChild(o)}),e.addEventListener("change",function(){O=this.value,jt()})}function pi(){document.querySelectorAll(".filter-button").forEach(t=>{t.addEventListener("click",function(){const n=this.getAttribute("data-filter");hs(n)})})}function hs(e){Bt=e,document.querySelectorAll(".filter-button").forEach(n=>{n.getAttribute("data-filter")===e?n.className="filter-button active bg-gradient-to-r from-blue-500 to-purple-600 text-white shadow-lg px-6 py-3 font-medium rounded-xl transition-all duration-300 hover-lift click-scale":n.className="filter-button bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 px-6 py-3 font-medium rounded-xl transition-all duration-300 hover-lift click-scale"}),jt()}function Ne(){let e=z;return Bt!=="all"&&(e=e.filter(t=>t.status===Bt)),O!=="all"&&(e=e.filter(t=>t.department===O)),e}function jt(){const e=document.getElementById("dynamicContent");if(!e)return;const t=Ne();let n="",o="";switch(Bt){case"all":n="Liste de toutes les demandes de cong√©s",o=O==="all"?"Toutes les demandes de tous les d√©partements":`Toutes les demandes du d√©partement ${O}`,e.innerHTML=ho(t,n,o);break;case"pending":n="Liste des cong√©s en attente de traitement",o=O==="all"?"Demandes en attente de tous les d√©partements":`Demandes en attente du d√©partement ${O}`,e.innerHTML=ho(t,n,o);break;case"approved":n="Liste des Cong√©s Approuv√©s",o=O==="all"?"Cong√©s approuv√©s de tous les d√©partements":`Cong√©s approuv√©s du d√©partement ${O}`,e.innerHTML=gi(t,n,o);break;case"rejected":n="Liste des Cong√©s Refus√©s",o=O==="all"?"Cong√©s refus√©s de tous les d√©partements":`Cong√©s refus√©s du d√©partement ${O}`,e.innerHTML=yi(t,n,o);break}G.clear(),setTimeout(()=>{Ei(),Pe()},100)}function ho(e,t,n){const o=e.some(s=>s.status==="pending");return`
        <div class="flex flex-col md:flex-row items-start md:items-center justify-between mb-4 gap-4">
            <div>
                <h3 class="text-xl font-bold text-gray-900 dark:text-white mb-2">${t}</h3>
                <p class="text-sm text-gray-500 dark:text-gray-400">${n}</p>
            </div>
            ${o?`
                <div class="flex items-center space-x-3">
                    <button id="selectAllBtn" class="px-4 py-2 bg-blue-500 hover:bg-blue-600 text-white rounded-lg transition-colors text-sm font-medium" onclick="toggleSelectAll()">
                        <i class="fas fa-check-square mr-2"></i>Tout s√©lectionner
                    </button>
                    <div id="bulkActionsContainer" class="hidden space-x-2">
                        <span id="selectedCount" class="px-3 py-2 bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded-lg text-sm font-medium">
                            0 s√©lectionn√©(s)
                        </span>
                        <button onclick="bulkApprove()" class="px-4 py-2 bg-green-500 hover:bg-green-600 text-white rounded-lg transition-colors text-sm font-medium">
                            <i class="fas fa-check mr-2"></i>Approuver
                        </button>
                        <button onclick="bulkReject()" class="px-4 py-2 bg-red-500 hover:bg-red-600 text-white rounded-lg transition-colors text-sm font-medium">
                            <i class="fas fa-times mr-2"></i>Refuser
                        </button>
                    </div>
                </div>
            `:""}
        </div>

        <div id="requestsContainer" class="space-y-4">
            ${e.length===0?`
                <div class="text-center py-12">
                    <i class="fas fa-calendar-check text-6xl text-gray-300 dark:text-gray-600 mb-4"></i>
                    <p class="text-gray-500 dark:text-gray-400">Aucune demande trouv√©e</p>
                </div>
            `:e.map(s=>hi(s)).join("")}
        </div>
    `}function gi(e,t,n){return`
        <div class="flex flex-col md:flex-row justify-between items-start md:items-center gap-4 mb-6">
            <div>
                <h3 class="text-xl font-bold text-gray-900 dark:text-white mb-2">${t}</h3>
                <p class="text-sm text-gray-500 dark:text-gray-400">${n}</p>
            </div>
            <div class="flex flex-wrap gap-2">
                <button id="gridViewBtnApproved" class="px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-colors duration-200 text-sm font-medium">
                    <i class="fas fa-th"></i> Grille
                </button>
                <button id="listViewBtnApproved" class="px-4 py-2 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 dark:bg-gray-700 dark:text-gray-300 dark:hover:bg-gray-600 transition-colors duration-200 text-sm font-medium">
                    <i class="fas fa-list"></i> Liste
                </button>
            </div>
        </div>

        <div id="approvedLeavesContainer">
            ${e.length===0?`
                <div class="text-center py-12">
                    <i class="fas fa-calendar-times text-6xl text-gray-300 dark:text-gray-600 mb-4"></i>
                    <p class="text-gray-500 dark:text-gray-400">Aucun cong√© approuv√©</p>
                </div>
            `:pn(e)}
        </div>
    `}function yi(e,t,n){return`
        <div class="flex flex-col md:flex-row justify-between items-start md:items-center gap-4 mb-6">
            <div>
                <h3 class="text-xl font-bold text-gray-900 dark:text-white mb-2">${t}</h3>
                <p class="text-sm text-gray-500 dark:text-gray-400">${n}</p>
            </div>
            <div class="flex flex-wrap gap-2">
                <button id="gridViewBtnRejected" class="px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-colors duration-200 text-sm font-medium">
                    <i class="fas fa-th"></i> Grille
                </button>
                <button id="listViewBtnRejected" class="px-4 py-2 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 dark:bg-gray-700 dark:text-gray-300 dark:hover:bg-gray-600 transition-colors duration-200 text-sm font-medium">
                    <i class="fas fa-list"></i> Liste
                </button>
            </div>
        </div>

        <div id="rejectedLeavesContainer">
            ${e.length===0?`
                <div class="text-center py-12">
                    <i class="fas fa-calendar-times text-6xl text-gray-300 dark:text-gray-600 mb-4"></i>
                    <p class="text-gray-500 dark:text-gray-400">Aucun cong√© refus√©</p>
                </div>
            `:gn(e)}
        </div>
    `}function pn(e){return gt==="grid"?`
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">
                ${e.map(t=>bi(t)).join("")}
            </div>
        `:`
            <div class="space-y-4">
                ${e.map(t=>vi(t)).join("")}
            </div>
        `}function gn(e){return yt==="grid"?`
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">
                ${e.map(t=>xi(t)).join("")}
            </div>
        `:`
            <div class="space-y-4">
                ${e.map(t=>wi(t)).join("")}
            </div>
        `}function hi(e){const t=e.status==="pending"?"üü°":e.status==="approved"?"üü¢":"üî¥",n=e.status==="pending"?"bg-yellow-100 dark:bg-yellow-900/30 text-yellow-800 dark:text-yellow-300":e.status==="approved"?"bg-green-100 dark:bg-green-900/30 text-green-800 dark:text-green-300":"bg-red-100 dark:bg-red-900/30 text-red-800 dark:text-red-300",o=e.status==="pending"?"En attente":e.status==="approved"?"Approuv√©e":"Refus√©e",s=e.status==="pending",a=e.status==="rejected",r=e.status==="pending";return`
        <div class="demand-item w-full flex flex-col md:flex-row items-start md:items-center justify-between bg-gray-50 dark:bg-gray-700/50 rounded-lg p-4" data-id="${e.id}">
            <div class="flex items-center space-x-4 w-full md:w-auto">
                ${r?`
                    <input type="checkbox"
                           class="request-checkbox w-5 h-5 text-blue-600 border-gray-300 rounded focus:ring-blue-500 cursor-pointer"
                           data-request-id="${e.id}"
                           onchange="updateBulkActions()">
                `:""}
                <div class="w-12 h-12 bg-gradient-to-r ${e.avatar} rounded-xl flex items-center justify-center flex-shrink-0">
                    <i class="fas fa-user text-white"></i>
                </div>
                <div class="flex-1 min-w-0">
                    <div class="flex items-center space-x-2">
                        <h4 class="font-semibold text-gray-900 dark:text-white truncate">${e.employeeName} - ${e.leaveType}</h4>
                        <span class="text-yellow-500">${t}</span>
                    </div>
                    <p class="text-sm text-gray-500 dark:text-gray-400 truncate">
                        <span class="inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-blue-100 dark:bg-blue-900/30 text-blue-800 dark:text-blue-300 mr-2">
                            ${e.department}
                        </span>
                        ${R(e.startDate)} - ${R(e.endDate)} (${e.duration} jours)
                    </p>
                    <p class="text-xs text-gray-400 dark:text-gray-500 mt-1">Demande soumise ${e.submittedTime}</p>
                </div>
            </div>
            <div class="flex items-center space-x-2 mt-4 md:mt-0">
                <span class="status-badge px-4 py-2 ${n} text-xs font-semibold rounded-full">${o}</span>
                ${s?`
            <button title="Approuver" class="text-green-600 hover:text-green-900 dark:text-green-400 dark:hover:text-green-300 mr-3" onclick="showConfirmModal('approve', ${e.id})">
    <i class="fa fa-check"></i>
</button>
<button title="Rejeter" class="text-red-600 hover:text-red-900 dark:text-red-400 dark:hover:text-red-300 mr-3" onclick="showConfirmModal('reject', ${e.id})">
    <i class="fas fa-times"></i>
</button>
`:""}
${a?`
    <button title="Revalider" class="text-red-600 hover:text-red-900 dark:text-red-400 dark:hover:text-red-300 mr-3" onclick="revalidateRequest(${e.id})">
        <i class="fas fa-sync-alt mr-1"></i>Revalider
    </button>
`:""}

<button title="Voir les d√©tails" class="text-indigo-600 hover:text-indigo-900 dark:text-indigo-400 dark:hover:text-indigo-300 mr-3" onclick="showDetailsModal(${e.id})">
    <i class="fas fa-eye"></i>
</button>

            </div>
        </div>
    `}function bi(e){return`
        <div id="leave-approved-${e.id}" class="bg-white dark:bg-gray-800 rounded-lg shadow-md hover:shadow-lg transition-all duration-200 cursor-pointer border-l-4 border-green-500 leave-card" data-leave-id="${e.id}">
            <div class="p-4">
                <div class="flex items-center space-x-3 mb-3">
                    <div class="w-12 h-12 bg-gradient-to-r ${e.avatar} rounded-full flex items-center justify-center">
                        <i class="fas fa-user text-white"></i>
                    </div>
                    <div class="flex-1 min-w-0">
                        <h4 class="font-semibold text-gray-900 dark:text-white truncate">${e.employeeName}</h4>
                        <span class="px-2 py-1 text-xs rounded-full bg-blue-100 dark:bg-blue-900/30 text-blue-800 dark:text-blue-300">
                            ${e.department}
                        </span>
                    </div>
                </div>
                <div class="mb-2">
                    <span class="px-2 py-1 text-xs rounded-full bg-green-100 dark:bg-green-900/30 text-green-800 dark:text-green-300">
                        ${e.leaveType}
                    </span>
                </div>
                <div class="space-y-2">
                    <div class="flex items-center text-sm text-gray-600 dark:text-gray-400">
                        <i class="fas fa-calendar-day w-5"></i>
                        <span>${R(e.startDate)}</span>
                    </div>
                    <div class="flex items-center text-sm text-gray-600 dark:text-gray-400">
                        <i class="fas fa-calendar-check w-5"></i>
                        <span>${R(e.endDate)}</span>
                    </div>
                    <div class="flex items-center justify-between pt-2 border-t border-gray-200 dark:border-gray-700">
                        <span class="text-sm font-medium text-gray-900 dark:text-white">
                            <i class="fas fa-clock"></i> ${e.duration} jour(s)
                        </span>
                        <span class="px-2 py-1 text-xs rounded-full bg-green-100 dark:bg-green-900/30 text-green-800 dark:text-green-300">
                            Approuv√©
                        </span>
                    </div>
                </div>
            </div>
        </div>
    `}function vi(e){return`
        <div id="leave-approved-${e.id}" class="bg-white dark:bg-gray-800 rounded-lg shadow-md hover:shadow-lg transition-all duration-200 cursor-pointer border-l-4 border-green-500 leave-card" data-leave-id="${e.id}">
            <div class="p-4">
                <div class="flex items-center justify-between flex-wrap gap-4">
                    <div class="flex items-center space-x-4">
                        <div class="w-14 h-14 bg-gradient-to-r ${e.avatar} rounded-full flex items-center justify-center">
                            <i class="fas fa-user text-white text-xl"></i>
                        </div>
                        <div>
                            <h4 class="font-semibold text-gray-900 dark:text-white">${e.employeeName}</h4>
                            <div class="flex items-center gap-2 mt-1">
                                <span class="px-2 py-1 text-xs rounded-full bg-blue-100 dark:bg-blue-900/30 text-blue-800 dark:text-blue-300">
                                    ${e.department}
                                </span>
                                <span class="px-2 py-1 text-xs rounded-full bg-green-100 dark:bg-green-900/30 text-green-800 dark:text-green-300">
                                    ${e.leaveType}
                                </span>
                            </div>
                        </div>
                    </div>
                    <div class="flex items-center space-x-6 text-sm">
                        <div class="text-center">
                            <div class="text-gray-500 dark:text-gray-400 text-xs">D√©but</div>
                            <div class="font-medium text-gray-900 dark:text-white">${R(e.startDate)}</div>
                        </div>
                        <div class="text-gray-400 dark:text-gray-600">
                            <i class="fas fa-arrow-right"></i>
                        </div>
                        <div class="text-center">
                            <div class="text-gray-500 dark:text-gray-400 text-xs">Fin</div>
                            <div class="font-medium text-gray-900 dark:text-white">${R(e.endDate)}</div>
                        </div>
                        <div class="text-center">
                            <div class="text-gray-500 dark:text-gray-400 text-xs">Dur√©e</div>
                            <div class="font-medium text-gray-900 dark:text-white">${e.duration} jour(s)</div>
                        </div>
                        <div class="text-center">
                            <span class="px-3 py-1 text-xs rounded-full bg-green-100 dark:bg-green-900/30 text-green-800 dark:text-green-300">
                                Approuv√©
                            </span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    `}function xi(e){return`
        <div id="leave-rejected-${e.id}" class="bg-white dark:bg-gray-800 rounded-lg shadow-md hover:shadow-lg transition-all duration-200 cursor-pointer border-l-4 border-red-500 leave-card" data-leave-id="${e.id}">
            <div class="p-4">
                <div class="flex items-center space-x-3 mb-3">
                    <div class="w-12 h-12 bg-gradient-to-r ${e.avatar} rounded-full flex items-center justify-center">
                        <i class="fas fa-user text-white"></i>
                    </div>
                    <div class="flex-1 min-w-0">
                        <h4 class="font-semibold text-gray-900 dark:text-white truncate">${e.employeeName}</h4>
                        <span class="px-2 py-1 text-xs rounded-full bg-blue-100 dark:bg-blue-900/30 text-blue-800 dark:text-blue-300">
                            ${e.department}
                        </span>
                    </div>
                </div>
                <div class="mb-2">
                    <span class="px-2 py-1 text-xs rounded-full bg-red-100 dark:bg-red-900/30 text-red-800 dark:text-red-300">
                        ${e.leaveType}
                    </span>
                </div>
                <div class="space-y-2">
                    <div class="flex items-center text-sm text-gray-600 dark:text-gray-400">
                        <i class="fas fa-calendar-day w-5"></i>
                        <span>${R(e.startDate)}</span>
                    </div>
                    <div class="flex items-center text-sm text-gray-600 dark:text-gray-400">
                        <i class="fas fa-calendar-check w-5"></i>
                        <span>${R(e.endDate)}</span>
                    </div>
                    <div class="flex items-center justify-between pt-2 border-t border-gray-200 dark:border-gray-700">
                        <span class="text-sm font-medium text-gray-900 dark:text-white">
                            <i class="fas fa-clock"></i> ${e.duration} jour(s)
                        </span>
                        <span class="px-2 py-1 text-xs rounded-full bg-red-100 dark:bg-red-900/30 text-red-800 dark:text-red-300">
                            Refus√©
                        </span>
                    </div>
                    <div class="flex items-center justify-between pt-2">
                        <button class="revalidate-btn px-3 py-1 text-xs bg-blue-500 hover:bg-blue-600 text-white rounded-lg transition-colors" onclick="event.stopPropagation(); revalidateRequest(${e.id})">
                            <i class="fas fa-sync-alt mr-1"></i>Revalider
                        </button>
                    </div>
                </div>
            </div>
        </div>
    `}function wi(e){return`
        <div id="leave-rejected-${e.id}" class="bg-white dark:bg-gray-800 rounded-lg shadow-md hover:shadow-lg transition-all duration-200 cursor-pointer border-l-4 border-red-500 leave-card" data-leave-id="${e.id}">
            <div class="p-4">
                <div class="flex items-center justify-between flex-wrap gap-4">
                    <div class="flex items-center space-x-4">
                        <div class="w-14 h-14 bg-gradient-to-r ${e.avatar} rounded-full flex items-center justify-center">
                            <i class="fas fa-user text-white text-xl"></i>
                        </div>
                        <div>
                            <h4 class="font-semibold text-gray-900 dark:text-white">${e.employeeName}</h4>
                            <div class="flex items-center gap-2 mt-1">
                                <span class="px-2 py-1 text-xs rounded-full bg-blue-100 dark:bg-blue-900/30 text-blue-800 dark:text-blue-300">
                                    ${e.department}
                                </span>
                                <span class="px-2 py-1 text-xs rounded-full bg-red-100 dark:bg-red-900/30 text-red-800 dark:text-red-300">
                                    ${e.leaveType}
                                </span>
                            </div>
                        </div>
                    </div>
                    <div class="flex items-center space-x-6 text-sm">
                        <div class="text-center">
                            <div class="text-gray-500 dark:text-gray-400 text-xs">D√©but</div>
                            <div class="font-medium text-gray-900 dark:text-white">${R(e.startDate)}</div>
                        </div>
                        <div class="text-gray-400 dark:text-gray-600">
                            <i class="fas fa-arrow-right"></i>
                        </div>
                        <div class="text-center">
                            <div class="text-gray-500 dark:text-gray-400 text-xs">Fin</div>
                            <div class="font-medium text-gray-900 dark:text-white">${R(e.endDate)}</div>
                        </div>
                        <div class="text-center">
                            <div class="text-gray-500 dark:text-gray-400 text-xs">Dur√©e</div>
                            <div class="font-medium text-gray-900 dark:text-white">${e.duration} jour(s)</div>
                        </div>
                        <div class="text-center">
                            <span class="px-3 py-1 text-xs rounded-full bg-red-100 dark:bg-red-900/30 text-red-800 dark:text-red-300">
                                Refus√©
                            </span>
                        </div>
                    </div>
                    <button class="revalidate-btn px-4 py-2 bg-blue-500 hover:bg-blue-600 text-white rounded-lg transition-colors" onclick="event.stopPropagation(); revalidateRequest(${e.id})">
                        <i class="fas fa-sync-alt mr-1"></i>Revalider
                    </button>
                </div>
            </div>
        </div>
    `}function Ei(){const e=document.getElementById("gridViewBtnApproved"),t=document.getElementById("listViewBtnApproved");e&&t&&(e.onclick=function(){gt="grid",be("gridApproved");const s=Ne().filter(r=>r.status==="approved"),a=document.getElementById("approvedLeavesContainer");a&&(a.innerHTML=pn(s),Pe())},t.onclick=function(){gt="list",be("listApproved");const s=Ne().filter(r=>r.status==="approved"),a=document.getElementById("approvedLeavesContainer");a&&(a.innerHTML=pn(s),Pe())},be(gt==="grid"?"gridApproved":"listApproved"));const n=document.getElementById("gridViewBtnRejected"),o=document.getElementById("listViewBtnRejected");n&&o&&(n.onclick=function(){yt="grid",be("gridRejected");const s=Ne().filter(r=>r.status==="rejected"),a=document.getElementById("rejectedLeavesContainer");a&&(a.innerHTML=gn(s),Pe())},o.onclick=function(){yt="list",be("listRejected");const s=Ne().filter(r=>r.status==="rejected"),a=document.getElementById("rejectedLeavesContainer");a&&(a.innerHTML=gn(s),Pe())},be(yt==="grid"?"gridRejected":"listRejected"))}function be(e){const t=document.getElementById("gridViewBtnApproved"),n=document.getElementById("listViewBtnApproved"),o=document.getElementById("gridViewBtnRejected"),s=document.getElementById("listViewBtnRejected"),a="px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-colors duration-200 text-sm font-medium",r="px-4 py-2 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 dark:bg-gray-700 dark:text-gray-300 dark:hover:bg-gray-600 transition-colors duration-200 text-sm font-medium";e==="gridApproved"?(t&&(t.className=a),n&&(n.className=r)):e==="listApproved"?(t&&(t.className=r),n&&(n.className=a)):e==="gridRejected"?(o&&(o.className=a),s&&(s.className=r)):e==="listRejected"&&(o&&(o.className=r),s&&(s.className=a))}function Pe(){document.querySelectorAll(".leave-card").forEach(t=>{const n=t.cloneNode(!0);t.parentNode.replaceChild(n,t),n.addEventListener("click",function(o){if(o.target.closest(".revalidate-btn"))return;const s=parseInt(n.getAttribute("data-leave-id")),a=z.find(r=>r.id===s);a&&ki(a)})})}window.toggleSelectAll=function(){const e=document.querySelectorAll(".request-checkbox"),t=Array.from(e).every(o=>o.checked);e.forEach(o=>{o.checked=!t}),updateBulkActions();const n=document.getElementById("selectAllBtn");n&&(t?n.innerHTML='<i class="fas fa-check-square mr-2"></i>Tout s√©lectionner':n.innerHTML='<i class="fas fa-square mr-2"></i>Tout d√©s√©lectionner')};window.updateBulkActions=function(){const e=document.querySelectorAll(".request-checkbox:checked"),t=e.length;G.clear(),e.forEach(i=>{G.add(parseInt(i.dataset.requestId))});const n=document.getElementById("bulkActionsContainer"),o=document.getElementById("selectedCount");n&&o&&(t>0?(n.classList.remove("hidden"),n.classList.add("flex"),o.textContent=`${t} s√©lectionn√©${t>1?"s":""}`):(n.classList.add("hidden"),n.classList.remove("flex")));const s=document.querySelectorAll(".request-checkbox"),a=Array.from(s).every(i=>i.checked),r=document.getElementById("selectAllBtn");r&&s.length>0&&(a?r.innerHTML='<i class="fas fa-square mr-2"></i>Tout d√©s√©lectionner':r.innerHTML='<i class="fas fa-check-square mr-2"></i>Tout s√©lectionner')};window.bulkApprove=function(){if(G.size===0)return;const e=Array.from(G),t=z.filter(o=>e.includes(o.id)),n=t.map(o=>`‚Ä¢ ${o.employeeName} (${o.department}) - ${o.leaveType}`).join(`
`);confirm(`√ätes-vous s√ªr de vouloir approuver ces ${e.length} demande(s) ?

${n}`)&&(t.forEach(o=>{o.status="approved"}),bs("Demandes approuv√©es",`${e.length} demande(s) ont √©t√© approuv√©es avec succ√®s.`,"success"),G.clear(),jt())};window.bulkReject=function(){if(G.size===0)return;const e=Array.from(G),t=z.filter(o=>e.includes(o.id)),n=t.map(o=>`‚Ä¢ ${o.employeeName} (${o.department}) - ${o.leaveType}`).join(`
`);confirm(`√ätes-vous s√ªr de vouloir refuser ces ${e.length} demande(s) ?

${n}`)&&(t.forEach(o=>{o.status="rejected"}),bs("Demandes refus√©es",`${e.length} demande(s) ont √©t√© refus√©es.`,"error"),G.clear(),jt())};function ki(e){if(!document.getElementById("leaveDetailsModal")){console.error("Modal leaveDetailsModal introuvable");return}document.getElementById("leaveDetailsName").textContent=e.employeeName,document.getElementById("leaveDetailsType").textContent=e.leaveType,document.getElementById("leaveDetailsDepartment").textContent=e.department,document.getElementById("leaveDetailsStartDate").textContent=R(e.startDate),document.getElementById("leaveDetailsEndDate").textContent=R(e.endDate),document.getElementById("leaveDetailsDuration").textContent=e.duration+" jour(s)";const n=e.remainingBalance||Math.max(0,30-e.duration);document.getElementById("leaveDetailsBalance").textContent=n+" jours";const o=document.getElementById("leaveDetailsAvatar");o.className=`w-16 h-16 bg-gradient-to-r ${e.avatar} rounded-full flex items-center justify-center flex-shrink-0`;const s=document.getElementById("leaveDetailsTypeBadge");let a="bg-blue-500";e.leaveType.toLowerCase().includes("maladie")?a="bg-red-500":e.leaveType.toLowerCase().includes("maternit√©")?a="bg-pink-500":e.leaveType.toLowerCase().includes("paternit√©")?a="bg-blue-500":e.leaveType.toLowerCase().includes("formation")?a="bg-purple-500":e.leaveType.toLowerCase().includes("pay√©s")?a="bg-green-500":a="bg-yellow-500",s.className=`px-3 py-1 text-xs font-semibold rounded-full ${a} text-white`,s.textContent=e.leaveType,document.getElementById("leaveDetailsReason").textContent=e.reason;const r=document.getElementById("leaveDetailsStatusBadge");e.status==="approved"?(r.className="px-4 py-2 text-sm font-semibold rounded-lg bg-green-500 text-white",r.innerHTML='<i class="fas fa-check-circle mr-1"></i>Approuv√©'):e.status==="rejected"?(r.className="px-4 py-2 text-sm font-semibold rounded-lg bg-red-500 text-white",r.innerHTML='<i class="fas fa-times-circle mr-1"></i>Refus√©'):(r.className="px-4 py-2 text-sm font-semibold rounded-lg bg-yellow-500 text-white",r.innerHTML='<i class="fas fa-clock mr-1"></i>En attente'),Bi("leaveDetailsModal")}function bs(e,t,n){let o,s,a;n!==void 0?(o=e,s=t,a=n||"success"):(o=t==="success"?"Succ√®s":t==="error"?"Erreur":t==="warning"?"Attention":t==="info"?"Information":"Notification",s=e,a=t||"success");let r=document.getElementById("dynamic-toast-container");r||(r=document.createElement("div"),r.id="dynamic-toast-container",r.style.cssText="position: fixed; top: 20px; right: 20px; z-index: 9999;",document.body.appendChild(r));const i={success:{bg:"#10B981",icon:"fa-check-circle"},error:{bg:"#EF4444",icon:"fa-times-circle"},warning:{bg:"#F59E0B",icon:"fa-exclamation-triangle"},info:{bg:"#3B82F6",icon:"fa-info-circle"}},c=i[a]||i.success,l="toast-"+Date.now(),u=document.createElement("div");u.id=l,u.style.cssText=`
        background: white;
        border-left: 4px solid ${c.bg};
        border-radius: 8px;
        box-shadow: 0 4px 12px rgba(0,0,0,0.15);
        padding: 16px;
        margin-bottom: 10px;
        min-width: 320px;
        display: flex;
        align-items: center;
        gap: 12px;
        transform: translateX(400px);
        transition: transform 0.3s ease;
    `,u.innerHTML=`
        <div style="width: 32px; height: 32px; background: ${c.bg}20; border-radius: 50%; display: flex; align-items: center; justify-content: center;">
            <i class="fas ${c.icon}" style="color: ${c.bg};"></i>
        </div>
        <div style="flex: 1;">
            <div style="font-weight: 600; color: #111; margin-bottom: 4px;">${o}</div>
            <div style="font-size: 14px; color: #666;">${s}</div>
        </div>
        <button onclick="closeToast('${l}')" style="background: none; border: none; color: #999; cursor: pointer; font-size: 18px; padding: 0; width: 24px; height: 24px;">
            <i class="fas fa-times"></i>
        </button>
    `,r.appendChild(u),setTimeout(()=>{u.style.transform="translateX(0)"},10),setTimeout(()=>{Li(l)},4e3)}function Li(e){const t=document.getElementById(e);t&&(t.style.transform="translateX(400px)",setTimeout(()=>{t.remove()},300))}function Bi(e){const t=document.getElementById(e);t&&(t.classList.remove("hidden"),setTimeout(()=>{const n=t.querySelector(".backdrop"),o=t.querySelector(".modal");n&&n.classList.add("show"),o&&o.classList.add("show")},10))}function vs(e){const t=document.getElementById(e);if(!t)return;const n=t.querySelector(".backdrop"),o=t.querySelector(".modal");n&&n.classList.remove("show"),o&&o.classList.remove("show"),setTimeout(()=>{t.classList.add("hidden")},300)}document.addEventListener("click",function(e){e.target.classList.contains("backdrop")&&["confirmModal","detailsModal","leaveDetailsModal"].forEach(n=>{const o=document.getElementById(n);o&&!o.classList.contains("hidden")&&vs(n)})});document.addEventListener("keydown",function(e){e.key==="Escape"&&["confirmModal","detailsModal","leaveDetailsModal"].forEach(n=>{const o=document.getElementById(n);o&&!o.classList.contains("hidden")&&vs(n)})});function R(e){return new Date(e).toLocaleDateString("fr-FR",{day:"2-digit",month:"2-digit",year:"numeric"})}function Fi(){const e=document.getElementById("toggle-sidebar"),t=document.getElementById("close-sidebar"),n=document.getElementById("sidebar"),o=document.getElementById("sidebar-overlay");e&&e.addEventListener("click",function(){n&&n.classList.add("show"),o&&o.classList.add("show")}),t&&t.addEventListener("click",function(){n&&n.classList.remove("show"),o&&o.classList.remove("show")}),o&&o.addEventListener("click",function(){n&&n.classList.remove("show"),o.classList.remove("show")})}function Ti(){const e=document.getElementById("current-date");if(e){const t=new Date,n={weekday:"long",year:"numeric",month:"long",day:"numeric"};e.textContent=t.toLocaleDateString("fr-FR",n)}}document.addEventListener("DOMContentLoaded",function(){console.log("üöÄ Initialisation du Dashboard Super Admin..."),document.querySelectorAll(".animate-slide-up").forEach((t,n)=>{setTimeout(()=>{t.style.opacity="1",t.style.transform="translateY(0)"},n*100)}),pi(),fi(),Fi(),Ti(),console.log("‚ö†Ô∏è Th√®me et notifications g√©r√©s par config.js"),hs("all"),console.log("‚úÖ Dashboard Super Admin initialis√© avec succ√®s"),console.log("üìä Donn√©es charg√©es:",{total:z.length,departments:[...new Set(z.map(t=>t.department))].length,pending:z.filter(t=>t.status==="pending").length,approved:z.filter(t=>t.status==="approved").length,rejected:z.filter(t=>t.status==="rejected").length})});const Cn=[{id:"jean-dupont",name:"Jean Dupont",email:"j.dupont@email.com",phone:"+241 07 45 23 12",position:"developer",positionLabel:"D√©veloppeur",remainingLeave:25,status:"available",blocked:!1,photo:"https://images.unsplash.com/photo-1472099645785-5658abf4ff4e?w=40&h=40&fit=crop&crop=face"},{id:"marie-martin",name:"Marie Martin",email:"m.martin@email.com",phone:"+241 06 78 91 45",position:"designer",positionLabel:"Designer",remainingLeave:18,status:"on-leave",blocked:!1,photo:"https://images.unsplash.com/photo-1494790108755-2616b612b786?w=40&h=40&fit=crop&crop=face"},{id:"paul-bernard",name:"Paul Bernard",email:"p.bernard@email.com",phone:"+241 05 23 67 89",position:"manager",positionLabel:"Manager",remainingLeave:30,status:"available",blocked:!0,photo:"https://images.unsplash.com/photo-1507003211169-0a1dd7228f2d?w=40&h=40&fit=crop&crop=face"},{id:"sophie-durand",name:"Sophie Durand",email:"s.durand@email.com",phone:"+241 07 12 34 56",position:"developer",positionLabel:"D√©veloppeur",remainingLeave:22,status:"available",blocked:!1,photo:"https://images.unsplash.com/photo-1438761681033-6461ffad8d80?w=40&h=40&fit=crop&crop=face"},{id:"marc-petit",name:"Marc Petit",email:"m.petit@email.com",phone:"+241 06 89 45 23",position:"designer",positionLabel:"Designer",remainingLeave:15,status:"on-leave",blocked:!1,photo:"https://images.unsplash.com/photo-1500648767791-00dcc994a43e?w=40&h=40&fit=crop&crop=face"},{id:"claire-moreau",name:"Claire Moreau",email:"c.moreau@email.com",phone:"+241 05 67 89 12",position:"manager",positionLabel:"Manager",remainingLeave:28,status:"available",blocked:!1,photo:"https://images.unsplash.com/photo-1544005313-94ddf0286df2?w=40&h=40&fit=crop&crop=face"}],xs=[{id:"1",title:"Jean Dupont - Cong√©s pay√©s",start:"2025-10-15",end:"2025-10-21",backgroundColor:"#10b981",borderColor:"#10b981",extendedProps:{employeeId:"jean-dupont",employeeName:"Jean Dupont",leaveType:"vacation",leaveTypeLabel:"Cong√©s pay√©s",remainingLeave:3,photo:"https://images.unsplash.com/photo-1472099645785-5658abf4ff4e?w=40&h=40&fit=crop&crop=face"}},{id:"2",title:"Marie Martin - Maladie",start:"2025-10-18",end:"2025-10-20",backgroundColor:"#ef4444",borderColor:"#ef4444",extendedProps:{employeeId:"marie-martin",employeeName:"Marie Martin",leaveType:"sick",leaveTypeLabel:"Maladie",remainingLeave:2,photo:"https://images.unsplash.com/photo-1494790108755-2616b612b786?w=40&h=40&fit=crop&crop=face"}},{id:"3",title:"Paul Bernard - Paternit√©",start:"2025-10-22",end:"2025-10-25",backgroundColor:"#3b82f6",borderColor:"#3b82f6",extendedProps:{employeeId:"paul-bernard",employeeName:"Paul Bernard",leaveType:"training",leaveTypeLabel:"Paternit√©",remainingLeave:2,photo:"https://images.unsplash.com/photo-1507003211169-0a1dd7228f2d?w=40&h=40&fit=crop&crop=face"}},{id:"4",title:"Sophie Durand - Cong√©s pay√©s",start:"2025-10-10",end:"2025-10-14",backgroundColor:"#10b981",borderColor:"#10b981",extendedProps:{employeeId:"sophie-durand",employeeName:"Sophie Durand",leaveType:"vacation",leaveTypeLabel:"Cong√©s pay√©s",remainingLeave:3,photo:"https://images.unsplash.com/photo-1438761681033-6461ffad8d80?w=40&h=40&fit=crop&crop=face"}},{id:"5",title:"Marc Petit - Maternit√©",start:"2025-10-05",end:"2025-10-12",backgroundColor:"#ec4899",borderColor:"#ec4899",extendedProps:{employeeId:"marc-petit",employeeName:"Marc Petit",leaveType:"maternity",leaveTypeLabel:"Maternit√©",remainingLeave:6,photo:"https://images.unsplash.com/photo-1500648767791-00dcc994a43e?w=40&h=40&fit=crop&crop=face"}}];let yn="grid",Le=[...xs],P=1;const Oe=10;function $e(e){return new Date(e).toLocaleDateString("fr-FR",{day:"2-digit",month:"2-digit",year:"numeric"})}function In(e,t){const n=new Date(e),o=new Date(t),s=Math.abs(o-n);return Math.ceil(s/(1e3*60*60*24))}function $i(e){return{developer:"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200",designer:"bg-purple-100 text-purple-800 dark:bg-purple-900 dark:text-purple-200",manager:"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200"}[e]||"bg-gray-100 text-gray-800 dark:bg-gray-900 dark:text-gray-200"}function Ci(e){return e?"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200":"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200"}function Ii(e){return e?"Bloqu√©":"Actif"}function Si(){const e=document.getElementById("employeeCalendarFilter");e.innerHTML='<option value="">Tous les employ√©s</option>'+Cn.map(t=>`<option value="${t.id}">${t.name}</option>`).join("")}function bo(){const e=document.getElementById("employeeCalendarFilter").value,t=document.getElementById("leaveTypeCalendarFilter").value;Le=xs.filter(n=>{const o=!e||n.extendedProps.employeeId===e,s=!t||n.extendedProps.leaveType===t;return o&&s}),P=1,Ft()}function Ft(){const e=document.getElementById("leavesContainer");if(Le.length===0){e.innerHTML=`
            <div class="text-center py-12">
                <i class="fas fa-calendar-times text-6xl text-gray-300 dark:text-gray-600 mb-4"></i>
                <p class="text-gray-500 dark:text-gray-400">Aucun cong√© trouv√©</p>
            </div>
        `,document.getElementById("leavesPaginationInfo").textContent="",document.getElementById("leavesPaginationControls").innerHTML="";return}const t=(P-1)*Oe,n=t+Oe,o=Le.slice(t,n);yn==="grid"?(e.className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",e.innerHTML=o.map(s=>Di(s)).join("")):(e.className="space-y-4",e.innerHTML=o.map(s=>Mi(s)).join("")),o.forEach(s=>{const a=document.getElementById(`leave-${s.id}`);a&&a.addEventListener("click",()=>Ri(s))}),Ai()}function Ai(){const e=Math.ceil(Le.length/Oe),t=(P-1)*Oe+1,n=Math.min(P*Oe,Le.length);document.getElementById("leavesPaginationInfo").textContent=`Affichage de ${t} √† ${n} sur ${Le.length} cong√©s`;const o=document.getElementById("leavesPaginationControls");o.innerHTML=`
        <button onclick="changeLeavesPage(${P-1})"
                ${P===1?"disabled":""}
                class="px-3 py-1 text-sm bg-gray-200 text-gray-700 rounded hover:bg-gray-300
                       dark:bg-gray-700 dark:text-gray-300 dark:hover:bg-gray-600
                       ${P===1?"opacity-50 cursor-not-allowed":""}">
            Pr√©c√©dent
        </button>
        ${Array.from({length:e},(s,a)=>a+1).map(s=>`
            <button onclick="changeLeavesPage(${s})"
                    class="px-3 py-1 text-sm rounded
                           ${s===P?"bg-blue-500 text-white":"bg-gray-200 text-gray-700 hover:bg-gray-300 dark:bg-gray-700 dark:text-gray-300 dark:hover:bg-gray-600"}">
                ${s}
            </button>
        `).join("")}
        <button onclick="changeLeavesPage(${P+1})"
                ${P===e?"disabled":""}
                class="px-3 py-1 text-sm bg-gray-200 text-gray-700 rounded hover:bg-gray-300
                       dark:bg-gray-700 dark:text-gray-300 dark:hover:bg-gray-600
                       ${P===e?"opacity-50 cursor-not-allowed":""}">
            Suivant
        </button>
    `}function Di(e){const t=e.extendedProps,n=In(e.start,e.end);return`
        <div id="leave-${e.id}" class="bg-white dark:bg-gray-800 rounded-lg shadow-md hover:shadow-lg transition-all duration-200 cursor-pointer border-l-4" style="border-left-color: ${e.backgroundColor};">
            <div class="p-4">
                <div class="flex items-center space-x-3 mb-3">
                    <img src="${t.photo}" alt="${t.employeeName}" class="w-12 h-12 rounded-full object-cover">
                    <div class="flex-1 min-w-0">
                        <h4 class="font-semibold text-gray-900 dark:text-white truncate">${t.employeeName}</h4>
                        <span class="px-2 py-1 text-xs rounded-full text-white" style="background-color: ${e.backgroundColor}">
                            ${t.leaveTypeLabel}
                        </span>
                    </div>
                </div>
                <div class="space-y-2">
                    <div class="flex items-center text-sm text-gray-600 dark:text-gray-400">
                        <i class="fas fa-calendar-day w-5"></i>
                        <span>${$e(e.start)}</span>
                    </div>
                    <div class="flex items-center text-sm text-gray-600 dark:text-gray-400">
                        <i class="fas fa-calendar-check w-5"></i>
                        <span>${$e(e.end)}</span>
                    </div>
                    <div class="flex items-center justify-between pt-2 border-t border-gray-200 dark:border-gray-700">
                        <span class="text-sm font-medium text-gray-900 dark:text-white">
                            <i class="fas fa-clock"></i> ${n} jour(s)
                        </span>
                        <span class="text-xs text-gray-500 dark:text-gray-400">
                            Solde: ${t.remainingLeave}j
                        </span>
                    </div>
                </div>
            </div>
        </div>
    `}function Mi(e){const t=e.extendedProps,n=In(e.start,e.end);return`
        <div id="leave-${e.id}" class="bg-white dark:bg-gray-800 rounded-lg shadow-md hover:shadow-lg transition-all duration-200 cursor-pointer border-l-4" style="border-left-color: ${e.backgroundColor};">
            <div class="p-4">
                <div class="flex items-center justify-between flex-wrap gap-4">
                    <div class="flex items-center space-x-4">
                        <img src="${t.photo}" alt="${t.employeeName}" class="w-14 h-14 rounded-full object-cover">
                        <div>
                            <h4 class="font-semibold text-gray-900 dark:text-white">${t.employeeName}</h4>
                            <span class="px-2 py-1 text-xs rounded-full text-white" style="background-color: ${e.backgroundColor}">
                                ${t.leaveTypeLabel}
                            </span>
                        </div>
                    </div>
                    <div class="flex items-center space-x-6 text-sm">
                        <div class="text-center">
                            <div class="text-gray-500 dark:text-gray-400 text-xs">D√©but</div>
                            <div class="font-medium text-gray-900 dark:text-white">${$e(e.start)}</div>
                        </div>
                        <div class="text-gray-400 dark:text-gray-600">
                            <i class="fas fa-arrow-right"></i>
                        </div>
                        <div class="text-center">
                            <div class="text-gray-500 dark:text-gray-400 text-xs">Fin</div>
                            <div class="font-medium text-gray-900 dark:text-white">${$e(e.end)}</div>
                        </div>
                        <div class="text-center">
                            <div class="text-gray-500 dark:text-gray-400 text-xs">Dur√©e</div>
                            <div class="font-medium text-gray-900 dark:text-white">${n} jour(s)</div>
                        </div>
                        <div class="text-center">
                            <div class="text-gray-500 dark:text-gray-400 text-xs">Solde</div>
                            <div class="font-medium text-gray-900 dark:text-white">${t.remainingLeave}j</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    `}function vo(e){const t=document.getElementById("gridViewBtn"),n=document.getElementById("listViewBtn");t.className=e==="grid"?"px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-colors duration-200 text-sm font-medium":"px-4 py-2 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 dark:bg-gray-700 dark:text-gray-300 dark:hover:bg-gray-600 transition-colors duration-200 text-sm font-medium",n.className=e==="list"?"px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-colors duration-200 text-sm font-medium":"px-4 py-2 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 dark:bg-gray-700 dark:text-gray-300 dark:hover:bg-gray-600 transition-colors duration-200 text-sm font-medium"}function Ri(e){const t=e.extendedProps,n=document.getElementById("modalContent");n.innerHTML=`
        <div class="flex items-center space-x-4 mb-4">
            <img src="${t.photo}" alt="${t.employeeName}" class="w-12 h-12 rounded-full object-cover">
            <div>
                <h4 class="font-semibold text-gray-900 dark:text-white">${t.employeeName}</h4>
                <p class="text-sm text-gray-500 dark:text-gray-400">${t.leaveTypeLabel}</p>
            </div>
        </div>
        <div class="space-y-3">
            <div class="flex justify-between">
                <span class="text-gray-600 dark:text-gray-400">Date de d√©but:</span>
                <span class="font-medium text-gray-900 dark:text-white">${$e(e.start)}</span>
            </div>
            <div class="flex justify-between">
                <span class="text-gray-600 dark:text-gray-400">Date de fin:</span>
                <span class="font-medium text-gray-900 dark:text-white">${$e(e.end)}</span>
            </div>
            <div class="flex justify-between">
                <span class="text-gray-600 dark:text-gray-400">Dur√©e:</span>
                <span class="font-medium text-gray-900 dark:text-white">${In(e.start,e.end)} jour(s)</span>
            </div>
            <div class="flex justify-between">
                <span class="text-gray-600 dark:text-gray-400">Solde restant:</span>
                <span class="font-medium text-gray-900 dark:text-white">${t.remainingLeave} jours</span>
            </div>
            <div class="flex justify-between">
                <span class="text-gray-600 dark:text-gray-400">Type de cong√©:</span>
                <span class="px-2 py-1 text-xs rounded-full text-white" style="background-color: ${e.backgroundColor}">${t.leaveTypeLabel}</span>
            </div>
        </div>
    `,document.getElementById("leaveModal").classList.remove("hidden")}function ht(){document.getElementById("leaveModal").classList.add("hidden")}function Ni(){document.getElementById("employeeCalendarFilter").addEventListener("change",bo),document.getElementById("leaveTypeCalendarFilter").addEventListener("change",bo),document.getElementById("gridViewBtn").addEventListener("click",()=>{yn="grid",vo("grid"),Ft()}),document.getElementById("listViewBtn").addEventListener("click",()=>{yn="list",vo("list"),Ft()}),document.getElementById("closeModal").addEventListener("click",ht),document.getElementById("leaveModal").addEventListener("click",e=>{e.target===e.currentTarget&&ht()}),document.addEventListener("keydown",e=>{e.key==="Escape"&&!document.getElementById("leaveModal").classList.contains("hidden")&&ht()})}let j=1;const _e=5;let He=[...Cn];function ws(){const e=document.getElementById("employeeTableBody"),t=(j-1)*_e,n=t+_e,o=He.slice(t,n);e.innerHTML=o.map(s=>`
        <tr class="hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors duration-200">
            <td class="px-6 py-4 whitespace-nowrap">
                <div class="flex items-center">
                    <img class="h-10 w-10 rounded-full object-cover" src="${s.photo}" alt="Profile">
                    <div class="ml-4">
                        <div class="text-sm font-medium text-gray-900 dark:text-white">${s.name}</div>
                        <div class="text-sm text-gray-500 dark:text-gray-400">${s.email}</div>
                    </div>
                </div>
            </td>
            <td class="px-6 py-4 whitespace-nowrap">
                <span class="px-2 py-1 text-xs font-medium rounded-full ${$i(s.position)}">
                    ${s.positionLabel}
                </span>
            </td>
            <td class="px-6 py-4 whitespace-nowrap">
                <div class="text-sm text-gray-900 dark:text-white">
                    <i class="fas fa-phone text-gray-400 mr-2"></i>${s.phone}
                </div>
            </td>
            <td class="px-6 py-4 whitespace-nowrap">
                <span class="px-2 py-1 text-xs font-medium rounded-full ${Ci(s.blocked)}">
                    ${Ii(s.blocked)}
                </span>
            </td>
            <td class="px-6 py-4 whitespace-nowrap text-right text-sm font-medium">
                <button class="text-indigo-600 hover:text-indigo-900 dark:text-indigo-400 dark:hover:text-indigo-300 mr-3"
                        onclick="viewEmployee('${s.id}')" title="Voir d√©tails">
                        <i class="fas fa-eye"></i>
                </button>
                <button class="text-${s.blocked?"green":"red"}-600 hover:text-${s.blocked?"green":"red"}-900 dark:text-${s.blocked?"green":"red"}-400 dark:hover:text-${s.blocked?"green":"red"}-300"
                        onclick="toggleBlockEmployee('${s.id}')" title="${s.blocked?"D√©bloquer":"Bloquer"}">
                        <i class="fas fa-${s.blocked?"unlock":"lock"}"></i>
                </button>
            </td>
        </tr>
    `).join(""),Pi()}function Pi(){const e=Math.ceil(He.length/_e),t=(j-1)*_e+1,n=Math.min(j*_e,He.length);document.getElementById("paginationInfo").textContent=`Affichage de ${t} √† ${n} sur ${He.length} employ√©s`;const o=document.getElementById("paginationControls");o.innerHTML=`
        <button onclick="changePage(${j-1})"
                ${j===1?"disabled":""}
                class="px-3 py-1 text-sm bg-gray-200 text-gray-700 rounded hover:bg-gray-300
                       dark:bg-gray-700 dark:text-gray-300 dark:hover:bg-gray-600
                       ${j===1?"opacity-50 cursor-not-allowed":""}">
            Pr√©c√©dent
        </button>
        ${Array.from({length:e},(s,a)=>a+1).map(s=>`
            <button onclick="changePage(${s})"
                    class="px-3 py-1 text-sm rounded
                           ${s===j?"bg-blue-500 text-white":"bg-gray-200 text-gray-700 hover:bg-gray-300 dark:bg-gray-700 dark:text-gray-300 dark:hover:bg-gray-600"}">
                ${s}
            </button>
        `).join("")}
        <button onclick="changePage(${j+1})"
                ${j===e?"disabled":""}
                class="px-3 py-1 text-sm bg-gray-200 text-gray-700 rounded hover:bg-gray-300
                       dark:bg-gray-700 dark:text-gray-300 dark:hover:bg-gray-600
                       ${j===e?"opacity-50 cursor-not-allowed":""}">
            Suivant
        </button>
    `}function xo(){const e=document.getElementById("searchEmployee").value.toLowerCase(),t=document.getElementById("positionFilter").value;He=Cn.filter(n=>{const o=n.name.toLowerCase().includes(e)||n.email.toLowerCase().includes(e),s=!t||n.position===t;return o&&s}),j=1,ws()}function Qt(){document.getElementById("employeeModal").classList.add("hidden")}document.addEventListener("DOMContentLoaded",function(){Si(),Ni(),Ft(),ws(),document.getElementById("searchEmployee").addEventListener("input",xo),document.getElementById("positionFilter").addEventListener("change",xo),document.getElementById("closeEmployeeModal").addEventListener("click",Qt),document.getElementById("employeeModal").addEventListener("click",e=>{e.target===e.currentTarget&&Qt()}),document.addEventListener("keydown",e=>{e.key==="Escape"&&(document.getElementById("employeeModal").classList.contains("hidden")||Qt(),document.getElementById("leaveModal").classList.contains("hidden")||ht())})});try{const e=new Notyf({duration:4e3,position:{x:"right",y:"top"},dismissible:!0,types:[{type:"success",background:"linear-gradient(135deg, #10b981 0%, #059669 100%)",icon:{className:"fas fa-check",tagName:"i"}},{type:"info",background:"linear-gradient(135deg, #3b82f6 0%, #1d4ed8 100%)",icon:{className:"fas fa-info-circle",tagName:"i"}},{type:"warning",background:"linear-gradient(135deg, #f59e0b 0%, #d97706 100%)",icon:{className:"fas fa-exclamation-triangle",tagName:"i"}},{type:"error",background:"linear-gradient(135deg, #ef4444 0%, #b91c1c 100%)",icon:{className:"fas fa-times-circle",tagName:"i"}}]})}catch(e){console.warn("Notyf non disponible ou erreur d'initialisation:",e),window.notyf={success:t=>console.log("SUCCESS:",t),info:t=>console.log("INFO:",t),error:t=>console.log("ERROR:",t)}}let wo=!0;function Eo(){const e=new Date,t={weekday:"long",year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit",second:"2-digit"},n=document.getElementById("current-date");n&&(n.textContent=e.toLocaleString("fr-FR",t))}function Sn(e,t="fas fa-check",n="success"){const o=document.getElementById("notification-token");if(!o)return;const s=document.getElementById("token-text"),a=document.getElementById("token-icon");s&&(s.textContent=e),a&&(a.className=t);const r={success:"from-green-500 to-emerald-500",info:"from-blue-500 to-cyan-500",warning:"from-yellow-500 to-orange-500",error:"from-red-500 to-pink-500"};o.className=`notification-token glass-effect text-white px-6 py-3 rounded-2xl shadow-2xl bg-gradient-to-r ${r[n]||r.success}`,o.classList.add("show"),setTimeout(()=>{o.classList.remove("show")},4e3)}function ji(){const e=localStorage.getItem("theme")||"light";document.documentElement.className=e==="dark"?"dark h-full":"h-full"}function ko(){const t=document.documentElement.classList.contains("dark")?"light":"dark";document.documentElement.className=t==="dark"?"dark h-full":"h-full",localStorage.setItem("theme",t)}function qi(){const e=document.getElementById("sidebar"),t=document.getElementById("sidebar-overlay");!e||!t||(e.classList.toggle("show"),t.classList.toggle("show"))}function en(){const e=document.getElementById("sidebar"),t=document.getElementById("sidebar-overlay");!e||!t||(e.classList.remove("show"),t.classList.remove("show"))}function Lo(){const e=document.getElementById("notifications-dropdown");e&&e.classList.toggle("show")}document.addEventListener("DOMContentLoaded",function(){ji(),Eo(),setInterval(Eo,1e3),wo&&setTimeout(()=>{Sn("Bienvenue sur Graxel Tech","fas fa-rocket","success"),window.notyf&&notyf.success&&notyf.success("Bienvenue Jean Martin ! Tableau de bord charg√© avec succ√®s."),wo=!1},1e3);const e=document.getElementById("theme-toggle");e&&e.addEventListener("click",ko);const t=document.getElementById("toggle-sidebar");t&&t.addEventListener("click",qi);const n=document.getElementById("close-sidebar");n&&n.addEventListener("click",en);const o=document.getElementById("sidebar-overlay");o&&o.addEventListener("click",en);const s=document.getElementById("notifications-btn");s&&s.addEventListener("click",function(g){g.stopPropagation(),Lo()}),document.addEventListener("click",function(g){const v=document.getElementById("notifications-dropdown"),h=document.getElementById("notifications-btn");!v||!h||!v.contains(g.target)&&!h.contains(g.target)&&v.classList.remove("show")});const a=document.getElementById("new-request-btn");a&&a.addEventListener("click",function(){console.log("Nouvelle demande cliqu√©e")});const r=document.getElementById("calendar-btn");r&&r.addEventListener("click",function(){console.log("Calendrier cliqu√©")});const i=document.getElementById("reports-btn");i&&i.addEventListener("click",function(){console.log("Rapports cliqu√©")});const c=document.getElementById("team-btn");c&&c.addEventListener("click",function(){console.log("√âquipe cliqu√©e")});const l=document.querySelectorAll(".nav-item");l&&l.length&&l.forEach(g=>{g.addEventListener("click",function(v){v.preventDefault();const h=this.getAttribute("href");h&&h!=="#"&&setTimeout(()=>{window.location.href=h},300)})});const u=document.querySelectorAll(".demand-item");u&&u.length&&u.forEach(g=>{g.addEventListener("click",function(){console.log("Demande consult√©e")})});const f=document.querySelectorAll('span[class*="bg-yellow-100"], span[class*="bg-green-500"], span[class*="bg-red-500"]');f&&f.length&&f.forEach(g=>{g.addEventListener("click",function(v){v.stopPropagation(),console.log("Badge cliqu√©")})});const b=document.querySelectorAll('[class*="bg-green-100"]');b&&b.length&&b.forEach(g=>{g.addEventListener("click",function(){console.log("Date cliqu√©e")})});const w={threshold:.1,rootMargin:"0px 0px -50px 0px"},m=new IntersectionObserver(g=>{g.forEach(v=>{v.isIntersecting&&(v.target.style.animationDelay="0s",v.target.classList.add("animate-fade-in"))})},w),y=document.querySelectorAll('[class*="animate-slide-up"]');y&&y.length&&y.forEach(g=>{m.observe(g)});const p=document.querySelectorAll(".hover-lift");if(p&&p.length&&p.forEach(g=>{g.addEventListener("mouseenter",function(){this.style.transform="translateY(-8px) scale(1.02)",this.style.boxShadow="0 25px 50px rgba(0,0,0,0.15)"}),g.addEventListener("mouseleave",function(){this.style.transform="",this.style.boxShadow=""})}),document.addEventListener("keydown",function(g){if((g.ctrlKey||g.metaKey)&&(g.key==="d"||g.key==="D")&&(g.preventDefault(),ko()),(g.ctrlKey||g.metaKey)&&(g.key==="n"||g.key==="N")){g.preventDefault();const v=document.getElementById("new-request-btn");v&&v.click()}if((g.ctrlKey||g.metaKey)&&(g.key==="k"||g.key==="K")&&(g.preventDefault(),Lo()),g.key==="Escape"){en();const v=document.getElementById("notifications-dropdown");v&&v.classList.remove("show")}}),document.querySelectorAll("button").forEach(g=>{g.addEventListener("click",function(v){const h=document.createElement("span"),E=this.getBoundingClientRect(),L=Math.max(E.width,E.height),D=v.clientX-E.left-L/2,C=v.clientY-E.top-L/2;h.style.cssText=`
                position: absolute;
                width: ${L}px;
                height: ${L}px;
                left: ${D}px;
                top: ${C}px;
                background: rgba(255, 255, 255, 0.3);
                border-radius: 50%;
                transform: scale(0);
                animation: ripple 0.6s linear;
                pointer-events: none;
                z-index: 9999;
            `,this.style.position=this.style.position||"relative",this.style.overflow="hidden",this.appendChild(h),setTimeout(()=>{h.remove()},600)})}),!document.getElementById("ripple-style")){const g=document.createElement("style");g.id="ripple-style",g.textContent=`
            @keyframes ripple {
                to {
                    transform: scale(4);
                    opacity: 0;
                }
            }
        `,document.head.appendChild(g)}y&&y.length&&y.forEach((g,v)=>{setTimeout(()=>{g.style.opacity="1",g.style.transform="translateY(0)"},v*100)}),document.querySelectorAll('a[href^="#"]').forEach(g=>{g.addEventListener("click",function(v){v.preventDefault();const h=document.querySelector(this.getAttribute("href"));h&&h.scrollIntoView({behavior:"smooth",block:"start"})})}),document.querySelectorAll('[class*="fas fa-"]').forEach(g=>{const v=g.className.split("fa-");g.title=v[1]?v[1].replace("-"," "):"Action"}),console.log("üöÄ Graxel Tech Dashboard initialized successfully!")});window.addEventListener("resize",function(){const e=document.getElementById("sidebar"),t=document.getElementById("sidebar-overlay");!e||!t||window.innerWidth>=768&&(e.classList.remove("show"),t.classList.remove("show"))});"serviceWorker"in navigator&&window.addEventListener("load",function(){console.log("üí° Service Worker support detected")});tailwind.config={darkMode:"class",theme:{extend:{fontFamily:{poppins:["Poppins","sans-serif"]},animation:{"fade-in":"fadeIn 0.8s cubic-bezier(0.4, 0, 0.2, 1)","slide-up":"slideUp 0.8s cubic-bezier(0.4, 0, 0.2, 1)","slide-right":"slideRight 0.6s cubic-bezier(0.4, 0, 0.2, 1)","bounce-subtle":"bounceSubtle 1.2s ease-out","pulse-ring":"pulseRing 2s cubic-bezier(0.455, 0.03, 0.515, 0.955) infinite",float:"float 6s ease-in-out infinite",glow:"glow 2s ease-in-out infinite alternate",shimmer:"shimmer 2s linear infinite"},backgroundImage:{"gradient-radial":"radial-gradient(var(--tw-gradient-stops))","gradient-conic":"conic-gradient(from 180deg at 50% 50%, var(--tw-gradient-stops))"}}}};document.addEventListener("DOMContentLoaded",function(){const e=document.getElementById("btn-nouvelle-demande"),t=document.getElementById("popup-nouvelle-demande"),n=document.getElementById("close-popup"),o=document.getElementById("annuler-demande"),s=document.getElementById("soumettre-demande");e&&t&&e.addEventListener("click",()=>{t.classList.remove("hidden")});function a(){t&&t.classList.add("hidden")}n&&n.addEventListener("click",a),o&&o.addEventListener("click",a),t&&t.addEventListener("click",i=>{i.target===t&&a()}),s&&s.addEventListener("click",()=>{Sn("Demande soumise avec succ√®s","fas fa-check","success"),window.notyf&&notyf.success&&notyf.success("Votre demande de cong√© a √©t√© soumise pour validation"),a()}),document.querySelectorAll('.gradient-bg, a[href*="calendrier"], a[href*="rapports"], a[href*="equipe"]').forEach(i=>{i.addEventListener("click",function(c){const l=this.getAttribute("href");(!l||l==="#")&&c.preventDefault()})})});window.addEventListener("load",function(){const e=document.getElementById("loader"),t=document.getElementById("mainContent");setTimeout(()=>{e.classList.add("hide"),setTimeout(()=>{e.style.display="none",t.classList.add("show")},500)},3e3)});const rt=document.getElementById("themeToggle");if(rt){const e=document.body;let t="dark";rt.addEventListener("click",()=>{t==="light"?(e.removeAttribute("data-theme"),rt.innerHTML='<i class="fas fa-moon"></i>',t="dark"):(e.setAttribute("data-theme","light"),rt.innerHTML='<i class="fas fa-sun"></i>',t="light")})}const tn=document.getElementById("passwordToggle"),it=document.getElementById("password");tn&&it&&tn.addEventListener("click",()=>{const e=tn.querySelector("i");it.type==="password"?(it.type="text",e.className="fas fa-eye-slash"):(it.type="password",e.className="fas fa-eye")});const Re=document.querySelectorAll(".role-option"),nn=document.querySelectorAll(".role-radio");Re.length&&nn.length&&(Re.forEach((e,t)=>{e.addEventListener("click",()=>{Re.forEach(n=>n.classList.remove("selected")),e.classList.add("selected"),nn[t].checked=!0})}),nn.forEach((e,t)=>{e.addEventListener("change",()=>{e.checked&&(Re.forEach(n=>n.classList.remove("selected")),Re[t].classList.add("selected"))})}));const Bo=document.getElementById("loginForm");Bo&&Bo.addEventListener("submit",e=>{e.preventDefault();const t=document.getElementById("email").value,n=document.getElementById("password").value,o=document.querySelector('input[name="role"]:checked');if(!o){alert("Veuillez s√©lectionner un r√¥le");return}console.log("Connexion:",{email:t,password:n,role:o.value}),alert(`Connexion en cours...
Email: ${t}
R√¥le: ${o.value}`)});const Oi=document.querySelectorAll(".form-input");Oi.forEach(e=>{e.addEventListener("focus",()=>{e.style.transform="translateY(-2px)"}),e.addEventListener("blur",()=>{e.style.transform=""})});document.addEventListener("DOMContentLoaded",function(){let e=!1;const t=document.getElementById("edit-profile-btn");if(!t)return;t.addEventListener("click",function(){e=!0,s()});const n=document.getElementById("cancel-edit-btn");n&&n.addEventListener("click",function(){e=!1,s(),a()});const o=document.getElementById("profile-form");o&&o.addEventListener("submit",function(r){r.preventDefault();const i=new FormData(this);console.log("Donn√©es du profil √† sauvegarder:");for(let[c,l]of i.entries())console.log(c+":",l);e=!1,s(),Sn("Profil sauvegard√©","fas fa-save","success"),window.notyf&&notyf.success&&notyf.success("Vos informations ont √©t√© mises √† jour avec succ√®s")});function s(){const r=["lastname","firstname","email","phone","profession"],i=document.getElementById("form-actions"),c=document.getElementById("edit-profile-btn");r.forEach(l=>{const u=document.getElementById(l);u&&(u.readOnly=!e,e?(u.classList.remove("bg-gray-50","dark:bg-gray-700"),u.classList.add("bg-white","dark:bg-gray-800")):(u.classList.add("bg-gray-50","dark:bg-gray-700"),u.classList.remove("bg-white","dark:bg-gray-800")))}),i&&(e?(i.classList.remove("hidden"),c&&(c.style.display="none")):(i.classList.add("hidden"),c&&(c.style.display="block")))}function a(){Object.entries({lastname:"Martin",firstname:"Jean",email:"jean.martin@graxel.com",phone:"+33 6 12 34 56 78",profession:"D√©veloppeur Full Stack"}).forEach(([i,c])=>{const l=document.getElementById(i);l&&(l.value=c)})}});document.addEventListener("DOMContentLoaded",function(){const e=document.getElementById("popup-nouvelle-demande");e&&(window.openPopup=function(){e.classList.add("show")},window.closePopup=function(){e.classList.remove("show")})});const _i=document.getElementById("btn-nouvelle-demande"),Je=document.getElementById("popup-nouvelle-demande"),Hi=document.getElementById("close-popup"),Ui=document.getElementById("annuler-demande");document.getElementById("soumettre-demande");function Vi(){Je.classList.remove("hidden"),document.body.style.overflow="hidden"}function qt(){Je.classList.add("hidden"),document.body.style.overflow="auto"}_i?.addEventListener("click",Vi);Hi?.addEventListener("click",qt);Ui?.addEventListener("click",qt);Je?.addEventListener("click",function(e){e.target===Je&&qt()});document.addEventListener("keydown",function(e){e.key==="Escape"&&!Je.classList.contains("hidden")&&qt()});document.getElementById("open-document-upload")?.addEventListener("click",function(){const e=document.getElementById("selected-document-info"),t=document.getElementById("document-name"),n=document.getElementById("document-size");t.textContent="certificat_medical.pdf",n.textContent="245 KB",e.classList.remove("hidden")});document.getElementById("remove-document")?.addEventListener("click",function(){document.getElementById("selected-document-info").classList.add("hidden")});document.addEventListener("DOMContentLoaded",function(){const e=document.getElementById("open-document-upload"),t=document.getElementById("document-upload-popup"),n=document.getElementById("document-popup-content"),o=document.getElementById("close-document-popup-btn"),s=document.getElementById("document-cancel-btn"),a=document.getElementById("document-confirm-btn"),r=document.getElementById("document-upload-zone"),i=document.getElementById("document-file-input"),c=document.getElementById("document-preview"),l=document.getElementById("selected-document-info"),u=document.getElementById("document-name"),f=document.getElementById("document-size"),b=document.getElementById("remove-document");let w=null;e.addEventListener("click",function(){t.classList.remove("hidden"),t.classList.add("flex"),setTimeout(()=>{n.classList.remove("scale-95","opacity-0"),n.classList.add("scale-100","opacity-100")},10)});function m(){n.classList.remove("scale-100","opacity-100"),n.classList.add("scale-95","opacity-0"),setTimeout(()=>{t.classList.add("hidden"),t.classList.remove("flex")},300),w=null,i.value="",a.disabled=!0,g()}o.addEventListener("click",m),s.addEventListener("click",m),r.addEventListener("click",function(){i.click()}),r.addEventListener("dragover",function(h){h.preventDefault(),r.classList.add("border-blue-500","bg-blue-50","dark:bg-blue-900/10")}),r.addEventListener("dragleave",function(h){h.preventDefault(),r.classList.remove("border-blue-500","bg-blue-50","dark:bg-blue-900/10")}),r.addEventListener("drop",function(h){h.preventDefault(),r.classList.remove("border-blue-500","bg-blue-50","dark:bg-blue-900/10");const E=h.dataTransfer.files;E.length>0&&y(E[0])}),i.addEventListener("change",function(h){h.target.files.length>0&&y(h.target.files[0])});function y(h){if(h.size>10*1024*1024){alert("Le fichier est trop volumineux. Taille maximale : 10MB");return}if(!["application/pdf","application/msword","application/vnd.openxmlformats-officedocument.wordprocessingml.document","image/jpeg","image/jpg","image/png","image/gif","text/plain"].includes(h.type)){alert("Type de fichier non autoris√©. Formats accept√©s : PDF, DOC, DOCX, JPG, PNG, GIF, TXT");return}w=h,p(h),a.disabled=!1}function p(h){const E=h.type;let L="fas fa-file-alt";E.includes("pdf")?L="fas fa-file-pdf":E.includes("word")||E.includes("document")?L="fas fa-file-word":E.includes("image")?L="fas fa-file-image":E.includes("text")&&(L="fas fa-file-alt"),c.innerHTML=`<i class="${L} text-3xl"></i>`}function g(){c.innerHTML='<i class="fas fa-file-alt text-3xl"></i>'}a.addEventListener("click",function(){w&&(u.textContent=w.name,f.textContent=v(w.size),l.classList.remove("hidden"),e.innerHTML=`
                <i class="fas fa-file-check text-green-600 dark:text-green-400"></i>
                <span class="text-green-700 dark:text-green-300">Document s√©lectionn√©</span>
            `,m())}),b.addEventListener("click",function(){w=null,l.classList.add("hidden"),e.innerHTML=`
            <i class="fas fa-file-upload text-gray-600 dark:text-gray-400"></i>
            <span class="text-gray-700 dark:text-gray-300">T√©l√©verser un document</span>
        `});function v(h){if(h===0)return"0 Bytes";const E=1024,L=["Bytes","KB","MB","GB"],D=Math.floor(Math.log(h)/Math.log(E));return parseFloat((h/Math.pow(E,D)).toFixed(2))+" "+L[D]}});document.addEventListener("DOMContentLoaded",function(){document.querySelectorAll(".animate-slide-up").forEach((t,n)=>{setTimeout(()=>{t.style.opacity="1",t.style.transform="translateY(0)"},n*100)}),zi()});function zi(){const e=document.getElementById("demandesChart").getContext("2d");new Chart(e,{type:"line",data:{labels:["Jan","F√©v","Mar","Avr","Mai","Jun","Jul","Ao√ª","Sep"],datasets:[{label:"Demandes",data:[12,19,15,25,22,18,28,24,20],borderColor:"rgb(59, 130, 246)",backgroundColor:"rgba(59, 130, 246, 0.1)",tension:.4,fill:!0}]},options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!1}},scales:{y:{beginAtZero:!0,grid:{color:"rgba(156, 163, 175, 0.2)"}},x:{grid:{color:"rgba(156, 163, 175, 0.2)"}}}}});const t=document.getElementById("typesChart").getContext("2d");new Chart(t,{type:"doughnut",data:{labels:["Cong√©s pay√©s","Maladie","Paternit√©","Maternit√©","Autres"],datasets:[{data:[45,25,15,10,5],backgroundColor:["rgb(59, 130, 246)","rgb(239, 68, 68)","rgb(139, 92, 246)","rgb(236, 72, 153)","rgba(5, 185, 95, 1)"]}]},options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"bottom"}}}});const n=document.getElementById("approvalChart").getContext("2d");new Chart(n,{type:"bar",data:{labels:["Avr","Mai","Jun","Jul","Ao√ª","Sep"],datasets:[{label:"Taux d'approbation",data:[85,88,82,90,87,87],backgroundColor:"rgba(139, 92, 246, 0.8)",borderColor:"rgb(139, 92, 246)",borderWidth:1,borderRadius:8}]},options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!1}},scales:{y:{beginAtZero:!0,max:100,grid:{color:"rgba(156, 163, 175, 0.2)"},ticks:{callback:function(o){return o+"%"}}},x:{grid:{display:!1}}}}})}function Ji(){document.querySelectorAll(".progress-bar").forEach(t=>{const n=t.style.width||t.className.match(/w-(\d+)\/(\d+)/);t.style.width="0%",setTimeout(()=>{t.style.transition="width 1s ease-in-out",n&&(t.style.width=n)},500)})}setTimeout(()=>{Ji()},1e3);function Xi(e){const t=document.getElementById(e),n=t.querySelector(".backdrop"),o=t.querySelector(".modal");n.classList.remove("show"),o.classList.remove("show"),setTimeout(()=>{t.classList.add("hidden")},250)}document.addEventListener("keydown",function(e){e.key==="Escape"&&document.querySelectorAll(".modal:not(.hidden)").forEach(n=>{Xi(n.id)})});function Wi(){const e=document.getElementById("logoutConfirmModal");e.classList.remove("hidden"),setTimeout(()=>{e.querySelector(".modal").style.opacity="1",e.querySelector(".modal").style.transform="scale(1)"},10)}function Ki(){const e=document.getElementById("logoutConfirmModal");e.querySelector(".modal").style.opacity="0",e.querySelector(".modal").style.transform="scale(0.95)",setTimeout(()=>{e.classList.add("hidden")},200)}document.getElementById("logoutBtn").addEventListener("click",function(e){e.preventDefault(),Wi()});document.addEventListener("keydown",function(e){e.key==="Escape"&&Ki()});document.addEventListener("DOMContentLoaded",function(){const e=document.getElementById("logoutConfirmModal").querySelector(".modal");e.style.opacity="0",e.style.transform="scale(0.95)",e.style.transition="all 0.2s ease-out"});const Es=[{id:"jean-dupont",name:"Jean Dupont",email:"j.dupont@email.com",phone:"+241 07 45 23 12",position:"developer",positionLabel:"D√©veloppeur",remainingLeave:25,status:"available",blocked:!1,photo:"https://images.unsplash.com/photo-1472099645785-5658abf4ff4e?w=40&h=40&fit=crop&crop=face"},{id:"marie-martin",name:"Marie Martin",email:"m.martin@email.com",phone:"+241 06 78 91 45",position:"designer",positionLabel:"Designer",remainingLeave:18,status:"on-leave",blocked:!1,photo:"https://images.unsplash.com/photo-1494790108755-2616b612b786?w=40&h=40&fit=crop&crop=face"},{id:"paul-bernard",name:"Paul Bernard",email:"p.bernard@email.com",phone:"+241 05 23 67 89",position:"manager",positionLabel:"Manager",remainingLeave:30,status:"available",blocked:!0,photo:"https://images.unsplash.com/photo-1507003211169-0a1dd7228f2d?w=40&h=40&fit=crop&crop=face"},{id:"sophie-durand",name:"Sophie Durand",email:"s.durand@email.com",phone:"+241 07 12 34 56",position:"developer",positionLabel:"D√©veloppeur",remainingLeave:22,status:"available",blocked:!1,photo:"https://images.unsplash.com/photo-1438761681033-6461ffad8d80?w=40&h=40&fit=crop&crop=face"},{id:"marc-petit",name:"Marc Petit",email:"m.petit@email.com",phone:"+241 06 89 45 23",position:"designer",positionLabel:"Designer",remainingLeave:15,status:"on-leave",blocked:!1,photo:"https://images.unsplash.com/photo-1500648767791-00dcc994a43e?w=40&h=40&fit=crop&crop=face"},{id:"claire-moreau",name:"Claire Moreau",email:"c.moreau@email.com",phone:"+241 05 67 89 12",position:"manager",positionLabel:"Manager",remainingLeave:28,status:"available",blocked:!1,photo:"https://images.unsplash.com/photo-1544005313-94ddf0286df2?w=40&h=40&fit=crop&crop=face"}];function Yi(e){return{developer:"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200",designer:"bg-purple-100 text-purple-800 dark:bg-purple-900 dark:text-purple-200",manager:"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200"}[e]||"bg-gray-100 text-gray-800 dark:bg-gray-900 dark:text-gray-200"}function Gi(e){return e?"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200":"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200"}function Zi(e){return e?"Bloqu√©":"Actif"}let q=1;const Ue=5;let Ve=[...Es];function ks(){const e=document.getElementById("employeeTableBody"),t=(q-1)*Ue,n=t+Ue,o=Ve.slice(t,n);e.innerHTML=o.map(s=>`
        <tr class="hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors duration-200">
            <td class="px-6 py-4 whitespace-nowrap">
                <div class="flex items-center">
                    <img class="h-10 w-10 rounded-full object-cover" src="${s.photo}" alt="Profile">
                    <div class="ml-4">
                        <div class="text-sm font-medium text-gray-900 dark:text-white">${s.name}</div>
                        <div class="text-sm text-gray-500 dark:text-gray-400">${s.email}</div>
                    </div>
                </div>
            </td>
            <td class="px-6 py-4 whitespace-nowrap">
                <span class="px-2 py-1 text-xs font-medium rounded-full ${Yi(s.position)}">
                    ${s.positionLabel}
                </span>
            </td>
            <td class="px-6 py-4 whitespace-nowrap">
                <div class="text-sm text-gray-900 dark:text-white">
                    <i class="fas fa-phone text-gray-400 mr-2"></i>${s.phone}
                </div>
            </td>
            <td class="px-6 py-4 whitespace-nowrap">
                <span class="px-2 py-1 text-xs font-medium rounded-full ${Gi(s.blocked)}">
                    ${Zi(s.blocked)}
                </span>
            </td>
            <td class="px-6 py-4 whitespace-nowrap text-right text-sm font-medium">
                <button class="text-indigo-600 hover:text-indigo-900 dark:text-indigo-400 dark:hover:text-indigo-300 mr-3"
                        onclick="viewEmployee('${s.id}')" title="Voir d√©tails">
                        <i class="fas fa-eye"></i>
                </button>
                <button class="text-${s.blocked?"green":"red"}-600 hover:text-${s.blocked?"green":"red"}-900 dark:text-${s.blocked?"green":"red"}-400 dark:hover:text-${s.blocked?"green":"red"}-300"
                        onclick="toggleBlockEmployee('${s.id}')" title="${s.blocked?"D√©bloquer":"Bloquer"}">
                        <i class="fas fa-${s.blocked?"unlock":"lock"}"></i>
                </button>
            </td>
        </tr>
    `).join(""),Qi()}function Qi(){const e=Math.ceil(Ve.length/Ue),t=(q-1)*Ue+1,n=Math.min(q*Ue,Ve.length);document.getElementById("paginationInfo").textContent=`Affichage de ${t} √† ${n} sur ${Ve.length} employ√©s`;const o=document.getElementById("paginationControls");o.innerHTML=`
        <button onclick="changePage(${q-1})"
                ${q===1?"disabled":""}
                class="px-3 py-1 text-sm bg-gray-200 text-gray-700 rounded hover:bg-gray-300
                       dark:bg-gray-700 dark:text-gray-300 dark:hover:bg-gray-600
                       ${q===1?"opacity-50 cursor-not-allowed":""}">
            Pr√©c√©dent
        </button>
        ${Array.from({length:e},(s,a)=>a+1).map(s=>`
            <button onclick="changePage(${s})"
                    class="px-3 py-1 text-sm rounded
                           ${s===q?"bg-blue-500 text-white":"bg-gray-200 text-gray-700 hover:bg-gray-300 dark:bg-gray-700 dark:text-gray-300 dark:hover:bg-gray-600"}">
                ${s}
            </button>
        `).join("")}
        <button onclick="changePage(${q+1})"
                ${q===e?"disabled":""}
                class="px-3 py-1 text-sm bg-gray-200 text-gray-700 rounded hover:bg-gray-300
                       dark:bg-gray-700 dark:text-gray-300 dark:hover:bg-gray-600
                       ${q===e?"opacity-50 cursor-not-allowed":""}">
            Suivant
        </button>
    `}function Fo(){const e=document.getElementById("searchEmployee").value.toLowerCase(),t=document.getElementById("positionFilter").value;Ve=Es.filter(n=>{const o=n.name.toLowerCase().includes(e)||n.email.toLowerCase().includes(e),s=!t||n.position===t;return o&&s}),q=1,ks()}function on(){document.getElementById("employeeModal").classList.add("hidden")}document.addEventListener("DOMContentLoaded",function(){ks(),document.getElementById("searchEmployee").addEventListener("input",Fo),document.getElementById("positionFilter").addEventListener("change",Fo),document.getElementById("closeEmployeeModal").addEventListener("click",on),document.getElementById("employeeModal").addEventListener("click",e=>{e.target===e.currentTarget&&on()}),document.addEventListener("keydown",e=>{e.key==="Escape"&&(document.getElementById("employeeModal").classList.contains("hidden")||on())})});const Ls={1:{total:25,utilise:7,restant:18,type:"Cong√©s pay√©s",couleur:"from-blue-500 to-blue-600"},2:{total:90,utilise:3,restant:87,type:"Cong√©s maladie",couleur:"from-red-400 to-orange-500"},3:{total:112,utilise:0,restant:106,type:"Cong√© maternit√©",couleur:"from-pink-500 to-purple-500"},4:{total:10,utilise:6,restant:4,type:"RTT",couleur:"from-yellow-400 to-orange-500"}};function ed(e){const t=Ls[e];if(!t)return;const n=Math.round(t.restant/t.total*100),o=document.getElementById(`solde-bar-${e}`),s=document.getElementById(`solde-text-${e}`);o&&s&&(o.style.width=n+"%",o.className=`bg-gradient-to-r ${t.couleur} h-2 rounded-full transition-all duration-300`,s.textContent=`${t.restant}/${t.total} jours`)}function td(){Object.keys(Ls).forEach(e=>{setTimeout(()=>{ed(e)},parseInt(e)*200)})}document.addEventListener("DOMContentLoaded",function(){td()});let nd="note",Bs=0,Tt=[{id:1,title:"Politique de cong√©s 2025",date:"15/09/2025",type:"PDF",hasFile:!0,fileName:"politique_conges_2025.pdf",description:"Nouvelle politique de gestion des cong√©s pour l'ann√©e 2025. Merci de prendre connaissance des nouvelles r√®gles.",icon:"fas fa-file-pdf",bgColor:"from-red-500 to-pink-500",badgeColor:"bg-red-100 dark:bg-red-900/30 text-red-800 dark:text-red-300"},{id:2,title:"Planning √©t√© 2025",date:"10/09/2025",type:"XLSX",hasFile:!0,fileName:"planning_ete_2025.xlsx",description:"Planning d√©taill√© pour la p√©riode estivale avec les remplacements pr√©vus.",icon:"fas fa-file-excel",bgColor:"from-green-500 to-teal-500",badgeColor:"bg-green-100 dark:bg-green-900/30 text-green-800 dark:text-green-300"},{id:3,title:"R√©union √©quipe - Septembre",date:"08/09/2025",type:"NOTE",hasFile:!1,description:`Ordre du jour de la r√©union d'√©quipe du mois de septembre :

1. Bilan des activit√©s
2. Nouveaux projets
3. Planning octobre
4. Questions diverses`,icon:"fas fa-sticky-note",bgColor:"from-blue-500 to-indigo-500",badgeColor:"bg-blue-100 dark:bg-blue-900/30 text-blue-800 dark:text-blue-300"},{id:4,title:"Organigramme 2025",date:"05/09/2025",type:"PNG",hasFile:!0,fileName:"organigramme_2025.png",description:"Nouvel organigramme de l'entreprise suite aux r√©cents changements organisationnels.",icon:"fas fa-file-image",bgColor:"from-purple-500 to-pink-500",badgeColor:"bg-purple-100 dark:bg-purple-900/30 text-purple-800 dark:text-purple-300"}];document.getElementById("noteForm").addEventListener("submit",function(e){e.preventDefault();const t=document.getElementById("noteTitle").value,n=document.getElementById("noteDescription").value,s=document.getElementById("fileInput").files[0];if(!t.trim()){alert("Le titre est obligatoire");return}const a={id:++Bs+Tt.length,title:t.trim(),date:new Date().toLocaleDateString("fr-FR"),description:n.trim()||"",hasFile:nd==="file",fileName:s?s.name:null};a.type="NOTE",a.icon="fas fa-sticky-note",a.bgColor="from-blue-500 to-indigo-500",a.badgeColor="bg-blue-100 dark:bg-blue-900/30 text-blue-800 dark:text-blue-300",Tt.unshift(a),Fs(),closeModal("publishModal"),od("Note publi√©e avec succ√®s !","success")});function Fs(){const e=document.getElementById("notesTableBody");e.innerHTML="",Tt.forEach(t=>{const n=document.createElement("tr");n.className="note-row hover:bg-gray-50 dark:hover:bg-gray-700/30 transition-colors note-added",n.setAttribute("data-id",t.id),n.innerHTML=`
            <td class="px-6 py-4 whitespace-nowrap">
                <div class="flex items-center">
                    <div class="w-10 h-10 bg-gradient-to-r ${t.bgColor} rounded-lg flex items-center justify-center mr-3">
                        <i class="${t.icon} text-white text-sm"></i>
                    </div>
                    <div class="text-sm font-medium text-gray-900 dark:text-white">${t.title}</div>
                </div>
            </td>
            <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400">${t.date}</td>
            <td class="px-6 py-4 whitespace-nowrap">
                <span class="px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${t.badgeColor}">${t.type}</span>
            </td>
            <td class="px-6 py-4 whitespace-nowrap text-sm font-medium space-x-2">
                ${t.hasFile?`
                    <button onclick="downloadNote(${t.id})" class="text-blue-500 hover:text-blue-700 p-2 rounded-lg hover:bg-blue-50 dark:hover:bg-blue-900/30 transition-colors" title="T√©l√©charger">
                        <i class="fas fa-download"></i>
                    </button>
                `:""}
                <button onclick="viewNote(${t.id})" class="text-gray-500 hover:text-gray-700 p-2 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700/50 transition-colors" title="Visualiser">
                    <i class="fas fa-eye"></i>
                </button>
                <button onclick="editNote(${t.id})" class="text-orange-500 hover:text-orange-700 p-2 rounded-lg hover:bg-orange-50 dark:hover:bg-orange-900/30 transition-colors" title="Modifier">
                    <i class="fas fa-edit"></i>
                </button>
                <button onclick="deleteNote(${t.id})" class="text-red-500 hover:text-red-700 p-2 rounded-lg hover:bg-red-50 dark:hover:bg-red-900/30 transition-colors" title="Supprimer">
                    <i class="fas fa-trash"></i>
                </button>
            </td>
        `,e.appendChild(n),setTimeout(()=>{n.classList.remove("note-added")},500)})}function od(e,t="info"){const n=document.createElement("div");n.className=`fixed top-4 right-4 z-50 p-4 rounded-lg shadow-lg transform translate-x-full transition-transform duration-300 ${t==="success"?"bg-green-500 text-white":t==="error"?"bg-red-500 text-white":"bg-blue-500 text-white"}`,n.innerHTML=`
        <div class="flex items-center">
            <i class="fas ${t==="success"?"fa-check-circle":t==="error"?"fa-exclamation-circle":"fa-info-circle"} mr-2"></i>
            <span>${e}</span>
        </div>
    `,document.body.appendChild(n),setTimeout(()=>{n.classList.remove("translate-x-full")},10),setTimeout(()=>{n.classList.add("translate-x-full"),setTimeout(()=>{document.body.removeChild(n)},300)},3e3)}document.addEventListener("DOMContentLoaded",function(){Bs=Math.max(...Tt.map(e=>e.id)),Fs()});document.addEventListener("keydown",function(e){e.key==="Escape"&&document.querySelectorAll('[id$="Modal"]:not(.hidden)').forEach(n=>{closeModal(n.id)})});document.addEventListener("DOMContentLoaded",function(){document.querySelectorAll(".animate-slide-up").forEach((t,n)=>{setTimeout(()=>{t.style.opacity="1",t.style.transform="translateY(0)"},n*100)}),sd()});function sd(){const e=document.getElementById("demandesChart").getContext("2d");new Chart(e,{type:"line",data:{labels:["Jan","F√©v","Mar","Avr","Mai","Jun","Jul","Ao√ª","Sep"],datasets:[{label:"Demandes",data:[12,19,15,25,22,18,28,24,20],borderColor:"rgb(59, 130, 246)",backgroundColor:"rgba(59, 130, 246, 0.1)",tension:.4,fill:!0}]},options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!1}},scales:{y:{beginAtZero:!0,grid:{color:"rgba(156, 163, 175, 0.2)"}},x:{grid:{color:"rgba(156, 163, 175, 0.2)"}}}}});const t=document.getElementById("typesChart").getContext("2d");new Chart(t,{type:"doughnut",data:{labels:["Cong√©s pay√©s","RTT","Maladie","Formation","Autres"],datasets:[{data:[45,25,15,10,5],backgroundColor:["rgb(59, 130, 246)","rgb(34, 197, 94)","rgb(239, 68, 68)","rgb(139, 92, 246)","rgb(236, 72, 153)"]}]},options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"bottom"}}}});const n=document.getElementById("approvalChart").getContext("2d");new Chart(n,{type:"bar",data:{labels:["Avr","Mai","Jun","Jul","Ao√ª","Sep"],datasets:[{label:"Taux d'approbation",data:[85,88,82,90,87,87],backgroundColor:"rgba(139, 92, 246, 0.8)",borderColor:"rgb(139, 92, 246)",borderWidth:1,borderRadius:8}]},options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!1}},scales:{y:{beginAtZero:!0,max:100,grid:{color:"rgba(156, 163, 175, 0.2)"},ticks:{callback:function(o){return o+"%"}}},x:{grid:{display:!1}}}}})}function ad(){document.querySelectorAll(".progress-bar").forEach(t=>{const n=t.style.width||t.className.match(/w-(\d+)\/(\d+)/);t.style.width="0%",setTimeout(()=>{t.style.transition="width 1s ease-in-out",n&&(t.style.width=n)},500)})}setTimeout(()=>{ad()},1e3);document.getElementById("justificatifChefForm").addEventListener("submit",function(e){e.preventDefault();{alert("Veuillez s√©lectionner un fichier");return}});document.addEventListener("keydown",function(e){e.key==="Escape"&&closeModal("uploadJustificatifChefModal")});function rd(){const e=document.getElementById("logoutConfirmModal");e.classList.remove("hidden"),setTimeout(()=>{e.querySelector(".modal").style.opacity="1",e.querySelector(".modal").style.transform="scale(1)"},10)}function id(){const e=document.getElementById("logoutConfirmModal");e.querySelector(".modal").style.opacity="0",e.querySelector(".modal").style.transform="scale(0.95)",setTimeout(()=>{e.classList.add("hidden")},200)}document.getElementById("logoutBtn").addEventListener("click",function(e){e.preventDefault(),rd()});document.addEventListener("keydown",function(e){e.key==="Escape"&&id()});document.addEventListener("DOMContentLoaded",function(){const e=document.getElementById("logoutConfirmModal").querySelector(".modal");e.style.opacity="0",e.style.transform="scale(0.95)",e.style.transition="all 0.2s ease-out"});const A=[{id:1,employeeName:"Jean Martin",leaveType:"Cong√©s pay√©s",startDate:"2025-10-15",endDate:"2025-10-20",duration:5,status:"pending",submittedTime:"il y a 2h",reason:"Cong√©s pour vacances en famille. Voyage pr√©vu depuis plusieurs mois.",avatar:"from-blue-500 to-purple-500",pdfName:"justificatif_conges.pdf",remainingBalance:20},{id:2,employeeName:"Sophie Dubois",leaveType:"Cong√© maladie",startDate:"2025-10-16",endDate:"2025-10-18",duration:3,status:"pending",submittedTime:"il y a 1h",reason:"Arr√™t maladie suite √† une grippe. Certificat m√©dical fourni.",avatar:"from-green-500 to-teal-500",pdfName:"certificat_medical.pdf",remainingBalance:15},{id:3,employeeName:"Marie Dupont",leaveType:"Cong√© maternit√©",startDate:"2025-10-01",endDate:"2026-01-15",duration:106,status:"approved",submittedTime:"il y a 3h",reason:"Cong√© maternit√© pour la naissance de mon second enfant.",avatar:"from-pink-500 to-rose-500",pdfName:"certificat_grossesse.pdf",remainingBalance:0},{id:4,employeeName:"Pierre Leroux",leaveType:"Paternit√©",startDate:"2025-10-22",endDate:"2025-10-22",duration:1,status:"rejected",submittedTime:"il y a 4h",reason:"Cong√© paternit√© suite √† la naissance.",avatar:"from-indigo-500 to-purple-500",pdfName:"justificatif_paternite.pdf",remainingBalance:29},{id:5,employeeName:"Antoine Moreau",leaveType:"Cong√© sans solde",startDate:"2025-10-05",endDate:"2025-11-05",duration:31,status:"pending",submittedTime:"il y a 6h",reason:"Projet personnel n√©cessitant une absence prolong√©e.",avatar:"from-orange-500 to-red-500",pdfName:"demande_conge_sans_solde.pdf",remainingBalance:0},{id:6,employeeName:"Lucie Bernard",leaveType:"Formation",startDate:"2025-10-25",endDate:"2025-10-27",duration:3,status:"approved",submittedTime:"il y a 1 jour",reason:"Formation professionnelle en management d'√©quipe.",avatar:"from-cyan-500 to-blue-500",pdfName:"programme_formation.pdf",remainingBalance:25}];let Ts="all",dd=new Set,bt="grid",vt="grid";function ld(){document.querySelectorAll(".filter-button").forEach(t=>{t.addEventListener("click",function(){const n=this.getAttribute("data-filter");$s(n)})})}function $s(e){Ts=e,document.querySelectorAll(".filter-button").forEach(n=>{n.getAttribute("data-filter")===e?n.className="filter-button active bg-gradient-to-r from-blue-500 to-purple-600 text-white shadow-lg px-6 py-3 font-medium rounded-xl transition-all duration-300 hover-lift click-scale":n.className="filter-button bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 px-6 py-3 font-medium rounded-xl transition-all duration-300 hover-lift click-scale"}),cd()}function cd(){const e=document.getElementById("dynamicContent");if(!e)return;let t=[],n="",o="";switch(Ts){case"all":t=A,n="Liste de toutes les demandes de cong√©s",o="Toutes les demandes (en attente, approuv√©es et refus√©es)",e.innerHTML=To(t,n,o);break;case"pending":t=A.filter(s=>s.status==="pending"),n="Liste des cong√©s en attente de traitement",o="Derni√®res demandes de cong√©s en attente",e.innerHTML=To(t,n,o);break;case"approved":t=A.filter(s=>s.status==="approved"),n="Liste des Cong√©s Approuv√©s",o="Vue d'ensemble des cong√©s approuv√©s",e.innerHTML=ud(t,n,o);break;case"rejected":t=A.filter(s=>s.status==="rejected"),n="Liste des Cong√©s Refus√©s",o="Vue d'ensemble des cong√©s refus√©s",e.innerHTML=md(t,n,o);break}dd.clear(),setTimeout(()=>{bd(),je()},100)}function To(e,t,n){return`
        <div class="flex items-center justify-between mb-4">
            <div>
                <h3 class="text-xl font-bold text-gray-900 dark:text-white mb-2">${t}</h3>
                <p class="text-sm text-gray-500 dark:text-gray-400">${n}</p>
            </div>
        </div>

        <div id="requestsContainer" class="space-y-4">
            ${e.length===0?`
                <div class="text-center py-12">
                    <i class="fas fa-calendar-check text-6xl text-gray-300 dark:text-gray-600 mb-4"></i>
                    <p class="text-gray-500 dark:text-gray-400">Aucune demande trouv√©e</p>
                </div>
            `:e.map(o=>fd(o)).join("")}
        </div>
    `}function ud(e,t,n){return`
        <div class="flex flex-col md:flex-row justify-between items-start md:items-center gap-4 mb-6">
            <div>
                <h3 class="text-xl font-bold text-gray-900 dark:text-white mb-2">${t}</h3>
                <p class="text-sm text-gray-500 dark:text-gray-400">${n}</p>
            </div>
            <div class="flex flex-wrap gap-2">
                <button id="gridViewBtnApproved" class="px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-colors duration-200 text-sm font-medium">
                    <i class="fas fa-th"></i> Grille
                </button>
                <button id="listViewBtnApproved" class="px-4 py-2 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 dark:bg-gray-700 dark:text-gray-300 dark:hover:bg-gray-600 transition-colors duration-200 text-sm font-medium">
                    <i class="fas fa-list"></i> Liste
                </button>
            </div>
        </div>

        <div id="approvedLeavesContainer">
            ${e.length===0?`
                <div class="text-center py-12">
                    <i class="fas fa-calendar-times text-6xl text-gray-300 dark:text-gray-600 mb-4"></i>
                    <p class="text-gray-500 dark:text-gray-400">Aucun cong√© approuv√©</p>
                </div>
            `:hn(e)}
        </div>
    `}function md(e,t,n){return`
        <div class="flex flex-col md:flex-row justify-between items-start md:items-center gap-4 mb-6">
            <div>
                <h3 class="text-xl font-bold text-gray-900 dark:text-white mb-2">${t}</h3>
                <p class="text-sm text-gray-500 dark:text-gray-400">${n}</p>
            </div>
            <div class="flex flex-wrap gap-2">
                <button id="gridViewBtnRejected" class="px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-colors duration-200 text-sm font-medium">
                    <i class="fas fa-th"></i> Grille
                </button>
                <button id="listViewBtnRejected" class="px-4 py-2 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 dark:bg-gray-700 dark:text-gray-300 dark:hover:bg-gray-600 transition-colors duration-200 text-sm font-medium">
                    <i class="fas fa-list"></i> Liste
                </button>
            </div>
        </div>

        <div id="rejectedLeavesContainer">
            ${e.length===0?`
                <div class="text-center py-12">
                    <i class="fas fa-calendar-times text-6xl text-gray-300 dark:text-gray-600 mb-4"></i>
                    <p class="text-gray-500 dark:text-gray-400">Aucun cong√© refus√©</p>
                </div>
            `:bn(e)}
        </div>
    `}function hn(e){return bt==="grid"?`
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">
                ${e.map(t=>pd(t)).join("")}
            </div>
        `:`
            <div class="space-y-4">
                ${e.map(t=>gd(t)).join("")}
            </div>
        `}function bn(e){return vt==="grid"?`
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">
                ${e.map(t=>yd(t)).join("")}
            </div>
        `:`
            <div class="space-y-4">
                ${e.map(t=>hd(t)).join("")}
            </div>
        `}function fd(e){const t=e.status==="pending"?"üü°":e.status==="approved"?"üü¢":"üî¥",n=e.status==="pending"?"bg-yellow-100 dark:bg-yellow-900/30 text-yellow-800 dark:text-yellow-300":e.status==="approved"?"bg-green-100 dark:bg-green-900/30 text-green-800 dark:text-green-300":"bg-red-100 dark:bg-red-900/30 text-red-800 dark:text-red-300",o=e.status==="pending"?"En attente":e.status==="approved"?"Approuv√©e":"Refus√©e",s=e.status==="pending",a=e.status==="rejected";return`
        <div class="demand-item w-full flex flex-col md:flex-row items-start md:items-center justify-between bg-gray-50 dark:bg-gray-700/50 rounded-lg p-4" data-id="${e.id}">
            <div class="flex items-center space-x-4 w-full md:w-auto">
                <div class="w-12 h-12 bg-gradient-to-r ${e.avatar} rounded-xl flex items-center justify-center flex-shrink-0">
                    <i class="fas fa-user text-white"></i>
                </div>
                <div class="flex-1 min-w-0">
                    <div class="flex items-center space-x-2">
                        <h4 class="font-semibold text-gray-900 dark:text-white truncate">${e.employeeName} - ${e.leaveType}</h4>
                        <span class="text-yellow-500">${t}</span>
                    </div>
                    <p class="text-sm text-gray-500 dark:text-gray-400 truncate">${N(e.startDate)} - ${N(e.endDate)} (${e.duration} jours)</p>
                    <p class="text-xs text-gray-400 dark:text-gray-500 mt-1">Demande soumise ${e.submittedTime}</p>
                </div>
            </div>
            <div class="flex items-center space-x-2 mt-4 md:mt-0">
                <span class="status-badge px-4 py-2 ${n} text-xs font-semibold rounded-full">${o}</span>
                ${s?`
                    <button class="approve-btn px-4 py-2 bg-green-500 hover:bg-green-600 text-white rounded-lg transition-colors" onclick="showConfirmModal('approve', ${e.id})">
                        <i class="fas fa-check"></i>
                    </button>
                    <button class="reject-btn px-4 py-2 bg-red-500 hover:bg-red-600 text-white rounded-lg transition-colors" onclick="showConfirmModal('reject', ${e.id})">
                        <i class="fas fa-times"></i>
                    </button>
                `:""}
                ${a?`
                    <button class="revalidate-btn px-4 py-2 bg-blue-500 hover:bg-blue-600 text-white rounded-lg transition-colors" onclick="revalidateRequest(${e.id})">
                        <i class="fas fa-sync-alt mr-1"></i>Revalider
                    </button>
                `:""}
                <button class="px-4 py-2 bg-gray-200 dark:bg-gray-700 text-gray-800 dark:text-gray-200 rounded-lg hover:bg-gray-300 dark:hover:bg-gray-600 transition-colors" onclick="showDetailsModal(${e.id})">
                    <i class="fas fa-eye"></i>
                </button>
            </div>
        </div>
    `}function pd(e){return`
        <div id="leave-approved-${e.id}" class="bg-white dark:bg-gray-800 rounded-lg shadow-md hover:shadow-lg transition-all duration-200 cursor-pointer border-l-4 border-green-500 leave-card" data-leave-id="${e.id}">
            <div class="p-4">
                <div class="flex items-center space-x-3 mb-3">
                    <div class="w-12 h-12 bg-gradient-to-r ${e.avatar} rounded-full flex items-center justify-center">
                        <i class="fas fa-user text-white"></i>
                    </div>
                    <div class="flex-1 min-w-0">
                        <h4 class="font-semibold text-gray-900 dark:text-white truncate">${e.employeeName}</h4>
                        <span class="px-2 py-1 text-xs rounded-full bg-green-100 dark:bg-green-900/30 text-green-800 dark:text-green-300">
                            ${e.leaveType}
                        </span>
                    </div>
                </div>
                <div class="space-y-2">
                    <div class="flex items-center text-sm text-gray-600 dark:text-gray-400">
                        <i class="fas fa-calendar-day w-5"></i>
                        <span>${N(e.startDate)}</span>
                    </div>
                    <div class="flex items-center text-sm text-gray-600 dark:text-gray-400">
                        <i class="fas fa-calendar-check w-5"></i>
                        <span>${N(e.endDate)}</span>
                    </div>
                    <div class="flex items-center justify-between pt-2 border-t border-gray-200 dark:border-gray-700">
                        <span class="text-sm font-medium text-gray-900 dark:text-white">
                            <i class="fas fa-clock"></i> ${e.duration} jour(s)
                        </span>
                        <span class="px-2 py-1 text-xs rounded-full bg-green-100 dark:bg-green-900/30 text-green-800 dark:text-green-300">
                            Approuv√©
                        </span>
                    </div>
                </div>
            </div>
        </div>
    `}function gd(e){return`
        <div id="leave-approved-${e.id}" class="bg-white dark:bg-gray-800 rounded-lg shadow-md hover:shadow-lg transition-all duration-200 cursor-pointer border-l-4 border-green-500 leave-card" data-leave-id="${e.id}">
            <div class="p-4">
                <div class="flex items-center justify-between flex-wrap gap-4">
                    <div class="flex items-center space-x-4">
                        <div class="w-14 h-14 bg-gradient-to-r ${e.avatar} rounded-full flex items-center justify-center">
                            <i class="fas fa-user text-white text-xl"></i>
                        </div>
                        <div>
                            <h4 class="font-semibold text-gray-900 dark:text-white">${e.employeeName}</h4>
                            <span class="px-2 py-1 text-xs rounded-full bg-green-100 dark:bg-green-900/30 text-green-800 dark:text-green-300">
                                ${e.leaveType}
                            </span>
                        </div>
                    </div>
                    <div class="flex items-center space-x-6 text-sm">
                        <div class="text-center">
                            <div class="text-gray-500 dark:text-gray-400 text-xs">D√©but</div>
                            <div class="font-medium text-gray-900 dark:text-white">${N(e.startDate)}</div>
                        </div>
                        <div class="text-gray-400 dark:text-gray-600">
                            <i class="fas fa-arrow-right"></i>
                        </div>
                        <div class="text-center">
                            <div class="text-gray-500 dark:text-gray-400 text-xs">Fin</div>
                            <div class="font-medium text-gray-900 dark:text-white">${N(e.endDate)}</div>
                        </div>
                        <div class="text-center">
                            <div class="text-gray-500 dark:text-gray-400 text-xs">Dur√©e</div>
                            <div class="font-medium text-gray-900 dark:text-white">${e.duration} jour(s)</div>
                        </div>
                        <div class="text-center">
                            <span class="px-3 py-1 text-xs rounded-full bg-green-100 dark:bg-green-900/30 text-green-800 dark:text-green-300">
                                Approuv√©
                            </span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    `}function yd(e){return`
        <div id="leave-rejected-${e.id}" class="bg-white dark:bg-gray-800 rounded-lg shadow-md hover:shadow-lg transition-all duration-200 cursor-pointer border-l-4 border-red-500 leave-card" data-leave-id="${e.id}">
            <div class="p-4">
                <div class="flex items-center space-x-3 mb-3">
                    <div class="w-12 h-12 bg-gradient-to-r ${e.avatar} rounded-full flex items-center justify-center">
                        <i class="fas fa-user text-white"></i>
                    </div>
                    <div class="flex-1 min-w-0">
                        <h4 class="font-semibold text-gray-900 dark:text-white truncate">${e.employeeName}</h4>
                        <span class="px-2 py-1 text-xs rounded-full bg-red-100 dark:bg-red-900/30 text-red-800 dark:text-red-300">
                            ${e.leaveType}
                        </span>
                    </div>
                </div>
                <div class="space-y-2">
                    <div class="flex items-center text-sm text-gray-600 dark:text-gray-400">
                        <i class="fas fa-calendar-day w-5"></i>
                        <span>${N(e.startDate)}</span>
                    </div>
                    <div class="flex items-center text-sm text-gray-600 dark:text-gray-400">
                        <i class="fas fa-calendar-check w-5"></i>
                        <span>${N(e.endDate)}</span>
                    </div>
                    <div class="flex items-center justify-between pt-2 border-t border-gray-200 dark:border-gray-700">
                        <span class="text-sm font-medium text-gray-900 dark:text-white">
                            <i class="fas fa-clock"></i> ${e.duration} jour(s)
                        </span>
                        <span class="px-2 py-1 text-xs rounded-full bg-red-100 dark:bg-red-900/30 text-red-800 dark:text-red-300">
                            Refus√©
                        </span>
                    </div>
                    <div class="flex items-center justify-between pt-2">
                        <button class="revalidate-btn px-3 py-1 text-xs bg-blue-500 hover:bg-blue-600 text-white rounded-lg transition-colors" onclick="event.stopPropagation(); revalidateRequest(${e.id})">
                            <i class="fas fa-sync-alt mr-1"></i>Revalider
                        </button>
                    </div>
                </div>
            </div>
        </div>
    `}function hd(e){return`
        <div id="leave-rejected-${e.id}" class="bg-white dark:bg-gray-800 rounded-lg shadow-md hover:shadow-lg transition-all duration-200 cursor-pointer border-l-4 border-red-500 leave-card" data-leave-id="${e.id}">
            <div class="p-4">
                <div class="flex items-center justify-between flex-wrap gap-4">
                    <div class="flex items-center space-x-4">
                        <div class="w-14 h-14 bg-gradient-to-r ${e.avatar} rounded-full flex items-center justify-center">
                            <i class="fas fa-user text-white text-xl"></i>
                        </div>
                        <div>
                            <h4 class="font-semibold text-gray-900 dark:text-white">${e.employeeName}</h4>
                            <span class="px-2 py-1 text-xs rounded-full bg-red-100 dark:bg-red-900/30 text-red-800 dark:text-red-300">
                                ${e.leaveType}
                            </span>
                        </div>
                    </div>
                    <div class="flex items-center space-x-6 text-sm">
                        <div class="text-center">
                            <div class="text-gray-500 dark:text-gray-400 text-xs">D√©but</div>
                            <div class="font-medium text-gray-900 dark:text-white">${N(e.startDate)}</div>
                        </div>
                        <div class="text-gray-400 dark:text-gray-600">
                            <i class="fas fa-arrow-right"></i>
                        </div>
                        <div class="text-center">
                            <div class="text-gray-500 dark:text-gray-400 text-xs">Fin</div>
                            <div class="font-medium text-gray-900 dark:text-white">${N(e.endDate)}</div>
                        </div>
                        <div class="text-center">
                            <div class="text-gray-500 dark:text-gray-400 text-xs">Dur√©e</div>
                            <div class="font-medium text-gray-900 dark:text-white">${e.duration} jour(s)</div>
                        </div>
                        <div class="text-center">
                            <span class="px-3 py-1 text-xs rounded-full bg-red-100 dark:bg-red-900/30 text-red-800 dark:text-red-300">
                                Refus√©
                            </span>
                        </div>
                    </div>
                    <button class="revalidate-btn px-4 py-2 bg-blue-500 hover:bg-blue-600 text-white rounded-lg transition-colors" onclick="event.stopPropagation(); revalidateRequest(${e.id})">
                        <i class="fas fa-sync-alt mr-1"></i>Revalider
                    </button>
                </div>
            </div>
        </div>
    `}function bd(){const e=document.getElementById("gridViewBtnApproved"),t=document.getElementById("listViewBtnApproved");e&&t&&(e.onclick=function(){bt="grid",ve("gridApproved");const s=A.filter(r=>r.status==="approved"),a=document.getElementById("approvedLeavesContainer");a&&(a.innerHTML=hn(s),je())},t.onclick=function(){bt="list",ve("listApproved");const s=A.filter(r=>r.status==="approved"),a=document.getElementById("approvedLeavesContainer");a&&(a.innerHTML=hn(s),je())},ve(bt==="grid"?"gridApproved":"listApproved"));const n=document.getElementById("gridViewBtnRejected"),o=document.getElementById("listViewBtnRejected");n&&o&&(n.onclick=function(){vt="grid",ve("gridRejected");const s=A.filter(r=>r.status==="rejected"),a=document.getElementById("rejectedLeavesContainer");a&&(a.innerHTML=bn(s),je())},o.onclick=function(){vt="list",ve("listRejected");const s=A.filter(r=>r.status==="rejected"),a=document.getElementById("rejectedLeavesContainer");a&&(a.innerHTML=bn(s),je())},ve(vt==="grid"?"gridRejected":"listRejected"))}function ve(e){const t=document.getElementById("gridViewBtnApproved"),n=document.getElementById("listViewBtnApproved"),o=document.getElementById("gridViewBtnRejected"),s=document.getElementById("listViewBtnRejected"),a="px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-colors duration-200 text-sm font-medium",r="px-4 py-2 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 dark:bg-gray-700 dark:text-gray-300 dark:hover:bg-gray-600 transition-colors duration-200 text-sm font-medium";e==="gridApproved"?(t&&(t.className=a),n&&(n.className=r)):e==="listApproved"?(t&&(t.className=r),n&&(n.className=a)):e==="gridRejected"?(o&&(o.className=a),s&&(s.className=r)):e==="listRejected"&&(o&&(o.className=r),s&&(s.className=a))}function je(){document.querySelectorAll(".leave-card").forEach(t=>{const n=t.cloneNode(!0);t.parentNode.replaceChild(n,t),n.addEventListener("click",function(o){if(o.target.closest(".revalidate-btn"))return;const s=parseInt(n.getAttribute("data-leave-id")),a=A.find(r=>r.id===s);a&&vd(a)})})}function vd(e){if(!document.getElementById("leaveDetailsModal")){console.error("Modal leaveDetailsModal introuvable");return}document.getElementById("leaveDetailsName").textContent=e.employeeName,document.getElementById("leaveDetailsType").textContent=e.leaveType,document.getElementById("leaveDetailsStartDate").textContent=N(e.startDate),document.getElementById("leaveDetailsEndDate").textContent=N(e.endDate),document.getElementById("leaveDetailsDuration").textContent=e.duration+" jour(s)";const n=e.remainingBalance||Math.max(0,30-e.duration);document.getElementById("leaveDetailsBalance").textContent=n+" jours";const o=document.getElementById("leaveDetailsAvatar");o.className=`w-16 h-16 bg-gradient-to-r ${e.avatar} rounded-full flex items-center justify-center flex-shrink-0`;const s=document.getElementById("leaveDetailsTypeBadge");let a="bg-blue-500";e.leaveType.toLowerCase().includes("maladie")?a="bg-red-500":e.leaveType.toLowerCase().includes("maternit√©")?a="bg-pink-500":e.leaveType.toLowerCase().includes("paternit√©")?a="bg-blue-500":e.leaveType.toLowerCase().includes("formation")?a="bg-purple-500":e.leaveType.toLowerCase().includes("pay√©s")?a="bg-green-500":a="bg-yellow-500",s.className=`px-3 py-1 text-xs font-semibold rounded-full ${a} text-white`,s.textContent=e.leaveType,document.getElementById("leaveDetailsReason").textContent=e.reason;const r=document.getElementById("leaveDetailsStatusBadge");e.status==="approved"?(r.className="px-4 py-2 text-sm font-semibold rounded-lg bg-green-500 text-white",r.innerHTML='<i class="fas fa-check-circle mr-1"></i>Approuv√©'):e.status==="rejected"?(r.className="px-4 py-2 text-sm font-semibold rounded-lg bg-red-500 text-white",r.innerHTML='<i class="fas fa-times-circle mr-1"></i>Refus√©'):(r.className="px-4 py-2 text-sm font-semibold rounded-lg bg-yellow-500 text-white",r.innerHTML='<i class="fas fa-clock mr-1"></i>En attente'),xd("leaveDetailsModal")}function xd(e){const t=document.getElementById(e);t&&(t.classList.remove("hidden"),setTimeout(()=>{const n=t.querySelector(".backdrop"),o=t.querySelector(".modal");n&&n.classList.add("show"),o&&o.classList.add("show")},10))}function Cs(e){const t=document.getElementById(e);if(!t)return;const n=t.querySelector(".backdrop"),o=t.querySelector(".modal");n&&n.classList.remove("show"),o&&o.classList.remove("show"),setTimeout(()=>{t.classList.add("hidden")},300)}document.addEventListener("click",function(e){e.target.classList.contains("backdrop")&&["confirmModal","detailsModal","leaveDetailsModal"].forEach(n=>{const o=document.getElementById(n);o&&!o.classList.contains("hidden")&&Cs(n)})});document.addEventListener("keydown",function(e){e.key==="Escape"&&["confirmModal","detailsModal","leaveDetailsModal"].forEach(n=>{const o=document.getElementById(n);o&&!o.classList.contains("hidden")&&Cs(n)})});function N(e){return new Date(e).toLocaleDateString("fr-FR",{day:"2-digit",month:"2-digit",year:"numeric"})}function wd(){const e=document.getElementById("toggle-sidebar"),t=document.getElementById("close-sidebar"),n=document.getElementById("sidebar"),o=document.getElementById("sidebar-overlay");e&&e.addEventListener("click",function(){n&&n.classList.add("show"),o&&o.classList.add("show")}),t&&t.addEventListener("click",function(){n&&n.classList.remove("show"),o&&o.classList.remove("show")}),o&&o.addEventListener("click",function(){n&&n.classList.remove("show"),o.classList.remove("show")})}function Ed(){const e=document.getElementById("current-date");if(e){const t=new Date,n={weekday:"long",year:"numeric",month:"long",day:"numeric"};e.textContent=t.toLocaleDateString("fr-FR",n)}}document.addEventListener("DOMContentLoaded",function(){console.log("üöÄ Initialisation du Dashboard Demandes..."),document.querySelectorAll(".animate-slide-up").forEach((t,n)=>{setTimeout(()=>{t.style.opacity="1",t.style.transform="translateY(0)"},n*100)}),ld(),wd(),Ed(),console.log("‚ö†Ô∏è Th√®me et notifications g√©r√©s par config.js"),$s("all"),console.log("‚úÖ Dashboard Demandes initialis√© avec succ√®s"),console.log("üìä Donn√©es charg√©es:",{total:A.length,pending:A.filter(t=>t.status==="pending").length,approved:A.filter(t=>t.status==="approved").length,rejected:A.filter(t=>t.status==="rejected").length})});function J(e,t="success"){document.querySelectorAll(".custom-toast").forEach(i=>i.remove());const o=document.createElement("div");o.className=`custom-toast ${t}`;let s,a;t==="success"?(s="fa-check-circle",a="Succ√®s"):(s="fa-exclamation-circle",a="Erreur"),o.innerHTML=`
        <div class="custom-toast-icon">
            <i class="fas ${s}"></i>
        </div>
        <div class="custom-toast-content">
            <div class="custom-toast-title">${a}</div>
            <div class="custom-toast-message">${e}</div>
        </div>
        <button class="custom-toast-close">
            <i class="fas fa-times"></i>
        </button>
    `,document.body.appendChild(o),o.querySelector(".custom-toast-close").addEventListener("click",()=>{o.classList.remove("show"),setTimeout(()=>o.remove(),500)}),setTimeout(()=>{o.classList.add("show")},100),setTimeout(()=>{o.classList.remove("show"),setTimeout(()=>o.remove(),500)},4e3)}function Is(){const e=document.querySelector('meta[name="csrf-token"]');return e?e.getAttribute("content"):(console.error(`‚ùå Meta tag CSRF introuvable ! Assurez-vous d'avoir : <meta name="csrf-token" content="{{ csrf_token() }}">`),"")}window.addEventListener("load",function(){const e=document.getElementById("loader"),t=document.getElementById("mainContent");let n=0;const o=document.querySelector(".loader-progress-bar"),s=setInterval(()=>{n+=Math.random()*15,n>=100&&(n=100,clearInterval(s),setTimeout(()=>{e.classList.add("hide"),setTimeout(()=>{e.style.display="none",t.classList.add("show")},500)},500)),o.style.width=`${n}%`},200)});const xt=document.getElementById("themeToggle"),vn=document.body;let qe=localStorage.getItem("theme")||"dark";qe==="light"&&(vn.setAttribute("data-theme","light"),xt.innerHTML='<i class="fas fa-sun"></i>');xt.addEventListener("click",()=>{qe==="light"?(vn.removeAttribute("data-theme"),xt.innerHTML='<i class="fas fa-moon"></i>',qe="dark"):(vn.setAttribute("data-theme","light"),xt.innerHTML='<i class="fas fa-sun"></i>',qe="light"),localStorage.setItem("theme",qe)});const sn=document.getElementById("passwordToggle"),dt=document.getElementById("password");sn&&dt&&sn.addEventListener("click",()=>{const e=sn.querySelector("i");dt.type==="password"?(dt.type="text",e.className="fas fa-eye-slash"):(dt.type="password",e.className="fas fa-eye")});const $o=document.getElementById("forgotPasswordBtn"),Y=document.getElementById("forgotPasswordPopup"),Co=document.getElementById("closePopup"),Io=document.getElementById("forgotPasswordForm");$o&&Y&&$o.addEventListener("click",()=>{Y.style.display="flex",document.body.style.overflow="hidden"});Co&&Y&&Co.addEventListener("click",()=>{Y.style.display="none",document.body.style.overflow="auto"});Y&&Y.addEventListener("click",e=>{e.target===Y&&(Y.style.display="none",document.body.style.overflow="auto")});Io&&Io.addEventListener("submit",async e=>{e.preventDefault();const t=document.getElementById("resetEmail").value,n=document.querySelector("#resetSubmitBtn .btn-content"),o=document.querySelector("#resetSubmitBtn .btn-loader");if(!t){J("Veuillez saisir votre adresse email","error");return}if(!t.includes("@")){J("Veuillez utiliser une adresse email valide","error");return}n&&(n.style.opacity="0"),o&&(o.style.display="block");try{const s=Is(),a=await fetch("/auth/forgot-password",{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json","X-CSRF-TOKEN":s},body:JSON.stringify({email:t})}),r=await a.json();n&&(n.style.opacity="1"),o&&(o.style.display="none"),a.ok&&r.success?(J(r.message,"success"),setTimeout(()=>{Y.style.display="none",document.body.style.overflow="auto",document.getElementById("resetEmail").value=""},2e3)):J(r.message||"Erreur lors de l'envoi du lien","error")}catch(s){n&&(n.style.opacity="1"),o&&(o.style.display="none"),console.error("Erreur:",s),J("Une erreur s'est produite. Veuillez r√©essayer.","error")}});const So=document.getElementById("loginForm");So&&So.addEventListener("submit",async e=>{e.preventDefault();const t=document.getElementById("email").value,n=document.getElementById("password").value,o=document.getElementById("remember")?document.getElementById("remember").checked:!1,s=document.querySelector("#submitBtn .btn-content"),a=document.querySelector("#submitBtn .btn-loader");if(!t||!n){J("Veuillez remplir tous les champs","error");return}if(!t.includes("@")){J("Veuillez saisir une adresse email valide","error");return}s&&(s.style.opacity="0"),a&&(a.style.display="block");try{const r=Is();if(!r)throw new Error("Token CSRF introuvable");const i=await fetch("/login",{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json","X-CSRF-TOKEN":r},body:JSON.stringify({email:t,password:n,remember:o})});let c;const l=i.headers.get("content-type");if(l&&l.includes("application/json"))c=await i.json();else throw new Error("R√©ponse invalide du serveur");i.ok&&c.success?(J(c.message||"Connexion r√©ussie !","success"),setTimeout(()=>{window.location.href=c.redirect},1e3)):(s&&(s.style.opacity="1"),a&&(a.style.display="none"),J(c.message||"Identifiants incorrects","error"))}catch(r){s&&(s.style.opacity="1"),a&&(a.style.display="none"),console.error("Erreur de connexion:",r),J("Une erreur s'est produite lors de la connexion","error")}});const kd=document.querySelectorAll(".form-input");kd.forEach(e=>{e.addEventListener("focus",()=>{e.style.boxShadow="0 0 0 4px rgba(79, 70, 229, 0.2)"}),e.addEventListener("blur",()=>{e.style.boxShadow="none"})});const Ss={1:{total:25,utilise:7,restant:18,type:"Cong√©s pay√©s",couleur:"from-blue-500 to-blue-600"},2:{total:90,utilise:3,restant:87,type:"Cong√©s maladie",couleur:"from-red-400 to-orange-500"},3:{total:112,utilise:0,restant:106,type:"Cong√© maternit√©",couleur:"from-pink-500 to-purple-500"},4:{total:10,utilise:6,restant:4,type:"RTT",couleur:"from-yellow-400 to-orange-500"}};function Ld(e){const t=Ss[e];if(!t)return;const n=Math.round(t.restant/t.total*100),o=document.getElementById(`solde-bar-${e}`),s=document.getElementById(`solde-text-${e}`);o&&s&&(o.style.width=n+"%",o.className=`bg-gradient-to-r ${t.couleur} h-2 rounded-full transition-all duration-300`,s.textContent=`${t.restant}/${t.total} jours`)}function Bd(){Object.keys(Ss).forEach(e=>{setTimeout(()=>{Ld(e)},parseInt(e)*200)})}document.addEventListener("DOMContentLoaded",function(){Bd()});let Fd="note",As=0,$t=[{id:1,title:"Politique de cong√©s 2025",date:"15/09/2025",type:"PDF",hasFile:!0,fileName:"politique_conges_2025.pdf",description:"Nouvelle politique de gestion des cong√©s pour l'ann√©e 2025. Merci de prendre connaissance des nouvelles r√®gles.",icon:"fas fa-file-pdf",bgColor:"from-red-500 to-pink-500",badgeColor:"bg-red-100 dark:bg-red-900/30 text-red-800 dark:text-red-300"},{id:2,title:"Planning √©t√© 2025",date:"10/09/2025",type:"XLSX",hasFile:!0,fileName:"planning_ete_2025.xlsx",description:"Planning d√©taill√© pour la p√©riode estivale avec les remplacements pr√©vus.",icon:"fas fa-file-excel",bgColor:"from-green-500 to-teal-500",badgeColor:"bg-green-100 dark:bg-green-900/30 text-green-800 dark:text-green-300"},{id:3,title:"R√©union √©quipe - Septembre",date:"08/09/2025",type:"NOTE",hasFile:!1,description:`Ordre du jour de la r√©union d'√©quipe du mois de septembre :

1. Bilan des activit√©s
2. Nouveaux projets
3. Planning octobre
4. Questions diverses`,icon:"fas fa-sticky-note",bgColor:"from-blue-500 to-indigo-500",badgeColor:"bg-blue-100 dark:bg-blue-900/30 text-blue-800 dark:text-blue-300"},{id:4,title:"Organigramme 2025",date:"05/09/2025",type:"PNG",hasFile:!0,fileName:"organigramme_2025.png",description:"Nouvel organigramme de l'entreprise suite aux r√©cents changements organisationnels.",icon:"fas fa-file-image",bgColor:"from-purple-500 to-pink-500",badgeColor:"bg-purple-100 dark:bg-purple-900/30 text-purple-800 dark:text-purple-300"}];document.getElementById("noteForm").addEventListener("submit",function(e){e.preventDefault();const t=document.getElementById("noteTitle").value,n=document.getElementById("noteDescription").value,s=document.getElementById("fileInput").files[0];if(!t.trim()){alert("Le titre est obligatoire");return}const a={id:++As+$t.length,title:t.trim(),date:new Date().toLocaleDateString("fr-FR"),description:n.trim()||"",hasFile:Fd==="file",fileName:s?s.name:null};a.type="NOTE",a.icon="fas fa-sticky-note",a.bgColor="from-blue-500 to-indigo-500",a.badgeColor="bg-blue-100 dark:bg-blue-900/30 text-blue-800 dark:text-blue-300",$t.unshift(a),Ds(),Ot("publishModal"),Td("Note publi√©e avec succ√®s !","success")});function Ds(){const e=document.getElementById("notesTableBody");e.innerHTML="",$t.forEach(t=>{const n=document.createElement("tr");n.className="note-row hover:bg-gray-50 dark:hover:bg-gray-700/30 transition-colors note-added",n.setAttribute("data-id",t.id),n.innerHTML=`
            <td class="px-6 py-4 whitespace-nowrap">
                <div class="flex items-center">
                    <div class="w-10 h-10 bg-gradient-to-r ${t.bgColor} rounded-lg flex items-center justify-center mr-3">
                        <i class="${t.icon} text-white text-sm"></i>
                    </div>
                    <div class="text-sm font-medium text-gray-900 dark:text-white">${t.title}</div>
                </div>
            </td>
            <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400">${t.date}</td>
            <td class="px-6 py-4 whitespace-nowrap">
                <span class="px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${t.badgeColor}">${t.type}</span>
            </td>
            <td class="px-6 py-4 whitespace-nowrap text-sm font-medium space-x-2">
                ${t.hasFile?`
                    <button onclick="downloadNote(${t.id})" class="text-blue-500 hover:text-blue-700 p-2 rounded-lg hover:bg-blue-50 dark:hover:bg-blue-900/30 transition-colors" title="T√©l√©charger">
                        <i class="fas fa-download"></i>
                    </button>
                `:""}
                <button onclick="viewNote(${t.id})" class="text-gray-500 hover:text-gray-700 p-2 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700/50 transition-colors" title="Visualiser">
                    <i class="fas fa-eye"></i>
                </button>
                <button onclick="editNote(${t.id})" class="text-orange-500 hover:text-orange-700 p-2 rounded-lg hover:bg-orange-50 dark:hover:bg-orange-900/30 transition-colors" title="Modifier">
                    <i class="fas fa-edit"></i>
                </button>
                <button onclick="deleteNote(${t.id})" class="text-red-500 hover:text-red-700 p-2 rounded-lg hover:bg-red-50 dark:hover:bg-red-900/30 transition-colors" title="Supprimer">
                    <i class="fas fa-trash"></i>
                </button>
            </td>
        `,e.appendChild(n),setTimeout(()=>{n.classList.remove("note-added")},500)})}function Td(e,t="info"){const n=document.createElement("div");n.className=`fixed top-4 right-4 z-50 p-4 rounded-lg shadow-lg transform translate-x-full transition-transform duration-300 ${t==="success"?"bg-green-500 text-white":t==="error"?"bg-red-500 text-white":"bg-blue-500 text-white"}`,n.innerHTML=`
        <div class="flex items-center">
            <i class="fas ${t==="success"?"fa-check-circle":t==="error"?"fa-exclamation-circle":"fa-info-circle"} mr-2"></i>
            <span>${e}</span>
        </div>
    `,document.body.appendChild(n),setTimeout(()=>{n.classList.remove("translate-x-full")},10),setTimeout(()=>{n.classList.add("translate-x-full"),setTimeout(()=>{document.body.removeChild(n)},300)},3e3)}document.addEventListener("DOMContentLoaded",function(){As=Math.max(...$t.map(e=>e.id)),Ds()});function Ot(e){const t=document.getElementById(e),n=t.querySelector(".backdrop"),o=t.querySelector(".modal");n.classList.remove("show"),o.classList.remove("show"),setTimeout(()=>{t.classList.add("hidden")},250)}document.addEventListener("keydown",function(e){e.key==="Escape"&&document.querySelectorAll('[id$="Modal"]:not(.hidden)').forEach(n=>{Ot(n.id)})});document.addEventListener("DOMContentLoaded",function(){document.querySelectorAll(".animate-slide-up").forEach((t,n)=>{setTimeout(()=>{t.style.opacity="1",t.style.transform="translateY(0)"},n*100)}),$d()});function $d(){const e=document.getElementById("demandesChart").getContext("2d");new Chart(e,{type:"line",data:{labels:["Jan","F√©v","Mar","Avr","Mai","Jun","Jul","Ao√ª","Sep"],datasets:[{label:"Demandes",data:[12,19,15,25,22,18,28,24,20],borderColor:"rgb(59, 130, 246)",backgroundColor:"rgba(59, 130, 246, 0.1)",tension:.4,fill:!0}]},options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!1}},scales:{y:{beginAtZero:!0,grid:{color:"rgba(156, 163, 175, 0.2)"}},x:{grid:{color:"rgba(156, 163, 175, 0.2)"}}}}});const t=document.getElementById("typesChart").getContext("2d");new Chart(t,{type:"doughnut",data:{labels:["Cong√©s pay√©s","RTT","Maladie","Formation","Autres"],datasets:[{data:[45,25,15,10,5],backgroundColor:["rgb(59, 130, 246)","rgb(34, 197, 94)","rgb(239, 68, 68)","rgb(139, 92, 246)","rgb(236, 72, 153)"]}]},options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"bottom"}}}});const n=document.getElementById("approvalChart").getContext("2d");new Chart(n,{type:"bar",data:{labels:["Avr","Mai","Jun","Jul","Ao√ª","Sep"],datasets:[{label:"Taux d'approbation",data:[85,88,82,90,87,87],backgroundColor:"rgba(139, 92, 246, 0.8)",borderColor:"rgb(139, 92, 246)",borderWidth:1,borderRadius:8}]},options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!1}},scales:{y:{beginAtZero:!0,max:100,grid:{color:"rgba(156, 163, 175, 0.2)"},ticks:{callback:function(o){return o+"%"}}},x:{grid:{display:!1}}}}})}function Cd(){document.querySelectorAll(".progress-bar").forEach(t=>{const n=t.style.width||t.className.match(/w-(\d+)\/(\d+)/);t.style.width="0%",setTimeout(()=>{t.style.transition="width 1s ease-in-out",n&&(t.style.width=n)},500)})}setTimeout(()=>{Cd()},1e3);document.getElementById("justificatifChefForm").addEventListener("submit",function(e){e.preventDefault();{alert("Veuillez s√©lectionner un fichier");return}});document.addEventListener("click",function(e){e.target.classList.contains("backdrop")&&Ot("uploadJustificatifChefModal")});document.addEventListener("keydown",function(e){e.key==="Escape"&&Ot("uploadJustificatifChefModal")});function Id(){const e=document.getElementById("logoutConfirmModal");e.classList.remove("hidden"),setTimeout(()=>{e.querySelector(".modal").style.opacity="1",e.querySelector(".modal").style.transform="scale(1)"},10)}function Sd(){const e=document.getElementById("logoutConfirmModal");e.querySelector(".modal").style.opacity="0",e.querySelector(".modal").style.transform="scale(0.95)",setTimeout(()=>{e.classList.add("hidden")},200)}document.getElementById("logoutBtn").addEventListener("click",function(e){e.preventDefault(),Id()});document.addEventListener("keydown",function(e){e.key==="Escape"&&Sd()});document.addEventListener("DOMContentLoaded",function(){const e=document.getElementById("logoutConfirmModal").querySelector(".modal");e.style.opacity="0",e.style.transform="scale(0.95)",e.style.transition="all 0.2s ease-out"});function Ad(){const e=document.getElementById("logoutConfirmModal");if(!e){console.error("Le modal de d√©connexion (logoutConfirmModal) n'existe pas dans le DOM"),confirm("√ätes-vous s√ªr de vouloir vous d√©connecter ?")&&Md();return}e.classList.remove("hidden"),document.body.style.overflow="hidden",setTimeout(()=>{const t=e.querySelector(".modal");t&&(t.style.opacity="1",t.style.transform="scale(1)")},10)}function Ct(){const e=document.getElementById("logoutConfirmModal");if(!e){console.error("Le modal de d√©connexion (logoutConfirmModal) n'existe pas dans le DOM");return}const t=e.querySelector(".modal");t&&(t.style.opacity="0",t.style.transform="scale(0.95)"),setTimeout(()=>{e.classList.add("hidden"),document.body.style.overflow="auto"},200)}function Dd(e="D√©connexion r√©ussie"){const t=document.getElementById("logoutToast");if(!t){console.warn("Le toast de d√©connexion (logoutToast) n'existe pas dans le DOM");return}const n=t.querySelector(".toast-message");n&&(n.textContent=e),t.classList.remove("translate-x-full"),t.classList.add("translate-x-0"),setTimeout(()=>{t.classList.remove("translate-x-0"),t.classList.add("translate-x-full")},3e3)}function Md(){try{const e=document.createElement("form");e.method="POST",e.action="/logout";const t=document.querySelector('meta[name="csrf-token"]');if(!t){console.error('Token CSRF introuvable. Assurez-vous que <meta name="csrf-token"> existe dans votre page.'),alert("Erreur: Token CSRF manquant");return}const n=document.createElement("input");n.type="hidden",n.name="_token",n.value=t.content,e.appendChild(n),document.body.appendChild(e),Ct(),setTimeout(()=>{Dd("D√©connexion en cours...")},300),setTimeout(()=>{e.submit()},1e3)}catch(e){console.error("Erreur lors de la d√©connexion:",e),Ct(),typeof showMiniToast=="function"?showMiniToast("Une erreur s'est produite lors de la d√©connexion","error"):alert("Une erreur s'est produite lors de la d√©connexion")}}document.addEventListener("DOMContentLoaded",function(){const e=document.getElementById("logoutBtn");e?(e.addEventListener("click",function(o){o.preventDefault(),Ad()}),console.log("‚úÖ Event listener de d√©connexion initialis√©")):console.warn("‚ö†Ô∏è Bouton de d√©connexion (logoutBtn) non trouv√© dans le DOM"),document.addEventListener("keydown",function(o){if(o.key==="Escape"){const s=document.getElementById("logoutConfirmModal");s&&!s.classList.contains("hidden")&&Ct()}});const t=document.getElementById("logoutConfirmModal");if(t){const o=t.querySelector(".modal");o&&(o.style.opacity="0",o.style.transform="scale(0.95)",o.style.transition="all 0.2s ease-out"),console.log("‚úÖ Modal de d√©connexion initialis√©")}else console.warn("‚ö†Ô∏è Modal de d√©connexion (logoutConfirmModal) non trouv√© dans le DOM");const n=document.getElementById("logoutConfirmModal");n&&n.addEventListener("click",function(o){o.target===n&&Ct()})});document.addEventListener("DOMContentLoaded",function(){Rd(),document.getElementById("profile-tab")&&Ms("profile")});function Rd(){document.querySelectorAll(".tab-button").forEach(t=>{t.addEventListener("click",function(){const n=this.getAttribute("data-tab");n&&Ms(n)})})}function Ms(e){document.querySelectorAll(".tab-button").forEach(o=>{o.classList.remove("active"),o.classList.remove("bg-gradient-to-r","from-blue-500","to-purple-600","text-white","shadow-lg"),o.classList.add("bg-gray-100","dark:bg-gray-700","text-gray-700","dark:text-gray-300")}),document.querySelectorAll(".tab-pane").forEach(o=>{o.classList.add("hidden"),o.classList.remove("active")});const t=document.querySelector(`.tab-button[data-tab="${e}"]`);t&&(t.classList.add("active"),t.classList.remove("bg-gray-100","dark:bg-gray-700","text-gray-700","dark:text-gray-300"),t.classList.add("bg-gradient-to-r","from-blue-500","to-purple-600","text-white","shadow-lg"));const n=document.getElementById(`${e}-tab`);n&&(n.classList.remove("hidden"),n.classList.add("active"))}const K=new Notyf({duration:4e3,position:{x:"right",y:"top"},types:[{type:"success",background:"#10B981",icon:{className:"fas fa-check-circle",tagName:"i",color:"white"}},{type:"error",background:"#EF4444",icon:{className:"fas fa-exclamation-circle",tagName:"i",color:"white"}},{type:"warning",background:"#F59E0B",icon:{className:"fas fa-exclamation-triangle",tagName:"i",color:"white"}}]});window.addEventListener("load",function(){const e=document.getElementById("loader"),t=document.getElementById("mainContent");setTimeout(()=>{e.classList.add("hide"),setTimeout(()=>{e.style.display="none",t.classList.add("show"),Nd()},500)},2500)});function Nd(){document.querySelectorAll(".form-group, .security-requirements, .submit-btn").forEach((t,n)=>{t.style.opacity="0",t.style.transform="translateY(30px)",setTimeout(()=>{t.style.transition="all 0.6s cubic-bezier(0.4, 0, 0.2, 1)",t.style.opacity="1",t.style.transform="translateY(0)"},n*150)})}const an=document.getElementById("themeToggle"),Ao=document.body;let rn="dark";an.addEventListener("click",()=>{rn==="light"?(Ao.removeAttribute("data-theme"),an.innerHTML='<i class="fas fa-moon"></i>',rn="dark"):(Ao.setAttribute("data-theme","light"),an.innerHTML='<i class="fas fa-sun"></i>',rn="light")});document.getElementById("backBtn").addEventListener("click",()=>{window.location.href="/"});const Pd=document.querySelectorAll(".password-toggle");Pd.forEach(e=>{e.addEventListener("click",()=>{const t=e.parentElement.querySelector("input"),n=e.querySelector("i");t.type==="password"?(t.type="text",n.className="fas fa-eye-slash"):(t.type="password",n.className="fas fa-eye")})});const ee=document.getElementById("newPassword"),te=document.getElementById("confirmPassword"),xe=document.getElementById("strengthFill"),Do=document.getElementById("strengthText"),we=document.getElementById("passwordMatch"),jd={length:document.getElementById("lengthReq"),uppercase:document.getElementById("uppercaseReq"),lowercase:document.getElementById("lowercaseReq"),number:document.getElementById("numberReq"),special:document.getElementById("specialReq")};function An(e){let t=0;const n={length:e.length>=8,uppercase:/[A-Z]/.test(e),lowercase:/[a-z]/.test(e),number:/[0-9]/.test(e),special:/[^A-Za-z0-9]/.test(e)};let o=0;e.length>=12&&(o=1),e.length>=16&&(o=2),Object.keys(n).forEach(l=>{const u=jd[l];if(u){const f=u.querySelector(".requirement-icon");n[l]?(u.classList.add("met"),f.className="fas fa-check-circle requirement-icon",t++):(u.classList.remove("met"),f.className="fas fa-circle requirement-icon")}});const s=t+o;let a="none",r=0,i="fas fa-info-circle",c="Saisissez un mot de passe";return e.length===0?(a="none",r=0,i="fas fa-info-circle",c="Saisissez un mot de passe"):s<=1?(a="very-weak",r=15,i="fas fa-exclamation-triangle",c="Tr√®s faible - Ajoutez plus d'√©l√©ments"):s===2?(a="weak",r=30,i="fas fa-exclamation-circle",c="Faible - Am√©liorez votre mot de passe"):s===3?(a="fair",r=50,i="fas fa-minus-circle",c="Moyen - Ajoutez plus de caract√®res"):s===4?(a="good",r=70,i="fas fa-check-circle",c="Bon - Presque parfait !"):s===5?(a="strong",r=85,i="fas fa-shield-check",c="Fort - Excellent choix !"):s>=6&&(a="excellent",r=100,i="fas fa-crown",c="Excellent - S√©curit√© maximale !"),xe.style.width=`${r}%`,xe.className=`strength-fill ${a}`,Do.className=`strength-text ${a}`,Do.innerHTML=`<i class="${i}"></i> ${c}`,xe.style.transform="scaleX(0)",setTimeout(()=>{xe.style.transform="scaleX(1)",xe.style.transformOrigin="left",xe.style.transition="transform 0.4s cubic-bezier(0.4, 0, 0.2, 1)"},50),t>=4}function _t(){const e=ee.value,t=te.value;return t===""?(we.innerHTML="",we.className="password-match",!1):e===t?(we.innerHTML='<i class="fas fa-check-circle"></i> Les mots de passe correspondent parfaitement',we.className="password-match success",!0):(we.innerHTML='<i class="fas fa-times-circle"></i> Les mots de passe ne correspondent pas',we.className="password-match error",!1)}ee.addEventListener("input",e=>{An(e.target.value),te.value&&_t(),e.target.style.transform="scale(1.02)",setTimeout(()=>{e.target.style.transform="scale(1)"},150)});te.addEventListener("input",e=>{_t(),e.target.style.transform="scale(1.02)",setTimeout(()=>{e.target.style.transform="scale(1)"},150)});const ce=document.getElementById("confirmModal"),Be=document.getElementById("successModal"),qd=document.getElementById("cancelBtn"),Rs=document.getElementById("confirmBtn"),Dn=document.getElementById("okBtn");function Ns(e){e.classList.add("show"),document.body.style.overflow="hidden"}function Ce(e){e.classList.remove("show"),document.body.style.overflow=""}qd.addEventListener("click",()=>{Ce(ce),K.open({type:"warning",message:"Modification annul√©e"})});Rs.addEventListener("click",()=>{Ce(ce),Od()});Dn.addEventListener("click",()=>{Ce(Be),_d()});[ce,Be].forEach(e=>{e.addEventListener("click",t=>{t.target===e&&Ce(e)})});function Od(){const e=document.getElementById("submitBtn"),t=e.querySelector(".btn-text"),n=e.querySelector(".submit-icon"),o=e.querySelector(".btn-loader");e.disabled=!0,t.style.display="none",n.style.display="none",o.style.display="inline-block";let s=0;const a=setInterval(()=>{s<progressMessages.length&&(K.open({type:"success",message:progressMessages[s],duration:1e3}),s++)},800);setTimeout(()=>{clearInterval(a),e.disabled=!1,t.style.display="inline",n.style.display="inline",o.style.display="none",Ns(Be),K.success("Mot de passe mis √† jour avec succ√®s !")},3500)}function _d(){document.querySelector(".login-container").style.transform="scale(0.95)",document.querySelector(".login-container").style.opacity="0",setTimeout(()=>{window.location.href="/"},500)}const Hd=document.getElementById("newPasswordForm");Hd.addEventListener("submit",e=>{e.preventDefault();const t=ee.value.trim(),n=te.value.trim();if(!t){K.error("Veuillez saisir un nouveau mot de passe"),ee.focus();return}if(t.length<8){K.error("Le mot de passe doit contenir au moins 8 caract√®res"),ee.focus();return}if(!n){K.error("Veuillez confirmer votre mot de passe"),te.focus();return}if(!An(t)){K.error("Le mot de passe ne respecte pas les crit√®res de s√©curit√© minimum"),ee.focus();return}if(!_t()){K.error("Les mots de passe ne correspondent pas"),te.focus();return}if(["password","123456","12345678","qwerty","abc123","password123","admin","letmein","welcome","monkey"].includes(t.toLowerCase())){K.error("Ce mot de passe est trop commun. Choisissez quelque chose de plus unique."),ee.focus();return}Ns(ce)});const Ud=document.querySelectorAll(".form-input");Ud.forEach(e=>{e.addEventListener("focus",t=>{t.target.style.transform="translateY(-2px)",t.target.style.boxShadow="0 8px 25px rgba(59, 130, 246, 0.15)"}),e.addEventListener("blur",t=>{t.target.style.transform="",t.target.style.boxShadow=""})});document.addEventListener("keydown",e=>{e.key==="Escape"&&(ce.classList.contains("show")&&Ce(ce),Be.classList.contains("show")&&Ce(Be)),e.key==="Enter"&&(ce.classList.contains("show")&&Rs.click(),Be.classList.contains("show")&&Dn.click())});function Vd(){const e=["#10B981","#34D399","#6EE7B7","#A7F3D0"];for(let t=0;t<15;t++){const n=document.createElement("div");n.style.position="fixed",n.style.width="6px",n.style.height="6px",n.style.backgroundColor=e[Math.floor(Math.random()*e.length)],n.style.borderRadius="50%",n.style.pointerEvents="none",n.style.zIndex="10001",n.style.left=Math.random()*window.innerWidth+"px",n.style.top=Math.random()*window.innerHeight+"px",n.style.opacity="1",n.style.transform="scale(0)",n.style.transition="all 2s cubic-bezier(0.4, 0, 0.2, 1)",document.body.appendChild(n),setTimeout(()=>{n.style.transform="scale(1) translateY(-100px)",n.style.opacity="0"},50),setTimeout(()=>{n.remove()},2050)}}document.addEventListener("DOMContentLoaded",()=>{Dn.addEventListener("click",Vd)});function Ps(e,t){let n;return function(...s){const a=()=>{clearTimeout(n),e(...s)};clearTimeout(n),n=setTimeout(a,t)}}const zd=Ps(e=>{An(e)},300),js=Ps(()=>{_t()},300);ee.addEventListener("input",e=>{zd(e.target.value),te.value&&js()});te.addEventListener("input",()=>{js()});const wt=document.getElementById("password-form"),qs=document.getElementById("current-password"),Mn=document.getElementById("new-password"),Rn=document.getElementById("confirm-password"),Jd=document.getElementById("cancel-password-btn"),re=document.getElementById("save-password-btn"),It=document.getElementById("password-strength-bar"),Ie=document.getElementById("password-strength-text"),Nn=document.getElementById("length-check"),Pn=document.getElementById("uppercase-check"),jn=document.getElementById("lowercase-check"),qn=document.getElementById("number-check"),St=document.getElementById("password-match-message"),Mo=document.getElementById("match-icon"),lt=document.getElementById("match-text");function Xd(e){let t=0;const n=e.length>=8,o=/[A-Z]/.test(e),s=/[a-z]/.test(e),a=/\d/.test(e);ct(Nn,n),ct(Pn,o),ct(jn,s),ct(qn,a),n&&(t+=25),o&&(t+=25),s&&(t+=25),a&&(t+=25),It.style.width=t+"%";let r,i;return t<50?(r="#ef4444",i="Faible"):t<75?(r="#f59e0b",i="Moyen"):t<100?(r="#3b82f6",i="Bon"):(r="#10b981",i="Fort"),It.style.backgroundColor=r,Ie.textContent=i,Ie.style.color=r,n&&o&&s&&a}function ct(e,t){t?e.className="fas fa-check text-green-500":e.className="fas fa-times text-red-500"}function Wd(){const e=Mn.value,t=Rn.value;if(t.length===0){St.classList.add("hidden");return}return St.classList.remove("hidden"),e===t?(Mo.className="fas fa-check text-green-500",lt.textContent="Les mots de passe correspondent",lt.className="text-green-600 dark:text-green-400",!0):(Mo.className="fas fa-times text-red-500",lt.textContent="Les mots de passe ne correspondent pas",lt.className="text-red-600 dark:text-red-400",!1)}function Ht(){const e=qs.value,t=Mn.value;Rn.value;const n=e.length>0,o=Xd(t),s=Wd(),a=n&&o&&s;return re.disabled=!a,a}Mn.addEventListener("input",Ht);Rn.addEventListener("input",Ht);qs.addEventListener("input",Ht);Jd.addEventListener("click",()=>{wt.reset(),St.classList.add("hidden"),It.style.width="0%",Ie.textContent="Faible",Ie.style.color="#6b7280",[Nn,Pn,jn,qn].forEach(t=>{t.className="fas fa-times text-red-500"}),re.disabled=!0});wt.addEventListener("submit",e=>{if(e.preventDefault(),!Ht()){alert("Veuillez corriger les erreurs avant de soumettre le formulaire.");return}const t=new FormData(wt);t.get("current_password"),t.get("new_password"),t.get("confirm_password"),console.log("Changement de mot de passe:",{currentPassword:"***",newPassword:"***",confirmPassword:"***"}),re.disabled=!0,re.innerHTML='<i class="fas fa-spinner fa-spin mr-2"></i>Changement en cours...',setTimeout(()=>{alert("Mot de passe chang√© avec succ√®s !"),wt.reset(),St.classList.add("hidden"),It.style.width="0%",Ie.textContent="Faible",Ie.style.color="#6b7280",[Nn,Pn,jn,qn].forEach(o=>{o.className="fas fa-times text-red-500"}),re.disabled=!0,re.innerHTML='<i class="fas fa-save mr-2"></i>Changer le mot de passe'},2e3)});document.addEventListener("DOMContentLoaded",()=>{re.disabled=!0});let Xe=null;const Kd=document.getElementById("change-photo-btn"),Yd=document.getElementById("photo-overlay"),Gd=document.getElementById("profile-photo"),fe=document.getElementById("photo-upload-popup"),At=document.getElementById("popup-content"),Zd=document.getElementById("close-popup-btn"),pe=document.getElementById("upload-zone"),On=document.getElementById("popup-file-input"),ie=document.getElementById("popup-preview"),ut=document.getElementById("avatar-display"),Qd=document.getElementById("popup-cancel-btn"),We=document.getElementById("popup-confirm-btn");function Os(){fe.classList.remove("hidden"),fe.classList.add("flex"),setTimeout(()=>{At.classList.remove("scale-95","opacity-0"),At.classList.add("scale-100","opacity-100")},10)}function et(){At.classList.remove("scale-100","opacity-100"),At.classList.add("scale-95","opacity-0"),setTimeout(()=>{fe.classList.add("hidden"),fe.classList.remove("flex"),el()},300)}function el(){Xe=null,On.value="",ie.style.backgroundImage="",ie.textContent="JM",ie.className="w-24 h-24 mx-auto bg-gradient-to-r from-purple-500 to-pink-500 rounded-full flex items-center justify-center text-white font-bold text-2xl shadow-lg",We.disabled=!0,We.classList.add("opacity-50","cursor-not-allowed")}function _s(e){if(e){const t=new FileReader;t.onload=function(n){ie.style.backgroundImage=`url(${n.target.result})`,ie.style.backgroundSize="cover",ie.style.backgroundPosition="center",ie.textContent="",We.disabled=!1,We.classList.remove("opacity-50","cursor-not-allowed")},t.readAsDataURL(e)}}function tl(e){if(e){const t=new FileReader;t.onload=function(n){ut.style.backgroundImage=`url(${n.target.result})`,ut.style.backgroundSize="cover",ut.style.backgroundPosition="center",ut.textContent="";const o=new DataTransfer;o.items.add(e),Gd.files=o.files},t.readAsDataURL(e)}}function Hs(e){return["image/jpeg","image/jpg","image/png","image/gif","image/bmp","image/webp","image/svg+xml"].includes(e.type)?e.size>5242880?(alert("Le fichier est trop volumineux. Taille maximum : 5MB."),!1):!0:(alert("Format de fichier non support√©. Veuillez choisir une image (JPG, PNG, GIF, BMP, WEBP, SVG)."),!1)}Kd.addEventListener("click",Os);Yd.addEventListener("click",Os);Zd.addEventListener("click",et);Qd.addEventListener("click",et);pe.addEventListener("click",()=>{On.click()});On.addEventListener("change",e=>{const t=e.target.files[0];t&&Hs(t)&&(Xe=t,_s(t))});pe.addEventListener("dragover",e=>{e.preventDefault(),pe.classList.add("border-blue-500","dark:border-blue-400")});pe.addEventListener("dragleave",e=>{e.preventDefault(),pe.classList.remove("border-blue-500","dark:border-blue-400")});pe.addEventListener("drop",e=>{e.preventDefault(),pe.classList.remove("border-blue-500","dark:border-blue-400");const t=e.dataTransfer.files;if(t.length>0){const n=t[0];Hs(n)&&(Xe=n,_s(n))}});We.addEventListener("click",()=>{Xe&&(tl(Xe),et())});fe.addEventListener("click",e=>{e.target===fe&&et()});document.addEventListener("keydown",e=>{e.key==="Escape"&&!fe.classList.contains("hidden")&&et()});const _n=document.getElementById("edit-profile-btn"),nl=document.getElementById("cancel-edit-btn"),Us=document.getElementById("form-actions"),Ro=document.getElementById("profile-form"),Vs=["lastname","firstname","email","phone","profession"];let xn={};function ol(){Vs.forEach(e=>{const t=document.getElementById(e);xn[e]=t.value,t.removeAttribute("readonly"),t.classList.remove("cursor-not-allowed"),t.classList.remove("bg-gray-50","dark:bg-gray-700"),t.classList.add("bg-white","dark:bg-gray-800")}),Us.classList.remove("hidden"),_n.style.display="none"}function zs(){Vs.forEach(e=>{const t=document.getElementById(e);t.value=xn[e],t.setAttribute("readonly","true"),t.classList.add("bg-gray-50","dark:bg-gray-700"),t.classList.remove("bg-white","dark:bg-gray-800")}),Us.classList.add("hidden"),_n.style.display="block",xn={}}function sl(){console.log("Sauvegarde du profil..."),setTimeout(()=>{alert("Profil mis √† jour avec succ√®s !"),zs()},500)}_n.addEventListener("click",ol);nl.addEventListener("click",zs);Ro.addEventListener("submit",e=>{e.preventDefault();const t=new FormData(Ro);console.log("Donn√©es du formulaire:");for(let[n,o]of t.entries())console.log(n,o);sl()});
